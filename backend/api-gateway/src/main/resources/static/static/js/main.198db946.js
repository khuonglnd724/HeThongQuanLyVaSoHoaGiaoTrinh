/*! For license information please see main.198db946.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var s=n(43),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,r={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,s)&&!i.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,x={};function f(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||g}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||g}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=f.prototype;var v=y.prototype=new b;v.constructor=y,p(v,f.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var a,r={},l=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(l=""+t.key),t)N.call(t,a)&&!S.hasOwnProperty(a)&&(r[a]=t[a]);var i=arguments.length-2;if(1===i)r.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===r[a]&&(r[a]=i[a]);return{$$typeof:n,type:e,key:l,ref:o,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,a,r,l){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case n:case s:i=!0}}if(i)return l=l(i=e),e=""===r?"."+I(i,0):r,j(l)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),P(l,t,a,"",function(e){return e})):null!=l&&(C(l)&&(l=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,a+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(E,"$&/")+"/")+e)),t.push(l)),1;if(i=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var d=r+I(o=e[c],c);i+=P(o,t,a,d,l)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)i+=P(o=o.value,t,a,d=r+I(o,c++),l);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function L(e,t,n){if(null==e)return e;var s=[],a=0;return P(e,s,"","",function(e){return t.call(n,e,a++)}),s}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},D={transition:null},A={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:D,ReactCurrentOwner:w};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=a,t.Profiler=l,t.PureComponent=y,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=R,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),r=e.key,l=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,o=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)N.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==i?i[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];a.children=i}return{$$typeof:n,type:e.type,key:r,ref:l,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,a=e[s];if(!(0<r(a,t)))break e;e[s]=t,e[n]=a,n=s}}function s(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,a=e.length,l=a>>>1;s<l;){var o=2*(s+1)-1,i=e[o],c=o+1,d=e[c];if(0>r(i,n))c<a&&0>r(d,i)?(e[s]=d,e[c]=n,s=c):(e[s]=i,e[o]=n,s=o);else{if(!(c<a&&0>r(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,m=null,h=3,g=!1,p=!1,x=!1,f="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=s(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function j(e){if(x=!1,v(e),!p)if(null!==s(c))p=!0,D(N);else{var t=s(d);null!==t&&A(j,t.startTime-e)}}function N(e,n){p=!1,x&&(x=!1,b(C),C=-1),g=!0;var r=h;try{for(v(n),m=s(c);null!==m&&(!(m.expirationTime>n)||e&&!P());){var l=m.callback;if("function"===typeof l){m.callback=null,h=m.priorityLevel;var o=l(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?m.callback=o:m===s(c)&&a(c),v(n)}else a(c);m=s(c)}if(null!==m)var i=!0;else{var u=s(d);null!==u&&A(j,u.startTime-n),i=!1}return i}finally{m=null,h=r,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,k=null,C=-1,E=5,I=-1;function P(){return!(t.unstable_now()-I<E)}function L(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?w():(S=!1,k=null)}}else S=!1}if("function"===typeof y)w=function(){y(L)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,T=O.port2;O.port1.onmessage=L,w=function(){T.postMessage(null)}}else w=function(){f(L,0)};function D(e){k=e,S||(S=!0,w())}function A(e,n){C=f(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,D(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,r){var l=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?l+r:l:r=l,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>l?(e.sortIndex=r,n(d,e),null===s(c)&&e===s(d)&&(x?(b(C),C=-1):x=!0,A(j,r-l))):(e.sortIndex=o,n(c,e),p||g||(p=!0,D(N))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},391(e,t,n){var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},579(e,t,n){e.exports=n(153)},730(e,t,n){var s=n(43),a=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,o={};function i(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)l.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},g={};function p(e,t,n,s,a,r,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=l}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,s){var a=x.hasOwnProperty(t)?x[t]:null;(null!==a?0!==a.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,s)&&(n=null),s||null===a?function(e){return!!u.call(g,e)||!u.call(h,e)&&(m.test(e)?g[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,s=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f,b);x[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f,b);x[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f,b);x[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var z,_=Object.assign;function M(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var U=!1;function F(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),r=s.stack.split("\n"),l=a.length-1,o=r.length-1;1<=l&&0<=o&&a[l]!==r[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==r[o]){if(1!==l||1!==o)do{if(l--,0>--o||a[l]!==r[o]){var i="\n"+a[l].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=l&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=K(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return _({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Y(e,t){Q(e,t);var n=q(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(s&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return _({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function re(e,t){var n=q(t.value),s=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),a=pe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach(function(e){ge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var fe=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,Se=null;function ke(e){if(e=ya(e)){if("function"!==typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=ja(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?Se?Se.push(e):Se=[e]:we=e}function Ee(){if(we){var e=we,t=Se;if(Se=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Pe(){}var Le=!1;function Oe(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ie(e,t,n)}finally{Le=!1,(null!==we||null!==Se)&&(Pe(),Ee())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var s=ja(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var De=!1;if(d)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(de){De=!1}function Re(e,t,n,s,a,r,l,o,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ze=!1,_e=null,Me=!1,Ue=null,Fe={onError:function(e){ze=!0,_e=e}};function Be(e,t,n,s,a,r,l,o,i){ze=!1,_e=null,Re.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(r(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(s=a.return)){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return qe(a),e;if(l===s)return qe(a),t;l=l.sibling}throw Error(r(188))}if(n.return!==s.return)n=a,s=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,s=l;break}if(i===s){o=!0,s=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,s=a;break}if(i===s){o=!0,s=l,n=a;break}i=i.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,We=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,$e=a.unstable_requestPaint,Qe=a.unstable_now,Ye=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,st=a.unstable_IdlePriority,at=null,rt=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,a=e.suspendedLanes,r=e.pingedLanes,l=268435455&n;if(0!==l){var o=l&~a;0!==o?s=ut(o):0!==(r&=l)&&(s=ut(r))}else 0!==(l=n&~a)?s=ut(l):0!==r&&(s=ut(r));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(r=t&-t)||16===a&&0!==(4194240&r)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)a=1<<(n=31-lt(t)),s|=e[n],t&=~a;return s}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ft(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-lt(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,St,kt,Ct=!1,Et=[],It=null,Pt=null,Lt=null,Ot=new Map,Tt=new Map,Dt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function zt(e,t,n,s,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&Nt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function _t(e){var t=ba(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void kt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&Nt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);ve=s,n.target.dispatchEvent(s),ve=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==It&&Mt(It)&&(It=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==Lt&&Mt(Lt)&&(Lt=null),Ot.forEach(Ut),Tt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var s=Et[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Pt&&Bt(Pt,e),null!==Lt&&Bt(Lt,e),Ot.forEach(t),Tt.forEach(t),n=0;n<Dt.length;n++)(s=Dt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)_t(n),null===n.blockedOn&&Dt.shift()}var Ht=v.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,s){var a=yt,r=Ht.transition;Ht.transition=null;try{yt=1,Gt(e,t,n,s)}finally{yt=a,Ht.transition=r}}function Jt(e,t,n,s){var a=yt,r=Ht.transition;Ht.transition=null;try{yt=4,Gt(e,t,n,s)}finally{yt=a,Ht.transition=r}}function Gt(e,t,n,s){if(qt){var a=Xt(e,t,n,s);if(null===a)qs(e,t,s,Wt,n),Rt(e,s);else if(function(e,t,n,s,a){switch(t){case"focusin":return It=zt(It,e,t,n,s,a),!0;case"dragenter":return Pt=zt(Pt,e,t,n,s,a),!0;case"mouseover":return Lt=zt(Lt,e,t,n,s,a),!0;case"pointerover":var r=a.pointerId;return Ot.set(r,zt(Ot.get(r)||null,e,t,n,s,a)),!0;case"gotpointercapture":return r=a.pointerId,Tt.set(r,zt(Tt.get(r)||null,e,t,n,s,a)),!0}return!1}(a,e,t,n,s))s.stopPropagation();else if(Rt(e,s),4&t&&-1<At.indexOf(e)){for(;null!==a;){var r=ya(a);if(null!==r&&jt(r),null===(r=Xt(e,t,n,s))&&qs(e,t,s,Wt,n),r===a)break;a=r}null!==a&&s.stopPropagation()}else qs(e,t,s,null,n)}}var Wt=null;function Xt(e,t,n,s){if(Wt=null,null!==(e=ba(e=je(s))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,s=n.length,a="value"in Qt?Qt.value:Qt.textContent,r=a.length;for(e=0;e<s&&n[e]===a[e];e++);var l=s-e;for(t=1;t<=l&&n[s-t]===a[r-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function an(e){function t(t,n,s,a,r){for(var l in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,ln,on,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=_({},cn,{view:0,detail:0}),mn=an(un),hn=_({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,ln=e.screenY-on.screenY):ln=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(hn),pn=an(_({},hn,{dataTransfer:0})),xn=an(_({},un,{relatedTarget:0})),fn=an(_({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=_({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),vn=an(_({},cn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function kn(){return Sn}var Cn=_({},un,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Cn),In=an(_({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(_({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Ln=an(_({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=_({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=an(On),Dn=[9,13,27,32],An=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var zn=d&&"TextEvent"in window&&!Rn,_n=d&&(!An||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,s){Ce(s),0<(t=Js(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Jn=null,Gn=null;function Wn(e){Ms(e,0)}function Xn(e){if(G(va(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Yn;if(d){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Yn=Zn}else Yn=!1;Qn=Yn&&(!document.documentMode||9<document.documentMode)}function ts(){Jn&&(Jn.detachEvent("onpropertychange",ns),Gn=Jn=null)}function ns(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Kn(t,Gn,e,je(e)),Oe(Wn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Gn=n,(Jn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function as(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function rs(e,t){if("click"===e)return Xn(t)}function ls(e,t){if("input"===e||"change"===e)return Xn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function is(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!u.call(t,a)||!os(e[a],t[a]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ms(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gs(e){var t=ms(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&hs(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,r=Math.min(s.start,a);s=void 0===s.end?r:Math.min(s.end,a),!e.extend&&r>s&&(a=s,s=r,r=a),a=ds(n,r);var l=ds(n,s);a&&l&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),r>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ps=d&&"documentMode"in document&&11>=document.documentMode,xs=null,fs=null,bs=null,ys=!1;function vs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ys||null==xs||xs!==W(s)||("selectionStart"in(s=xs)&&hs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},bs&&is(bs,s)||(bs=s,0<(s=Js(fs,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=xs)))}function js(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ns={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},ws={},Ss={};function ks(e){if(ws[e])return ws[e];if(!Ns[e])return e;var t,n=Ns[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ss)return ws[e]=n[t];return e}d&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);var Cs=ks("animationend"),Es=ks("animationiteration"),Is=ks("animationstart"),Ps=ks("transitionend"),Ls=new Map,Os="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){Ls.set(e,t),i(t,[e])}for(var Ds=0;Ds<Os.length;Ds++){var As=Os[Ds];Ts(As.toLowerCase(),"on"+(As[0].toUpperCase()+As.slice(1)))}Ts(Cs,"onAnimationEnd"),Ts(Es,"onAnimationIteration"),Ts(Is,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(Ps,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function _s(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,a,l,o,i,c){if(Be.apply(this,arguments),ze){if(!ze)throw Error(r(198));var d=_e;ze=!1,_e=null,Me||(Me=!0,Ue=d)}}(s,t,void 0,e),e.currentTarget=null}function Ms(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],i=o.instance,c=o.currentTarget;if(o=o.listener,i!==r&&a.isPropagationStopped())break e;_s(a,o,c),r=i}else for(l=0;l<s.length;l++){if(i=(o=s[l]).instance,c=o.currentTarget,o=o.listener,i!==r&&a.isPropagationStopped())break e;_s(a,o,c),r=i}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Us(e,t){var n=t[pa];void 0===n&&(n=t[pa]=new Set);var s=e+"__bubble";n.has(s)||(Hs(t,e,2,!1),n.add(s))}function Fs(e,t,n){var s=0;t&&(s|=4),Hs(n,e,s,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[Bs]){e[Bs]=!0,l.forEach(function(t){"selectionchange"!==t&&(zs.has(t)||Fs(t,!1,e),Fs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bs]||(t[Bs]=!0,Fs("selectionchange",!1,t))}}function Hs(e,t,n,s){switch($t(t)){case 1:var a=Kt;break;case 4:a=Jt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),s?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function qs(e,t,n,s,a){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var l=s.tag;if(3===l||4===l){var o=s.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===l)for(l=s.return;null!==l;){var i=l.tag;if((3===i||4===i)&&((i=l.stateNode.containerInfo)===a||8===i.nodeType&&i.parentNode===a))return;l=l.return}for(;null!==o;){if(null===(l=ba(o)))return;if(5===(i=l.tag)||6===i){s=r=l;continue e}o=o.parentNode}}s=s.return}Oe(function(){var s=r,a=je(n),l=[];e:{var o=Ls.get(e);if(void 0!==o){var i=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":i=En;break;case"focusin":c="focus",i=xn;break;case"focusout":c="blur",i=xn;break;case"beforeblur":case"afterblur":i=xn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Pn;break;case Cs:case Es:case Is:i=fn;break;case Ps:i=Ln;break;case"scroll":i=mn;break;case"wheel":i=Tn;break;case"copy":case"cut":case"paste":i=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=In}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var h,g=s;null!==g;){var p=(h=g).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==m&&(null!=(p=Te(g,m))&&d.push(Ks(g,p,h)))),u)break;g=g.return}0<d.length&&(o=new i(o,c,null,n,a),l.push({event:o,listeners:d}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[ga])&&(i||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=s,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(i=null,c=s),i!==c)){if(d=gn,p="onMouseLeave",m="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=In,p="onPointerLeave",m="onPointerEnter",g="pointer"),u=null==i?o:va(i),h=null==c?o:va(c),(o=new d(p,g+"leave",i,n,a)).target=u,o.relatedTarget=h,p=null,ba(a)===s&&((d=new d(m,g+"enter",c,n,a)).target=h,d.relatedTarget=u,p=d),u=p,i&&c)e:{for(m=c,g=0,h=d=i;h;h=Gs(h))g++;for(h=0,p=m;p;p=Gs(p))h++;for(;0<g-h;)d=Gs(d),g--;for(;0<h-g;)m=Gs(m),h--;for(;g--;){if(d===m||null!==m&&d===m.alternate)break e;d=Gs(d),m=Gs(m)}d=null}else d=null;null!==i&&Ws(l,o,i,d,!1),null!==c&&null!==u&&Ws(l,u,c,d,!0)}if("select"===(i=(o=s?va(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var x=$n;else if(qn(o))if(Qn)x=ls;else{x=as;var f=ss}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=rs);switch(x&&(x=x(e,s))?Kn(l,x,n,a):(f&&f(e,o,s),"focusout"===e&&(f=o._wrapperState)&&f.controlled&&"number"===o.type&&ee(o,"number",o.value)),f=s?va(s):window,e){case"focusin":(qn(f)||"true"===f.contentEditable)&&(xs=f,fs=s,bs=null);break;case"focusout":bs=fs=xs=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,vs(l,n,a);break;case"selectionchange":if(ps)break;case"keydown":case"keyup":vs(l,n,a)}var b;if(An)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vn?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(_n&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(b=en()):(Yt="value"in(Qt=a)?Qt.value:Qt.textContent,Vn=!0)),0<(f=Js(s,y)).length&&(y=new vn(y,e,null,n,a),l.push({event:y,listeners:f}),b?y.data=b:null!==(b=Bn(n))&&(y.data=b))),(b=zn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!An&&Fn(e,t)?(e=en(),Zt=Yt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Js(s,"onBeforeInput")).length&&(a=new vn("onBeforeInput","beforeinput",null,n,a),l.push({event:a,listeners:s}),a.data=b))}Ms(l,t)})}function Ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Js(e,t){for(var n=t+"Capture",s=[];null!==e;){var a=e,r=a.stateNode;5===a.tag&&null!==r&&(a=r,null!=(r=Te(e,n))&&s.unshift(Ks(e,r,a)),null!=(r=Te(e,t))&&s.push(Ks(e,r,a))),e=e.return}return s}function Gs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ws(e,t,n,s,a){for(var r=t._reactName,l=[];null!==n&&n!==s;){var o=n,i=o.alternate,c=o.stateNode;if(null!==i&&i===s)break;5===o.tag&&null!==c&&(o=c,a?null!=(i=Te(n,r))&&l.unshift(Ks(n,i,o)):a||null!=(i=Te(n,r))&&l.push(Ks(n,i,o))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}var Xs=/\r\n?/g,$s=/\u0000|\uFFFD/g;function Qs(e){return("string"===typeof e?e:""+e).replace(Xs,"\n").replace($s,"")}function Ys(e,t,n){if(t=Qs(t),Qs(e)!==t&&n)throw Error(r(425))}function Zs(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ra="function"===typeof Promise?Promise:void 0,la="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ra?function(e){return ra.resolve(null).then(e).catch(oa)}:sa;function oa(e){setTimeout(function(){throw e})}function ia(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===s)return e.removeChild(a),void Vt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=a}while(n);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ma="__reactFiber$"+ua,ha="__reactProps$"+ua,ga="__reactContainer$"+ua,pa="__reactEvents$"+ua,xa="__reactListeners$"+ua,fa="__reactHandles$"+ua;function ba(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ga]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ma])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[ma]||e[ga])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function va(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function ja(e){return e[ha]||null}var Na=[],wa=-1;function Sa(e){return{current:e}}function ka(e){0>wa||(e.current=Na[wa],Na[wa]=null,wa--)}function Ca(e,t){wa++,Na[wa]=e.current,e.current=t}var Ea={},Ia=Sa(Ea),Pa=Sa(!1),La=Ea;function Oa(e,t){var n=e.type.contextTypes;if(!n)return Ea;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a,r={};for(a in n)r[a]=t[a];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ta(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){ka(Pa),ka(Ia)}function Aa(e,t,n){if(Ia.current!==Ea)throw Error(r(168));Ca(Ia,t),Ca(Pa,n)}function Ra(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var a in s=s.getChildContext())if(!(a in t))throw Error(r(108,H(e)||"Unknown",a));return _({},n,s)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,La=Ia.current,Ca(Ia,e),Ca(Pa,Pa.current),!0}function _a(e,t,n){var s=e.stateNode;if(!s)throw Error(r(169));n?(e=Ra(e,t,La),s.__reactInternalMemoizedMergedChildContext=e,ka(Pa),ka(Ia),Ca(Ia,e)):ka(Pa),Ca(Pa,n)}var Ma=null,Ua=!1,Fa=!1;function Ba(e){null===Ma?Ma=[e]:Ma.push(e)}function Va(){if(!Fa&&null!==Ma){Fa=!0;var e=0,t=yt;try{var n=Ma;for(yt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Ma=null,Ua=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),Ge(Ze,Va),a}finally{yt=t,Fa=!1}}return null}var Ha=[],qa=0,Ka=null,Ja=0,Ga=[],Wa=0,Xa=null,$a=1,Qa="";function Ya(e,t){Ha[qa++]=Ja,Ha[qa++]=Ka,Ka=e,Ja=t}function Za(e,t,n){Ga[Wa++]=$a,Ga[Wa++]=Qa,Ga[Wa++]=Xa,Xa=e;var s=$a;e=Qa;var a=32-lt(s)-1;s&=~(1<<a),n+=1;var r=32-lt(t)+a;if(30<r){var l=a-a%5;r=(s&(1<<l)-1).toString(32),s>>=l,a-=l,$a=1<<32-lt(t)+a|n<<a|s,Qa=r+e}else $a=1<<r|n<<a|s,Qa=e}function er(e){null!==e.return&&(Ya(e,1),Za(e,1,0))}function tr(e){for(;e===Ka;)Ka=Ha[--qa],Ha[qa]=null,Ja=Ha[--qa],Ha[qa]=null;for(;e===Xa;)Xa=Ga[--Wa],Ga[Wa]=null,Qa=Ga[--Wa],Ga[Wa]=null,$a=Ga[--Wa],Ga[Wa]=null}var nr=null,sr=null,ar=!1,rr=null;function lr(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,sr=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,sr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xa?{id:$a,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,sr=null,!0);default:return!1}}function ir(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(ar){var t=sr;if(t){var n=t;if(!or(e,t)){if(ir(e))throw Error(r(418));t=ca(n.nextSibling);var s=nr;t&&or(e,t)?lr(s,n):(e.flags=-4097&e.flags|2,ar=!1,nr=e)}}else{if(ir(e))throw Error(r(418));e.flags=-4097&e.flags|2,ar=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!ar)return dr(e),ar=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=sr)){if(ir(e))throw mr(),Error(r(418));for(;t;)lr(e,t),t=ca(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){sr=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}sr=null}}else sr=nr?ca(e.stateNode.nextSibling):null;return!0}function mr(){for(var e=sr;e;)e=ca(e.nextSibling)}function hr(){sr=nr=null,ar=!1}function gr(e){null===rr?rr=[e]:rr.push(e)}var pr=v.ReactCurrentBatchConfig;function xr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var s=n.stateNode}if(!s)throw Error(r(147,e));var a=s,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=a.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function fr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function br(e){return(0,e._init)(e._payload)}function yr(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function l(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,n,s){return null===t||6!==t.tag?((t=zc(n,e.mode,s)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,s){var r=n.type;return r===w?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===T&&br(r)===t.type)?((s=a(t,n.props)).ref=xr(e,t,n),s.return=e,s):((s=Dc(n.type,n.key,n.props,null,e.mode,s)).ref=xr(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=_c(n,e.mode,s)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,s,r){return null===t||7!==t.tag?((t=Ac(n,e.mode,s,r)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=xr(e,null,t),n.return=e,n;case N:return(t=_c(t,e.mode,n)).return=e,t;case T:return m(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ac(t,e.mode,n,null)).return=e,t;fr(e,t)}return null}function h(e,t,n,s){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:i(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===a?c(e,t,n,s):null;case N:return n.key===a?d(e,t,n,s):null;case T:return h(e,t,(a=n._init)(n._payload),s)}if(te(n)||R(n))return null!==a?null:u(e,t,n,s,null);fr(e,n)}return null}function g(e,t,n,s,a){if("string"===typeof s&&""!==s||"number"===typeof s)return i(t,e=e.get(n)||null,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return c(t,e=e.get(null===s.key?n:s.key)||null,s,a);case N:return d(t,e=e.get(null===s.key?n:s.key)||null,s,a);case T:return g(e,t,n,(0,s._init)(s._payload),a)}if(te(s)||R(s))return u(t,e=e.get(n)||null,s,a,null);fr(t,s)}return null}function p(a,r,o,i){for(var c=null,d=null,u=r,p=r=0,x=null;null!==u&&p<o.length;p++){u.index>p?(x=u,u=null):x=u.sibling;var f=h(a,u,o[p],i);if(null===f){null===u&&(u=x);break}e&&u&&null===f.alternate&&t(a,u),r=l(f,r,p),null===d?c=f:d.sibling=f,d=f,u=x}if(p===o.length)return n(a,u),ar&&Ya(a,p),c;if(null===u){for(;p<o.length;p++)null!==(u=m(a,o[p],i))&&(r=l(u,r,p),null===d?c=u:d.sibling=u,d=u);return ar&&Ya(a,p),c}for(u=s(a,u);p<o.length;p++)null!==(x=g(u,a,p,o[p],i))&&(e&&null!==x.alternate&&u.delete(null===x.key?p:x.key),r=l(x,r,p),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(a,e)}),ar&&Ya(a,p),c}function x(a,o,i,c){var d=R(i);if("function"!==typeof d)throw Error(r(150));if(null==(i=d.call(i)))throw Error(r(151));for(var u=d=null,p=o,x=o=0,f=null,b=i.next();null!==p&&!b.done;x++,b=i.next()){p.index>x?(f=p,p=null):f=p.sibling;var y=h(a,p,b.value,c);if(null===y){null===p&&(p=f);break}e&&p&&null===y.alternate&&t(a,p),o=l(y,o,x),null===u?d=y:u.sibling=y,u=y,p=f}if(b.done)return n(a,p),ar&&Ya(a,x),d;if(null===p){for(;!b.done;x++,b=i.next())null!==(b=m(a,b.value,c))&&(o=l(b,o,x),null===u?d=b:u.sibling=b,u=b);return ar&&Ya(a,x),d}for(p=s(a,p);!b.done;x++,b=i.next())null!==(b=g(p,a,x,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?x:b.key),o=l(b,o,x),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach(function(e){return t(a,e)}),ar&&Ya(a,x),d}return function e(s,r,l,i){if("object"===typeof l&&null!==l&&l.type===w&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case j:e:{for(var c=l.key,d=r;null!==d;){if(d.key===c){if((c=l.type)===w){if(7===d.tag){n(s,d.sibling),(r=a(d,l.props.children)).return=s,s=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&br(c)===d.type){n(s,d.sibling),(r=a(d,l.props)).ref=xr(s,d,l),r.return=s,s=r;break e}n(s,d);break}t(s,d),d=d.sibling}l.type===w?((r=Ac(l.props.children,s.mode,i,l.key)).return=s,s=r):((i=Dc(l.type,l.key,l.props,null,s.mode,i)).ref=xr(s,r,l),i.return=s,s=i)}return o(s);case N:e:{for(d=l.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===l.containerInfo&&r.stateNode.implementation===l.implementation){n(s,r.sibling),(r=a(r,l.children||[])).return=s,s=r;break e}n(s,r);break}t(s,r),r=r.sibling}(r=_c(l,s.mode,i)).return=s,s=r}return o(s);case T:return e(s,r,(d=l._init)(l._payload),i)}if(te(l))return p(s,r,l,i);if(R(l))return x(s,r,l,i);fr(s,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==r&&6===r.tag?(n(s,r.sibling),(r=a(r,l)).return=s,s=r):(n(s,r),(r=zc(l,s.mode,i)).return=s,s=r),o(s)):n(s,r)}}var vr=yr(!0),jr=yr(!1),Nr=Sa(null),wr=null,Sr=null,kr=null;function Cr(){kr=Sr=wr=null}function Er(e){var t=Nr.current;ka(Nr),e._currentValue=t}function Ir(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Pr(e,t){wr=e,kr=Sr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Lr(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===Sr){if(null===wr)throw Error(r(308));Sr=e,wr.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Or=null;function Tr(e){null===Or?Or=[e]:Or.push(e)}function Dr(e,t,n,s){var a=t.interleaved;return null===a?(n.next=n,Tr(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ar(e,s)}function Ar(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rr=!1;function zr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _r(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ur(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Ei)){var a=s.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ar(e,n)}return null===(a=s.interleaved)?(t.next=t,Tr(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ar(e,n)}function Fr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Br(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?a=r=l:r=r.next=l,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vr(e,t,n,s){var a=e.updateQueue;Rr=!1;var r=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var i=o,c=i.next;i.next=null,null===l?r=c:l.next=c,l=i;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=i))}if(null!==r){var u=a.baseState;for(l=0,d=c=i=null,o=r;;){var m=o.lane,h=o.eventTime;if((s&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(m=t,h=n,p.tag){case 1:if("function"===typeof(g=p.payload)){u=g.call(h,u,m);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(m="function"===typeof(g=p.payload)?g.call(h,u,m):g)||void 0===m)break e;u=_({},u,m);break e;case 2:Rr=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=a.effects)?a.effects=[o]:m.push(o))}else h={eventTime:h,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,i=u):d=d.next=h,l|=m;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}if(null===d&&(i=u),a.baseState=i,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{l|=a.lane,a=a.next}while(a!==t)}else null===r&&(a.shared.lanes=0);Ri|=l,e.lanes=l,e.memoizedState=u}}function Hr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(null!==a){if(s.callback=null,s=n,"function"!==typeof a)throw Error(r(191,a));a.call(s)}}}var qr={},Kr=Sa(qr),Jr=Sa(qr),Gr=Sa(qr);function Wr(e){if(e===qr)throw Error(r(174));return e}function Xr(e,t){switch(Ca(Gr,t),Ca(Jr,e),Ca(Kr,qr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Kr),Ca(Kr,t)}function $r(){ka(Kr),ka(Jr),ka(Gr)}function Qr(e){Wr(Gr.current);var t=Wr(Kr.current),n=ie(t,e.type);t!==n&&(Ca(Jr,e),Ca(Kr,n))}function Yr(e){Jr.current===e&&(ka(Kr),ka(Jr))}var Zr=Sa(0);function el(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tl=[];function nl(){for(var e=0;e<tl.length;e++)tl[e]._workInProgressVersionPrimary=null;tl.length=0}var sl=v.ReactCurrentDispatcher,al=v.ReactCurrentBatchConfig,rl=0,ll=null,ol=null,il=null,cl=!1,dl=!1,ul=0,ml=0;function hl(){throw Error(r(321))}function gl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function pl(e,t,n,s,a,l){if(rl=l,ll=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sl.current=null===e||null===e.memoizedState?Yl:Zl,e=n(s,a),dl){l=0;do{if(dl=!1,ul=0,25<=l)throw Error(r(301));l+=1,il=ol=null,t.updateQueue=null,sl.current=eo,e=n(s,a)}while(dl)}if(sl.current=Ql,t=null!==ol&&null!==ol.next,rl=0,il=ol=ll=null,cl=!1,t)throw Error(r(300));return e}function xl(){var e=0!==ul;return ul=0,e}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===il?ll.memoizedState=il=e:il=il.next=e,il}function bl(){if(null===ol){var e=ll.alternate;e=null!==e?e.memoizedState:null}else e=ol.next;var t=null===il?ll.memoizedState:il.next;if(null!==t)il=t,ol=e;else{if(null===e)throw Error(r(310));e={memoizedState:(ol=e).memoizedState,baseState:ol.baseState,baseQueue:ol.baseQueue,queue:ol.queue,next:null},null===il?ll.memoizedState=il=e:il=il.next=e}return il}function yl(e,t){return"function"===typeof t?t(e):t}function vl(e){var t=bl(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=ol,a=s.baseQueue,l=n.pending;if(null!==l){if(null!==a){var o=a.next;a.next=l.next,l.next=o}s.baseQueue=a=l,n.pending=null}if(null!==a){l=a.next,s=s.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((rl&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(i=c=m,o=s):c=c.next=m,ll.lanes|=u,Ri|=u}d=d.next}while(null!==d&&d!==l);null===c?o=s:c.next=i,os(s,t.memoizedState)||(yo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){a=e;do{l=a.lane,ll.lanes|=l,Ri|=l,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jl(e){var t=bl(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{l=e(l,o.action),o=o.next}while(o!==a);os(l,t.memoizedState)||(yo=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function Nl(){}function wl(e,t){var n=ll,s=bl(),a=t(),l=!os(s.memoizedState,a);if(l&&(s.memoizedState=a,yo=!0),s=s.queue,Rl(Cl.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||null!==il&&1&il.memoizedState.tag){if(n.flags|=2048,Ll(9,kl.bind(null,n,s,a,t),void 0,null),null===Ii)throw Error(r(349));0!==(30&rl)||Sl(n,t,a)}return a}function Sl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function kl(e,t,n,s){t.value=n,t.getSnapshot=s,El(t)&&Il(e)}function Cl(e,t,n){return n(function(){El(t)&&Il(e)})}function El(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Il(e){var t=Ar(e,1);null!==t&&tc(t,e,1,-1)}function Pl(e){var t=fl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:e},t.queue=e,e=e.dispatch=Gl.bind(null,ll,e),[t.memoizedState,e]}function Ll(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Ol(){return bl().memoizedState}function Tl(e,t,n,s){var a=fl();ll.flags|=e,a.memoizedState=Ll(1|t,n,void 0,void 0===s?null:s)}function Dl(e,t,n,s){var a=bl();s=void 0===s?null:s;var r=void 0;if(null!==ol){var l=ol.memoizedState;if(r=l.destroy,null!==s&&gl(s,l.deps))return void(a.memoizedState=Ll(t,n,r,s))}ll.flags|=e,a.memoizedState=Ll(1|t,n,r,s)}function Al(e,t){return Tl(8390656,8,e,t)}function Rl(e,t){return Dl(2048,8,e,t)}function zl(e,t){return Dl(4,2,e,t)}function _l(e,t){return Dl(4,4,e,t)}function Ml(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ul(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Dl(4,4,Ml.bind(null,t,e),n)}function Fl(){}function Bl(e,t){var n=bl();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&gl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Vl(e,t){var n=bl();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&gl(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Hl(e,t,n){return 0===(21&rl)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(os(n,t)||(n=pt(),ll.lanes|=n,Ri|=n,e.baseState=!0),t)}function ql(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var s=al.transition;al.transition={};try{e(!1),t()}finally{yt=n,al.transition=s}}function Kl(){return bl().memoizedState}function Jl(e,t,n){var s=ec(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Wl(e))Xl(t,n);else if(null!==(n=Dr(e,t,n,s))){tc(n,e,s,Zi()),$l(n,t,s)}}function Gl(e,t,n){var s=ec(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wl(e))Xl(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var l=t.lastRenderedState,o=r(l,n);if(a.hasEagerState=!0,a.eagerState=o,os(o,l)){var i=t.interleaved;return null===i?(a.next=a,Tr(t)):(a.next=i.next,i.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Dr(e,t,a,s))&&(tc(n,e,s,a=Zi()),$l(n,t,s))}}function Wl(e){var t=e.alternate;return e===ll||null!==t&&t===ll}function Xl(e,t){dl=cl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $l(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ql={readContext:Lr,useCallback:hl,useContext:hl,useEffect:hl,useImperativeHandle:hl,useInsertionEffect:hl,useLayoutEffect:hl,useMemo:hl,useReducer:hl,useRef:hl,useState:hl,useDebugValue:hl,useDeferredValue:hl,useTransition:hl,useMutableSource:hl,useSyncExternalStore:hl,useId:hl,unstable_isNewReconciler:!1},Yl={readContext:Lr,useCallback:function(e,t){return fl().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Al,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Tl(4194308,4,Ml.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tl(4,2,e,t)},useMemo:function(e,t){var n=fl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=fl();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Jl.bind(null,ll,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},fl().memoizedState=e},useState:Pl,useDebugValue:Fl,useDeferredValue:function(e){return fl().memoizedState=e},useTransition:function(){var e=Pl(!1),t=e[0];return e=ql.bind(null,e[1]),fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ll,a=fl();if(ar){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Ii)throw Error(r(349));0!==(30&rl)||Sl(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Al(Cl.bind(null,s,l,e),[e]),s.flags|=2048,Ll(9,kl.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=fl(),t=Ii.identifierPrefix;if(ar){var n=Qa;t=":"+t+"R"+(n=($a&~(1<<32-lt($a)-1)).toString(32)+n),0<(n=ul++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ml++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zl={readContext:Lr,useCallback:Bl,useContext:Lr,useEffect:Rl,useImperativeHandle:Ul,useInsertionEffect:zl,useLayoutEffect:_l,useMemo:Vl,useReducer:vl,useRef:Ol,useState:function(){return vl(yl)},useDebugValue:Fl,useDeferredValue:function(e){return Hl(bl(),ol.memoizedState,e)},useTransition:function(){return[vl(yl)[0],bl().memoizedState]},useMutableSource:Nl,useSyncExternalStore:wl,useId:Kl,unstable_isNewReconciler:!1},eo={readContext:Lr,useCallback:Bl,useContext:Lr,useEffect:Rl,useImperativeHandle:Ul,useInsertionEffect:zl,useLayoutEffect:_l,useMemo:Vl,useReducer:jl,useRef:Ol,useState:function(){return jl(yl)},useDebugValue:Fl,useDeferredValue:function(e){var t=bl();return null===ol?t.memoizedState=e:Hl(t,ol.memoizedState,e)},useTransition:function(){return[jl(yl)[0],bl().memoizedState]},useMutableSource:Nl,useSyncExternalStore:wl,useId:Kl,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=_({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:_({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Zi(),a=ec(e),r=Mr(s,a);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Ur(e,r,a))&&(tc(t,e,a,s),Fr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Zi(),a=ec(e),r=Mr(s,a);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Ur(e,r,a))&&(tc(t,e,a,s),Fr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zi(),s=ec(e),a=Mr(n,s);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ur(e,a,s))&&(tc(t,e,s,n),Fr(t,e,s))}};function ao(e,t,n,s,a,r,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,l):!t.prototype||!t.prototype.isPureReactComponent||(!is(n,s)||!is(a,r))}function ro(e,t,n){var s=!1,a=Ea,r=t.contextType;return"object"===typeof r&&null!==r?r=Lr(r):(a=Ta(t)?La:Ia.current,r=(s=null!==(s=t.contextTypes)&&void 0!==s)?Oa(e,a):Ea),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function lo(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},zr(e);var r=t.contextType;"object"===typeof r&&null!==r?a.context=Lr(r):(r=Ta(t)?La:Ia.current,a.context=Oa(e,r)),a.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&so.enqueueReplaceState(a,a.state,null),Vr(e,n,a,s),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function io(e,t){try{var n="",s=t;do{n+=B(s),s=s.return}while(s);var a=n}catch(r){a="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Mr(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hi||(Hi=!0,qi=s),uo(0,t)},n}function go(e,t,n){(n=Mr(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===Ki?Ki=new Set([this]):Ki.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new mo;var a=new Set;s.set(t,a)}else void 0===(a=s.get(t))&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fo(e,t,n,s,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mr(-1,1)).tag=2,Ur(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=v.ReactCurrentOwner,yo=!1;function vo(e,t,n,s){t.child=null===e?jr(t,null,n,s):vr(t,e.child,n,s)}function jo(e,t,n,s,a){n=n.render;var r=t.ref;return Pr(t,a),s=pl(e,t,n,s,r,a),n=xl(),null===e||yo?(ar&&n&&er(t),t.flags|=1,vo(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function No(e,t,n,s,a){if(null===e){var r=n.type;return"function"!==typeof r||Oc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,s,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,wo(e,t,r,s,a))}if(r=e.child,0===(e.lanes&a)){var l=r.memoizedProps;if((n=null!==(n=n.compare)?n:is)(l,s)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Tc(r,s)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,n,s,a){if(null!==e){var r=e.memoizedProps;if(is(r,s)&&e.ref===t.ref){if(yo=!1,t.pendingProps=s=r,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(yo=!0)}}return Co(e,t,n,s,a)}function So(e,t,n){var s=t.pendingProps,a=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Ti,Oi),Oi|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Ti,Oi),Oi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==r?r.baseLanes:n,Ca(Ti,Oi),Oi|=s}else null!==r?(s=r.baseLanes|n,t.memoizedState=null):s=n,Ca(Ti,Oi),Oi|=s;return vo(e,t,a,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,s,a){var r=Ta(n)?La:Ia.current;return r=Oa(t,r),Pr(t,a),n=pl(e,t,n,s,r,a),s=xl(),null===e||yo?(ar&&s&&er(t),t.flags|=1,vo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Eo(e,t,n,s,a){if(Ta(n)){var r=!0;za(t)}else r=!1;if(Pr(t,a),null===t.stateNode)Vo(e,t),ro(t,n,s),oo(t,n,s,a),s=!0;else if(null===e){var l=t.stateNode,o=t.memoizedProps;l.props=o;var i=l.context,c=n.contextType;"object"===typeof c&&null!==c?c=Lr(c):c=Oa(t,c=Ta(n)?La:Ia.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof l.getSnapshotBeforeUpdate;u||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==s||i!==c)&&lo(t,l,s,c),Rr=!1;var m=t.memoizedState;l.state=m,Vr(t,s,l,a),i=t.memoizedState,o!==s||m!==i||Pa.current||Rr?("function"===typeof d&&(no(t,n,d,s),i=t.memoizedState),(o=Rr||ao(t,n,o,s,m,i,c))?(u||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=i),l.props=s,l.state=i,l.context=c,s=o):("function"===typeof l.componentDidMount&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,_r(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),l.props=c,u=t.pendingProps,m=l.context,"object"===typeof(i=n.contextType)&&null!==i?i=Lr(i):i=Oa(t,i=Ta(n)?La:Ia.current);var h=n.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==u||m!==i)&&lo(t,l,s,i),Rr=!1,m=t.memoizedState,l.state=m,Vr(t,s,l,a);var g=t.memoizedState;o!==u||m!==g||Pa.current||Rr?("function"===typeof h&&(no(t,n,h,s),g=t.memoizedState),(c=Rr||ao(t,n,c,s,m,g,i)||!1)?(d||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(s,g,i),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(s,g,i)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),l.props=s,l.state=g,l.context=i,s=c):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Io(e,t,n,s,r,a)}function Io(e,t,n,s,a,r){ko(e,t);var l=0!==(128&t.flags);if(!s&&!l)return a&&_a(t,n,!1),Ho(e,t,r);s=t.stateNode,bo.current=t;var o=l&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&l?(t.child=vr(t,e.child,null,r),t.child=vr(t,null,o,r)):vo(e,t,o,r),t.memoizedState=s.state,a&&_a(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Xr(e,t.containerInfo)}function Lo(e,t,n,s,a){return hr(),gr(a),t.flags|=256,vo(e,t,n,s),t.child}var Oo,To,Do,Ao={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,n){var s,a=t.pendingProps,l=Zr.current,o=!1,i=0!==(128&t.flags);if((s=i)||(s=(null===e||null!==e.memoizedState)&&0!==(2&l)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),Ca(Zr,1&l),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=a.children,e=a.fallback,o?(a=t.mode,o=t.child,i={mode:"hidden",children:i},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=Rc(i,a,0,null),e=Ac(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=Ao,e):_o(t,i));if(null!==(l=e.memoizedState)&&null!==(s=l.dehydrated))return function(e,t,n,s,a,l,o){if(n)return 256&t.flags?(t.flags&=-257,Mo(e,t,o,s=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Rc({mode:"visible",children:s.children},a,0,null),(l=Ac(l,a,o,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,0!==(1&t.mode)&&vr(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Ao,l);if(0===(1&t.mode))return Mo(e,t,o,null);if("$!"===a.data){if(s=a.nextSibling&&a.nextSibling.dataset)var i=s.dgst;return s=i,Mo(e,t,o,s=co(l=Error(r(419)),s,void 0))}if(i=0!==(o&e.childLanes),yo||i){if(null!==(s=Ii)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(s.suspendedLanes|o))?0:a)&&a!==l.retryLane&&(l.retryLane=a,Ar(e,a),tc(s,e,a,-1))}return gc(),Mo(e,t,o,s=co(Error(r(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,sr=ca(a.nextSibling),nr=t,ar=!0,rr=null,null!==e&&(Ga[Wa++]=$a,Ga[Wa++]=Qa,Ga[Wa++]=Xa,$a=e.id,Qa=e.overflow,Xa=t),t=_o(t,s.children),t.flags|=4096,t)}(e,t,i,a,s,l,n);if(o){o=a.fallback,i=t.mode,s=(l=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&i)&&t.child!==l?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Tc(l,c)).subtreeFlags=14680064&l.subtreeFlags,null!==s?o=Tc(s,o):(o=Ac(o,i,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,i=null===(i=e.child.memoizedState)?Ro(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,a}return e=(o=e.child).sibling,a=Tc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function _o(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Mo(e,t,n,s){return null!==s&&gr(s),vr(t,e.child,null,n),(e=_o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ir(e.return,t,n)}function Fo(e,t,n,s,a){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=a)}function Bo(e,t,n){var s=t.pendingProps,a=s.revealOrder,r=s.tail;if(vo(e,t,s.children,n),0!==(2&(s=Zr.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ca(Zr,s),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===el(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fo(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===el(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fo(t,!0,n,null,r);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ri|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Tc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!ar)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=14680064&a.subtreeFlags,s|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Jo(e,t,n){var s=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ta(t.type)&&Da(),Ko(t),null;case 3:return s=t.stateNode,$r(),ka(Pa),ka(Ia),nl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(rc(rr),rr=null))),Ko(t),null;case 5:Yr(t);var a=Wr(Gr.current);if(n=t.type,null!==e&&null!=t.stateNode)To(e,t,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return Ko(t),null}if(e=Wr(Kr.current),ur(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[ma]=t,s[ha]=l,e=0!==(1&t.mode),n){case"dialog":Us("cancel",s),Us("close",s);break;case"iframe":case"object":case"embed":Us("load",s);break;case"video":case"audio":for(a=0;a<Rs.length;a++)Us(Rs[a],s);break;case"source":Us("error",s);break;case"img":case"image":case"link":Us("error",s),Us("load",s);break;case"details":Us("toggle",s);break;case"input":$(s,l),Us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Us("invalid",s);break;case"textarea":ae(s,l),Us("invalid",s)}for(var i in be(n,l),a=null,l)if(l.hasOwnProperty(i)){var c=l[i];"children"===i?"string"===typeof c?s.textContent!==c&&(!0!==l.suppressHydrationWarning&&Ys(s.textContent,c,e),a=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&Ys(s.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(i)&&null!=c&&"onScroll"===i&&Us("scroll",s)}switch(n){case"input":J(s),Z(s,l,!0);break;case"textarea":J(s),le(s);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(s.onclick=Zs)}s=a,t.updateQueue=s,null!==s&&(t.flags|=4)}else{i=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),"select"===n&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[ma]=t,e[ha]=s,Oo(e,t),t.stateNode=e;e:{switch(i=ye(n,s),n){case"dialog":Us("cancel",e),Us("close",e),a=s;break;case"iframe":case"object":case"embed":Us("load",e),a=s;break;case"video":case"audio":for(a=0;a<Rs.length;a++)Us(Rs[a],e);a=s;break;case"source":Us("error",e),a=s;break;case"img":case"image":case"link":Us("error",e),Us("load",e),a=s;break;case"details":Us("toggle",e),a=s;break;case"input":$(e,s),a=X(e,s),Us("invalid",e);break;case"option":default:a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=_({},s,{value:void 0}),Us("invalid",e);break;case"textarea":ae(e,s),a=se(e,s),Us("invalid",e)}for(l in be(n,a),c=a)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?xe(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===l?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?null!=d&&"onScroll"===l&&Us("scroll",e):null!=d&&y(e,l,d,i))}switch(n){case"input":J(e),Z(e,s,!1);break;case"textarea":J(e),le(e);break;case"option":null!=s.value&&e.setAttribute("value",""+q(s.value));break;case"select":e.multiple=!!s.multiple,null!=(l=s.value)?ne(e,!!s.multiple,l,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(0,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(r(166));if(n=Wr(Gr.current),Wr(Kr.current),ur(t)){if(s=t.stateNode,n=t.memoizedProps,s[ma]=t,(l=s.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ys(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ys(s.nodeValue,n,0!==(1&e.mode))}l&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[ma]=t,t.stateNode=s}return Ko(t),null;case 13:if(ka(Zr),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ar&&null!==sr&&0!==(1&t.mode)&&0===(128&t.flags))mr(),hr(),t.flags|=98560,l=!1;else if(l=ur(t),null!==s&&null!==s.dehydrated){if(null===e){if(!l)throw Error(r(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(r(317));l[ma]=t}else hr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),l=!1}else null!==rr&&(rc(rr),rr=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Di&&(Di=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return $r(),null===e&&Vs(t.stateNode.containerInfo),Ko(t),null;case 10:return Er(t.type._context),Ko(t),null;case 19:if(ka(Zr),null===(l=t.memoizedState))return Ko(t),null;if(s=0!==(128&t.flags),null===(i=l.rendering))if(s)qo(l,!1);else{if(0!==Di||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=el(e))){for(t.flags|=128,qo(l,!1),null!==(s=i.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(l=n).flags&=14680066,null===(i=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==l.tail&&Qe()>Bi&&(t.flags|=128,s=!0,qo(l,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=el(i))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(l,!0),null===l.tail&&"hidden"===l.tailMode&&!i.alternate&&!ar)return Ko(t),null}else 2*Qe()-l.renderingStartTime>Bi&&1073741824!==n&&(t.flags|=128,s=!0,qo(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=l.last)?n.sibling=i:t.child=i,l.last=i)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,n=Zr.current,Ca(Zr,s?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Oi)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Go(e,t){switch(tr(t),t.tag){case 1:return Ta(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $r(),ka(Pa),ka(Ia),nl(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yr(t),null;case 13:if(ka(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));hr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zr),null;case 4:return $r(),null;case 10:return Er(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Wr(Kr.current);var r,l=null;switch(n){case"input":a=X(e,a),s=X(e,s),l=[];break;case"select":a=_({},a,{value:void 0}),s=_({},s,{value:void 0}),l=[];break;case"textarea":a=se(e,a),s=se(e,s),l=[];break;default:"function"!==typeof a.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(d in be(n,s),n=null,a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var i=a[d];for(r in i)i.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in s){var c=s[d];if(i=null!=a?a[d]:void 0,s.hasOwnProperty(d)&&c!==i&&(null!=c||null!=i))if("style"===d)if(i){for(r in i)!i.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&i[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(l||(l=[]),l.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,i=i?i.__html:void 0,null!=c&&i!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Us("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,s){n!==s&&(t.flags|=4)};var Wo=!1,Xo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Yo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){wc(e,t,s)}else n.current=null}function Zo(e,t,n){try{n()}catch(s){wc(e,t,s)}}var ei=!1;function ti(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var a=s=s.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,void 0!==r&&Zo(t,n,r)}a=a.next}while(a!==s)}}function ni(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function si(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ai(e){var t=e.alternate;null!==t&&(e.alternate=null,ai(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[ha],delete t[pa],delete t[xa],delete t[fa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ri(e){return 5===e.tag||3===e.tag||4===e.tag}function li(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ri(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oi(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(oi(e,t,n),e=e.sibling;null!==e;)oi(e,t,n),e=e.sibling}function ii(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(ii(e,t,n),e=e.sibling;null!==e;)ii(e,t,n),e=e.sibling}var ci=null,di=!1;function ui(e,t,n){for(n=n.child;null!==n;)mi(e,t,n),n=n.sibling}function mi(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Xo||Yo(n,t);case 6:var s=ci,a=di;ci=null,ui(e,t,n),di=a,null!==(ci=s)&&(di?(e=ci,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ci.removeChild(n.stateNode));break;case 18:null!==ci&&(di?(e=ci,n=n.stateNode,8===e.nodeType?ia(e.parentNode,n):1===e.nodeType&&ia(e,n),Vt(e)):ia(ci,n.stateNode));break;case 4:s=ci,a=di,ci=n.stateNode.containerInfo,di=!0,ui(e,t,n),ci=s,di=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){a=s=s.next;do{var r=a,l=r.destroy;r=r.tag,void 0!==l&&(0!==(2&r)||0!==(4&r))&&Zo(n,t,l),a=a.next}while(a!==s)}ui(e,t,n);break;case 1:if(!Xo&&(Yo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){wc(n,t,o)}ui(e,t,n);break;case 21:ui(e,t,n);break;case 22:1&n.mode?(Xo=(s=Xo)||null!==n.memoizedState,ui(e,t,n),Xo=s):ui(e,t,n);break;default:ui(e,t,n)}}function hi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var s=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function gi(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 5:ci=i.stateNode,di=!1;break e;case 3:case 4:ci=i.stateNode.containerInfo,di=!0;break e}i=i.return}if(null===ci)throw Error(r(160));mi(l,o,a),ci=null,di=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){wc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pi(t,e),t=t.sibling}function pi(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gi(t,e),xi(e),4&s){try{ti(3,e,e.return),ni(3,e)}catch(x){wc(e,e.return,x)}try{ti(5,e,e.return)}catch(x){wc(e,e.return,x)}}break;case 1:gi(t,e),xi(e),512&s&&null!==n&&Yo(n,n.return);break;case 5:if(gi(t,e),xi(e),512&s&&null!==n&&Yo(n,n.return),32&e.flags){var a=e.stateNode;try{me(a,"")}catch(x){wc(e,e.return,x)}}if(4&s&&null!=(a=e.stateNode)){var l=e.memoizedProps,o=null!==n?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===i&&"radio"===l.type&&null!=l.name&&Q(a,l),ye(i,o);var d=ye(i,l);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?xe(a,m):"dangerouslySetInnerHTML"===u?ue(a,m):"children"===u?me(a,m):y(a,u,m,d)}switch(i){case"input":Y(a,l);break;case"textarea":re(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;null!=g?ne(a,!!l.multiple,g,!1):h!==!!l.multiple&&(null!=l.defaultValue?ne(a,!!l.multiple,l.defaultValue,!0):ne(a,!!l.multiple,l.multiple?[]:"",!1))}a[ha]=l}catch(x){wc(e,e.return,x)}}break;case 6:if(gi(t,e),xi(e),4&s){if(null===e.stateNode)throw Error(r(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(x){wc(e,e.return,x)}}break;case 3:if(gi(t,e),xi(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(x){wc(e,e.return,x)}break;case 4:default:gi(t,e),xi(e);break;case 13:gi(t,e),xi(e),8192&(a=e.child).flags&&(l=null!==a.memoizedState,a.stateNode.isHidden=l,!l||null!==a.alternate&&null!==a.alternate.memoizedState||(Fi=Qe())),4&s&&hi(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,gi(t,e),Xo=d):gi(t,e),xi(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(m=Qo=u;null!==Qo;){switch(g=(h=Qo).child,h.tag){case 0:case 11:case 14:case 15:ti(4,h,h.return);break;case 1:Yo(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){s=h,n=h.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){wc(s,n,x)}}break;case 5:Yo(h,h.return);break;case 22:if(null!==h.memoizedState){vi(m);continue}}null!==g?(g.return=h,Qo=g):vi(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{a=m.stateNode,d?"function"===typeof(l=a.style).setProperty?l.setProperty("display","none","important"):l.display="none":(i=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,i.style.display=pe("display",o))}catch(x){wc(e,e.return,x)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){wc(e,e.return,x)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gi(t,e),xi(e),4&s&&hi(e);case 21:}}function xi(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ri(n)){var s=n;break e}n=n.return}throw Error(r(160))}switch(s.tag){case 5:var a=s.stateNode;32&s.flags&&(me(a,""),s.flags&=-33),ii(e,li(e),a);break;case 3:case 4:var l=s.stateNode.containerInfo;oi(e,li(e),l);break;default:throw Error(r(161))}}catch(o){wc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function fi(e,t,n){Qo=e,bi(e,t,n)}function bi(e,t,n){for(var s=0!==(1&e.mode);null!==Qo;){var a=Qo,r=a.child;if(22===a.tag&&s){var l=null!==a.memoizedState||Wo;if(!l){var o=a.alternate,i=null!==o&&null!==o.memoizedState||Xo;o=Wo;var c=Xo;if(Wo=l,(Xo=i)&&!c)for(Qo=a;null!==Qo;)i=(l=Qo).child,22===l.tag&&null!==l.memoizedState?ji(a):null!==i?(i.return=l,Qo=i):ji(a);for(;null!==r;)Qo=r,bi(r,t,n),r=r.sibling;Qo=a,Wo=o,Xo=c}yi(e)}else 0!==(8772&a.subtreeFlags)&&null!==r?(r.return=a,Qo=r):yi(e)}}function yi(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||ni(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Xo)if(null===n)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Hr(t,l,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hr(t,o,n)}break;case 5:var i=t.stateNode;if(null===n&&4&t.flags){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Vt(m)}}}break;default:throw Error(r(163))}Xo||512&t.flags&&si(t)}catch(h){wc(t,t.return,h)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function vi(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function ji(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ni(4,t)}catch(i){wc(t,n,i)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var a=t.return;try{s.componentDidMount()}catch(i){wc(t,a,i)}}var r=t.return;try{si(t)}catch(i){wc(t,r,i)}break;case 5:var l=t.return;try{si(t)}catch(i){wc(t,l,i)}}}catch(i){wc(t,t.return,i)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Ni,wi=Math.ceil,Si=v.ReactCurrentDispatcher,ki=v.ReactCurrentOwner,Ci=v.ReactCurrentBatchConfig,Ei=0,Ii=null,Pi=null,Li=0,Oi=0,Ti=Sa(0),Di=0,Ai=null,Ri=0,zi=0,_i=0,Mi=null,Ui=null,Fi=0,Bi=1/0,Vi=null,Hi=!1,qi=null,Ki=null,Ji=!1,Gi=null,Wi=0,Xi=0,$i=null,Qi=-1,Yi=0;function Zi(){return 0!==(6&Ei)?Qe():-1!==Qi?Qi:Qi=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Ei)&&0!==Li?Li&-Li:null!==pr.transition?(0===Yi&&(Yi=pt()),Yi):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function tc(e,t,n,s){if(50<Xi)throw Xi=0,$i=null,Error(r(185));ft(e,n,s),0!==(2&Ei)&&e===Ii||(e===Ii&&(0===(2&Ei)&&(zi|=n),4===Di&&lc(e,Li)),nc(e,s),1===n&&0===Ei&&0===(1&t.mode)&&(Bi=Qe()+500,Ua&&Va()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var l=31-lt(r),o=1<<l,i=a[l];-1===i?0!==(o&n)&&0===(o&s)||(a[l]=ht(o,t)):i<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var s=mt(e,e===Ii?Li:0);if(0===s)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Ua=!0,Ba(e)}(oc.bind(null,e)):Ba(oc.bind(null,e)),la(function(){0===(6&Ei)&&Va()}),n=null;else{switch(vt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Qi=-1,Yi=0,0!==(6&Ei))throw Error(r(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=mt(e,e===Ii?Li:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=pc(e,s);else{t=s;var a=Ei;Ei|=2;var l=hc();for(Ii===e&&Li===t||(Vi=null,Bi=Qe()+500,uc(e,t));;)try{fc();break}catch(i){mc(e,i)}Cr(),Si.current=l,Ei=a,null!==Pi?t=0:(Ii=null,Li=0,t=Di)}if(0!==t){if(2===t&&(0!==(a=gt(e))&&(s=a,t=ac(e,a))),1===t)throw n=Ai,uc(e,0),lc(e,s),nc(e,Qe()),n;if(6===t)lc(e,s);else{if(a=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var a=n[s],r=a.getSnapshot;a=a.value;try{if(!os(r(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=pc(e,s))&&(0!==(l=gt(e))&&(s=l,t=ac(e,l))),1===t))throw n=Ai,uc(e,0),lc(e,s),nc(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(r(345));case 2:case 5:vc(e,Ui,Vi);break;case 3:if(lc(e,s),(130023424&s)===s&&10<(t=Fi+500-Qe())){if(0!==mt(e,0))break;if(((a=e.suspendedLanes)&s)!==s){Zi(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sa(vc.bind(null,e,Ui,Vi),t);break}vc(e,Ui,Vi);break;case 4:if(lc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-lt(s);l=1<<o,(o=t[o])>a&&(a=o),s&=~l}if(s=a,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*wi(s/1960))-s)){e.timeoutHandle=sa(vc.bind(null,e,Ui,Vi),s);break}vc(e,Ui,Vi);break;default:throw Error(r(329))}}}return nc(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Mi;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Ui,Ui=n,null!==t&&rc(t)),e}function rc(e){null===Ui?Ui=e:Ui.push.apply(Ui,e)}function lc(e,t){for(t&=~_i,t&=~zi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-lt(t),s=1<<n;e[n]=-1,t&=~s}}function oc(e){if(0!==(6&Ei))throw Error(r(327));jc();var t=mt(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var s=gt(e);0!==s&&(t=s,n=ac(e,s))}if(1===n)throw n=Ai,uc(e,0),lc(e,t),nc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Ui,Vi),nc(e,Qe()),null}function ic(e,t){var n=Ei;Ei|=1;try{return e(t)}finally{0===(Ei=n)&&(Bi=Qe()+500,Ua&&Va())}}function cc(e){null!==Gi&&0===Gi.tag&&0===(6&Ei)&&jc();var t=Ei;Ei|=1;var n=Ci.transition,s=yt;try{if(Ci.transition=null,yt=1,e)return e()}finally{yt=s,Ci.transition=n,0===(6&(Ei=t))&&Va()}}function dc(){Oi=Ti.current,ka(Ti)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Pi)for(n=Pi.return;null!==n;){var s=n;switch(tr(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Da();break;case 3:$r(),ka(Pa),ka(Ia),nl();break;case 5:Yr(s);break;case 4:$r();break;case 13:case 19:ka(Zr);break;case 10:Er(s.type._context);break;case 22:case 23:dc()}n=n.return}if(Ii=e,Pi=e=Tc(e.current,null),Li=Oi=t,Di=0,Ai=null,_i=zi=Ri=0,Ui=Mi=null,null!==Or){for(t=0;t<Or.length;t++)if(null!==(s=(n=Or[t]).interleaved)){n.interleaved=null;var a=s.next,r=n.pending;if(null!==r){var l=r.next;r.next=a,s.next=l}n.pending=s}Or=null}return e}function mc(e,t){for(;;){var n=Pi;try{if(Cr(),sl.current=Ql,cl){for(var s=ll.memoizedState;null!==s;){var a=s.queue;null!==a&&(a.pending=null),s=s.next}cl=!1}if(rl=0,il=ol=ll=null,dl=!1,ul=0,ki.current=null,null===n||null===n.return){Di=1,Ai=t,Pi=null;break}e:{var l=e,o=n.return,i=n,c=t;if(t=Li,i.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=i,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=xo(o);if(null!==g){g.flags&=-257,fo(g,o,i,0,t),1&g.mode&&po(l,d,t),c=d;var p=(t=g).updateQueue;if(null===p){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}if(0===(1&t)){po(l,d,t),gc();break e}c=Error(r(426))}else if(ar&&1&i.mode){var f=xo(o);if(null!==f){0===(65536&f.flags)&&(f.flags|=256),fo(f,o,i,0,t),gr(io(c,i));break e}}l=c=io(c,i),4!==Di&&(Di=2),null===Mi?Mi=[l]:Mi.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,Br(l,ho(0,c,t));break e;case 1:i=c;var b=l.type,y=l.stateNode;if(0===(128&l.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Ki||!Ki.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,Br(l,go(l,i,t));break e}}l=l.return}while(null!==l)}yc(n)}catch(v){t=v,Pi===n&&null!==n&&(Pi=n=n.return);continue}break}}function hc(){var e=Si.current;return Si.current=Ql,null===e?Ql:e}function gc(){0!==Di&&3!==Di&&2!==Di||(Di=4),null===Ii||0===(268435455&Ri)&&0===(268435455&zi)||lc(Ii,Li)}function pc(e,t){var n=Ei;Ei|=2;var s=hc();for(Ii===e&&Li===t||(Vi=null,uc(e,t));;)try{xc();break}catch(a){mc(e,a)}if(Cr(),Ei=n,Si.current=s,null!==Pi)throw Error(r(261));return Ii=null,Li=0,Di}function xc(){for(;null!==Pi;)bc(Pi)}function fc(){for(;null!==Pi&&!Xe();)bc(Pi)}function bc(e){var t=Ni(e.alternate,e,Oi);e.memoizedProps=e.pendingProps,null===t?yc(e):Pi=t,ki.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Oi)))return void(Pi=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Pi=n);if(null===e)return Di=6,void(Pi=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pi=t);Pi=t=e}while(null!==t);0===Di&&(Di=5)}function vc(e,t,n){var s=yt,a=Ci.transition;try{Ci.transition=null,yt=1,function(e,t,n,s){do{jc()}while(null!==Gi);if(0!==(6&Ei))throw Error(r(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-lt(n),r=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~r}}(e,l),e===Ii&&(Pi=Ii=null,Li=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ji||(Ji=!0,Ic(tt,function(){return jc(),null})),l=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||l){l=Ci.transition,Ci.transition=null;var o=yt;yt=1;var i=Ei;Ei|=4,ki.current=null,function(e,t){if(ea=qt,hs(e=ms())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch(j){n=null;break e}var o=0,i=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var g;m!==n||0!==a&&3!==m.nodeType||(i=o+a),m!==l||0!==s&&3!==m.nodeType||(c=o+s),3===m.nodeType&&(o+=m.nodeValue.length),null!==(g=m.firstChild);)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++d===a&&(i=o),h===l&&++u===s&&(c=o),null!==(g=m.nextSibling))break;h=(m=h).parentNode}m=g}n=-1===i||-1===c?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},qt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var x=p.memoizedProps,f=p.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),f);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(r(163))}}catch(j){wc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}p=ei,ei=!1}(e,n),pi(n,e),gs(ta),qt=!!ea,ta=ea=null,e.current=n,fi(n,e,a),$e(),Ei=i,yt=o,Ci.transition=l}else e.current=n;if(Ji&&(Ji=!1,Gi=e,Wi=a),l=e.pendingLanes,0===l&&(Ki=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Hi)throw Hi=!1,e=qi,qi=null,e;0!==(1&Wi)&&0!==e.tag&&jc(),l=e.pendingLanes,0!==(1&l)?e===$i?Xi++:(Xi=0,$i=e):Xi=0,Va()}(e,t,n,s)}finally{Ci.transition=a,yt=s}return null}function jc(){if(null!==Gi){var e=vt(Wi),t=Ci.transition,n=yt;try{if(Ci.transition=null,yt=16>e?16:e,null===Gi)var s=!1;else{if(e=Gi,Gi=null,Wi=0,0!==(6&Ei))throw Error(r(331));var a=Ei;for(Ei|=4,Qo=e.current;null!==Qo;){var l=Qo,o=l.child;if(0!==(16&Qo.flags)){var i=l.deletions;if(null!==i){for(var c=0;c<i.length;c++){var d=i[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:ti(8,u,l)}var m=u.child;if(null!==m)m.return=u,Qo=m;else for(;null!==Qo;){var h=(u=Qo).sibling,g=u.return;if(ai(u),u===d){Qo=null;break}if(null!==h){h.return=g,Qo=h;break}Qo=g}}}var p=l.alternate;if(null!==p){var x=p.child;if(null!==x){p.child=null;do{var f=x.sibling;x.sibling=null,x=f}while(null!==x)}}Qo=l}}if(0!==(2064&l.subtreeFlags)&&null!==o)o.return=l,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(l=Qo).flags))switch(l.tag){case 0:case 11:case 15:ti(9,l,l.return)}var b=l.sibling;if(null!==b){b.return=l.return,Qo=b;break e}Qo=l.return}}var y=e.current;for(Qo=y;null!==Qo;){var v=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Qo=v;else e:for(o=y;null!==Qo;){if(0!==(2048&(i=Qo).flags))try{switch(i.tag){case 0:case 11:case 15:ni(9,i)}}catch(N){wc(i,i.return,N)}if(i===o){Qo=null;break e}var j=i.sibling;if(null!==j){j.return=i.return,Qo=j;break e}Qo=i.return}}if(Ei=a,Va(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(at,e)}catch(N){}s=!0}return s}finally{yt=n,Ci.transition=t}}return!1}function Nc(e,t,n){e=Ur(e,t=ho(0,t=io(n,t),1),1),t=Zi(),null!==e&&(ft(e,1,t),nc(e,t))}function wc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Ki||!Ki.has(s))){t=Ur(t,e=go(t,e=io(n,e),1),1),e=Zi(),null!==t&&(ft(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=Zi(),e.pingedLanes|=e.suspendedLanes&n,Ii===e&&(Li&n)===n&&(4===Di||3===Di&&(130023424&Li)===Li&&500>Qe()-Fi?uc(e,0):_i|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=Zi();null!==(e=Ar(e,t))&&(ft(e,t,n),nc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(r(314))}null!==s&&s.delete(t),kc(e,n)}function Ic(e,t){return Ge(e,t)}function Pc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,s){return new Pc(e,t,n,s)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,s,a,l){var o=2;if(s=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Ac(n.children,a,l,t);case S:o=8,a|=8;break;case k:return(e=Lc(12,n,t,2|a)).elementType=k,e.lanes=l,e;case P:return(e=Lc(13,n,t,a)).elementType=P,e.lanes=l,e;case L:return(e=Lc(19,n,t,a)).elementType=L,e.lanes=l,e;case D:return Rc(n,a,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case I:o=11;break e;case O:o=14;break e;case T:o=16,s=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Lc(o,n,t,a)).elementType=e,t.type=s,t.lanes=l,t}function Ac(e,t,n,s){return(e=Lc(7,e,s,t)).lanes=n,e}function Rc(e,t,n,s){return(e=Lc(22,e,s,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function _c(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,s,a,r,l,o,i){return e=new Mc(e,t,n,o,i),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Lc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zr(r),e}function Fc(e){if(!e)return Ea;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ta(n))return Ra(e,n,t)}return t}function Bc(e,t,n,s,a,r,l,o,i){return(e=Uc(n,s,!0,e,0,r,0,o,i)).context=Fc(null),n=e.current,(r=Mr(s=Zi(),a=ec(n))).callback=void 0!==t&&null!==t?t:null,Ur(n,r,a),e.current.lanes=a,ft(e,a,s),nc(e,s),e}function Vc(e,t,n,s){var a=t.current,r=Zi(),l=ec(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mr(r,l)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ur(a,t,l))&&(tc(e,a,l,r),Fr(e,a,l)),l}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Ni=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),hr();break;case 5:Qr(t);break;case 1:Ta(t.type)&&za(t);break;case 4:Xr(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Ca(Nr,s._currentValue),s._currentValue=a;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Ca(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(Ca(Zr,1&Zr.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ca(Zr,1&Zr.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Bo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(Zr,Zr.current),s)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ar&&0!==(1048576&t.flags)&&Za(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Vo(e,t),e=t.pendingProps;var a=Oa(t,Ia.current);Pr(t,n),a=pl(null,t,s,e,a,n);var l=xl();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(s)?(l=!0,za(t)):l=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,zr(t),a.updater=so,t.stateNode=a,a._reactInternals=t,oo(t,s,e,n),t=Io(null,t,s,!0,l,n)):(t.tag=0,ar&&l&&er(t),vo(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,s=(a=s._init)(s._payload),t.type=s,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===O)return 14}return 2}(s),e=to(s,e),a){case 0:t=Co(null,t,s,e,n);break e;case 1:t=Eo(null,t,s,e,n);break e;case 11:t=jo(null,t,s,e,n);break e;case 14:t=No(null,t,s,to(s.type,e),n);break e}throw Error(r(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,Co(e,t,s,a=t.elementType===s?a:to(s,a),n);case 1:return s=t.type,a=t.pendingProps,Eo(e,t,s,a=t.elementType===s?a:to(s,a),n);case 3:e:{if(Po(t),null===e)throw Error(r(387));s=t.pendingProps,a=(l=t.memoizedState).element,_r(e,t),Vr(t,s,null,n);var o=t.memoizedState;if(s=o.element,l.isDehydrated){if(l={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Lo(e,t,s,n,a=io(Error(r(423)),t));break e}if(s!==a){t=Lo(e,t,s,n,a=io(Error(r(424)),t));break e}for(sr=ca(t.stateNode.containerInfo.firstChild),nr=t,ar=!0,rr=null,n=jr(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hr(),s===a){t=Ho(e,t,n);break e}vo(e,t,s,n)}t=t.child}return t;case 5:return Qr(t),null===e&&cr(t),s=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,o=a.children,na(s,a)?o=null:null!==l&&na(s,l)&&(t.flags|=32),ko(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return zo(e,t,n);case 4:return Xr(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=vr(t,null,s,n):vo(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,jo(e,t,s,a=t.elementType===s?a:to(s,a),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,Ca(Nr,s._currentValue),s._currentValue=o,null!==l)if(os(l.value,o)){if(l.children===a.children&&!Pa.current){t=Ho(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var i=l.dependencies;if(null!==i){o=l.child;for(var c=i.firstContext;null!==c;){if(c.context===s){if(1===l.tag){(c=Mr(-1,n&-n)).tag=2;var d=l.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),Ir(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(10===l.tag)o=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(o=l.return))throw Error(r(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ir(o,n,t),o=l.sibling}else o=l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}vo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Pr(t,n),s=s(a=Lr(a)),t.flags|=1,vo(e,t,s,n),t.child;case 14:return a=to(s=t.type,t.pendingProps),No(e,t,s,a=to(s.type,a),n);case 15:return wo(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:to(s,a),Vo(e,t),t.tag=1,Ta(s)?(e=!0,za(t)):e=!1,Pr(t,n),ro(t,s,a),oo(t,s,a,n),Io(null,t,s,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(r(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Wc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Yc(e,t,n,s,a){var r=n._reactRootContainer;if(r){var l=r;if("function"===typeof a){var o=a;a=function(){var e=Hc(l);o.call(e)}}Vc(t,l,e,a)}else l=function(e,t,n,s,a){if(a){if("function"===typeof s){var r=s;s=function(){var e=Hc(l);r.call(e)}}var l=Bc(t,s,e,0,null,!1,0,"",Qc);return e._reactRootContainer=l,e[ga]=l.current,Vs(8===e.nodeType?e.parentNode:e),cc(),l}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof s){var o=s;s=function(){var e=Hc(i);o.call(e)}}var i=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=i,e[ga]=i.current,Vs(8===e.nodeType?e.parentNode:e),cc(function(){Vc(t,i,n,s)}),i}(n,t,e,a,s);return Hc(l)}Wc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Vc(e,t,null,null)},Wc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Vc(null,e,null,null)}),t[ga]=null}},Wc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&_t(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),nc(t,Qe()),0===(6&Ei)&&(Bi=Qe()+500,Va()))}break;case 13:cc(function(){var t=Ar(e,1);if(null!==t){var n=Zi();tc(t,e,1,n)}}),Kc(e,1)}},Nt=function(e){if(13===e.tag){var t=Ar(e,134217728);if(null!==t)tc(t,e,134217728,Zi());Kc(e,134217728)}},wt=function(e){if(13===e.tag){var t=ec(e),n=Ar(e,t);if(null!==n)tc(n,e,t,Zi());Kc(e,t)}},St=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Ne=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=ja(s);if(!a)throw Error(r(90));G(s),Y(s,a)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ic,Pe=cc;var Zc={usingClientEntryPoint:!1,Events:[ya,va,ja,Ce,Ee,ic]},ed={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(td),rt=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(r(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(r(299));var n=!1,s="",a=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,s,a),e[ga]=t.current,Vs(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(r(200));return Yc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(r(405));var s=null!=n&&n.hydratedSources||null,a=!1,l="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,a,0,l,o),e[ga]=t.current,Vs(e),s)for(e=0;e<s.length;e++)a=(a=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Wc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(r(200));return Yc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(r(40));return!!e._reactRootContainer&&(cc(function(){Yc(null,null,e,!1,function(){e._reactRootContainer=null,e[ga]=null})}),!0)},t.unstable_batchedUpdates=ic,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!$c(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Yc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,a){if(1&a&&(s=this(s)),8&a)return s;if("object"===typeof s&&s){if(4&a&&s.__esModule)return s;if(16&a&&"function"===typeof s.then)return s}var r=Object.create(null);n.r(r);var l={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>l[e]=()=>s[e]);return l.default=()=>s,n.d(r,l),r}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};n.r(s),n.d(s,{hasBrowserEnv:()=>xn,hasStandardBrowserEnv:()=>bn,hasStandardBrowserWebWorkerEnv:()=>yn,navigator:()=>fn,origin:()=>vn});var a,r=n(43),l=n.t(r,2),o=n(391),i=n(950),c=n.t(i,2);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const u="popstate";function m(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,s){return void 0===n&&(n=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function x(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function b(e,t,n,s){void 0===s&&(s={});let{window:r=document.defaultView,v5Compat:l=!1}=s,o=r.history,i=a.Pop,c=null,h=f();function f(){return(o.state||{idx:null}).idx}function b(){i=a.Pop;let e=f(),t=null==e?null:e-h;h=e,c&&c({action:i,location:v.location,delta:t})}function y(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:x(e);return n=n.replace(/ $/,"%20"),m(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,o.replaceState(d({},o.state,{idx:h}),""));let v={get action(){return i},get location(){return e(r,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(u,b),c=e,()=>{r.removeEventListener(u,b),c=null}},createHref:e=>t(r,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i=a.Push;let s=p(v.location,e,t);n&&n(s,e),h=f()+1;let d=g(s,h),u=v.createHref(s);try{o.pushState(d,"",u)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;r.location.assign(u)}l&&c&&c({action:i,location:v.location,delta:1})},replace:function(e,t){i=a.Replace;let s=p(v.location,e,t);n&&n(s,e),h=f();let r=g(s,h),d=v.createHref(s);o.replaceState(r,"",d),l&&c&&c({action:i,location:v.location,delta:0})},go:e=>o.go(e)};return v}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),j(e,t,n,!1)}function j(e,t,n,s){let a=R(("string"===typeof t?f(t):t).pathname||"/",n);if(null==a)return null;let r=N(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let l=null;for(let o=0;null==l&&o<r.length;++o){let e=A(a);l=T(r[o],e,s)}return l}function N(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let a=(e,a,r)=>{let l={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};l.relativePath.startsWith("/")&&(m(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(s.length));let o=H([s,l.relativePath]),i=n.concat(l);e.children&&e.children.length>0&&(m(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),N(e.children,t,i,o)),(null!=e.path||e.index)&&t.push({path:o,score:O(o,e.index),routesMeta:i})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of w(e.path))a(e,t,s);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===s.length)return a?[r,""]:[r];let l=w(s.join("/")),o=[];return o.push(...l.map(e=>""===e?r:[r,e].join("/"))),a&&o.push(...l),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const S=/^:[\w-]+$/,k=3,C=2,E=1,I=10,P=-2,L=e=>"*"===e;function O(e,t){let n=e.split("/"),s=n.length;return n.some(L)&&(s+=P),t&&(s+=C),n.filter(e=>!L(e)).reduce((e,t)=>e+(S.test(t)?k:""===t?E:I),s)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,a={},r="/",l=[];for(let o=0;o<s.length;++o){let e=s[o],i=o===s.length-1,c="/"===r?t:t.slice(r.length)||"/",d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:i},c),u=e.route;if(!d&&i&&n&&!s[s.length-1].route.index&&(d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),l.push({params:a,pathname:H([r,d.pathname]),pathnameBase:q(H([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=H([r,d.pathnameBase]))}return l}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let r=new RegExp(a,t?void 0:"i");return[r,s]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],l=r.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((e,t,n)=>{let{paramName:s,isOptional:a}=t;if("*"===s){let e=o[n]||"";l=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[n];return e[s]=a&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:l,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}const z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _(e,t){void 0===t&&(t="/");let n,{pathname:s,search:a="",hash:r=""}="string"===typeof e?f(e):e;if(s)if(l=s,z.test(l))n=s;else{if(s.includes("//")){let e=s;s=s.replace(/\/\/+/g,"/"),h(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+s)}n=s.startsWith("/")?M(s.substring(1),"/"):M(s,t)}else n=t;var l;return{pathname:n,search:K(a),hash:J(r)}}function M(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function U(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e,t){let n=F(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function V(e,t,n,s){let a;void 0===s&&(s=!1),"string"===typeof e?a=f(e):(a=d({},e),m(!a.pathname||!a.pathname.includes("?"),U("?","pathname","search",a)),m(!a.pathname||!a.pathname.includes("#"),U("#","pathname","hash",a)),m(!a.search||!a.search.includes("#"),U("#","search","hash",a)));let r,l=""===e||""===a.pathname,o=l?"/":a.pathname;if(null==o)r=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let i=_(a,r),c=o&&"/"!==o&&o.endsWith("/"),u=(l||"."===o)&&n.endsWith("/");return i.pathname.endsWith("/")||!c&&!u||(i.pathname+="/"),i}const H=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],X=(new Set(W),["get",...W]);new Set(X),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$.apply(this,arguments)}const Q=r.createContext(null);const Y=r.createContext(null);const Z=r.createContext(null);const ee=r.createContext(null);const te=r.createContext({outlet:null,matches:[],isDataRoute:!1});const ne=r.createContext(null);function se(){return null!=r.useContext(ee)}function ae(){return se()||m(!1),r.useContext(ee).location}function re(e){r.useContext(Z).static||r.useLayoutEffect(e)}function le(){let{isDataRoute:e}=r.useContext(te);return e?function(){let{router:e}=fe(pe.UseNavigateStable),t=ye(xe.UseNavigateStable),n=r.useRef(!1);return re(()=>{n.current=!0}),r.useCallback(function(s,a){void 0===a&&(a={}),n.current&&("number"===typeof s?e.navigate(s):e.navigate(s,$({fromRouteId:t},a)))},[e,t])}():function(){se()||m(!1);let e=r.useContext(Q),{basename:t,future:n,navigator:s}=r.useContext(Z),{matches:a}=r.useContext(te),{pathname:l}=ae(),o=JSON.stringify(B(a,n.v7_relativeSplatPath)),i=r.useRef(!1);return re(()=>{i.current=!0}),r.useCallback(function(n,a){if(void 0===a&&(a={}),!i.current)return;if("number"===typeof n)return void s.go(n);let r=V(n,JSON.parse(o),l,"path"===a.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:H([t,r.pathname])),(a.replace?s.replace:s.push)(r,a.state,a)},[t,s,o,l,e])}()}function oe(){let{matches:e}=r.useContext(te),t=e[e.length-1];return t?t.params:{}}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:s}=r.useContext(Z),{matches:a}=r.useContext(te),{pathname:l}=ae(),o=JSON.stringify(B(a,s.v7_relativeSplatPath));return r.useMemo(()=>V(e,JSON.parse(o),l,"path"===n),[e,o,l,n])}function ce(e,t,n,s){se()||m(!1);let{navigator:l}=r.useContext(Z),{matches:o}=r.useContext(te),i=o[o.length-1],c=i?i.params:{},d=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let u,h=ae();if(t){var g;let e="string"===typeof t?f(t):t;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||m(!1),u=e}else u=h;let p=u.pathname||"/",x=p;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:x});let y=ge(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([d,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:H([d,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&y?r.createElement(ee.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:a.Pop}},y):y}function de(){let e=function(){var e;let t=r.useContext(ne),n=be(xe.UseRouteError),s=ye(xe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const ue=r.createElement(de,null);class me extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(te.Provider,{value:this.props.routeContext},r.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:n,children:s}=e,a=r.useContext(Q);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(te.Provider,{value:t},s)}function ge(e,t,n,s){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var l;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(l=s)&&l.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,i=null==(a=n)?void 0:a.errors;if(null!=i){let e=o.findIndex(e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id]));e>=0||m(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:s}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||a){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,a)=>{let l,u=!1,m=null,h=null;var g;n&&(l=i&&s.route.id?i[s.route.id]:void 0,m=s.route.errorElement||ue,c&&(d<0&&0===a?(g="route-fallback",!1||ve[g]||(ve[g]=!0),u=!0,h=null):d===a&&(u=!0,h=s.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,a+1)),x=()=>{let t;return t=l?m:u?h:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(he,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?r.createElement(me,{location:n.location,revalidation:n.revalidation,component:m,error:l,children:x(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):x()},null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),xe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(xe||{});function fe(e){let t=r.useContext(Q);return t||m(!1),t}function be(e){let t=r.useContext(Y);return t||m(!1),t}function ye(e){let t=function(){let e=r.useContext(te);return e||m(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||m(!1),n.route.id}const ve={};function je(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}l.startTransition;function Ne(e){let{to:t,replace:n,state:s,relative:a}=e;se()||m(!1);let{future:l,static:o}=r.useContext(Z),{matches:i}=r.useContext(te),{pathname:c}=ae(),d=le(),u=V(t,B(i,l.v7_relativeSplatPath),c,"path"===a),h=JSON.stringify(u);return r.useEffect(()=>d(JSON.parse(h),{replace:n,state:s,relative:a}),[d,h,a,n,s]),null}function we(e){m(!1)}function Se(e){let{basename:t="/",children:n=null,location:s,navigationType:l=a.Pop,navigator:o,static:i=!1,future:c}=e;se()&&m(!1);let d=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:d,navigator:o,static:i,future:$({v7_relativeSplatPath:!1},c)}),[d,c,o,i]);"string"===typeof s&&(s=f(s));let{pathname:h="/",search:g="",hash:p="",state:x=null,key:b="default"}=s,y=r.useMemo(()=>{let e=R(h,d);return null==e?null:{location:{pathname:e,search:g,hash:p,state:x,key:b},navigationType:l}},[d,h,g,p,x,b,l]);return null==y?null:r.createElement(Z.Provider,{value:u},r.createElement(ee.Provider,{children:n,value:y}))}function ke(e){let{children:t,location:n}=e;return ce(Ce(t),n)}new Promise(()=>{});r.Component;function Ce(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let a=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,Ce(e.props.children,a));e.type!==we&&m(!1),e.props.index&&e.props.children&&m(!1);let l={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=Ce(e.props.children,a)),n.push(l)}),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ee.apply(this,arguments)}function Ie(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Pe(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(e=>[n,e]):[[n,s]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Le=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Fr){}new Map;const Oe=l.startTransition;c.flushSync,l.useId;function Te(e){let{basename:t,children:n,future:s,window:a}=e,l=r.useRef();var o;null==l.current&&(l.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),b(function(e,t){let{pathname:n,search:s,hash:a}=e.location;return p("",{pathname:n,search:s,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:x(t)},null,o)));let i=l.current,[c,d]=r.useState({action:i.action,location:i.location}),{v7_startTransition:u}=s||{},m=r.useCallback(e=>{u&&Oe?Oe(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>i.listen(m),[i,m]),r.useEffect(()=>je(s),[s]),r.createElement(Se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:i,future:s})}const De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=r.forwardRef(function(e,t){let n,{onClick:s,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,g=Ie(e,Le),{basename:p}=r.useContext(Z),f=!1;if("string"===typeof d&&Ae.test(d)&&(n=d,De))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=R(t.pathname,p);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:f=!0}catch(Fr){}let b=function(e,t){let{relative:n}=void 0===t?{}:t;se()||m(!1);let{basename:s,navigator:a}=r.useContext(Z),{hash:l,pathname:o,search:i}=ie(e,{relative:n}),c=o;return"/"!==s&&(c="/"===o?s:H([s,o])),a.createHref({pathname:c,search:i,hash:l})}(d,{relative:a}),y=function(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:o,viewTransition:i}=void 0===t?{}:t,c=le(),d=ae(),u=ie(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==s?s:x(d)===x(u);c(e,{replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,u,s,a,n,e,l,o,i])}(d,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:h});return r.createElement("a",Ee({},g,{href:n||b,onClick:f||l?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:t,target:c}))});var ze,_e;function Me(e){let t=r.useRef(Pe(e)),n=r.useRef(!1),s=ae(),a=r.useMemo(()=>function(e,t){let n=Pe(e);return t&&t.forEach((e,s)=>{n.has(s)||t.getAll(s).forEach(e=>{n.append(s,e)})}),n}(s.search,n.current?null:t.current),[s.search]),l=le(),o=r.useCallback((e,t)=>{const s=Pe("function"===typeof e?e(a):e);n.current=!0,l("?"+s,t)},[l,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ze||(ze={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(_e||(_e={}));function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Fe(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Ue(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}function Be(e,t,n){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach(function(t){Be(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ke=["color","size","strokeWidth","absoluteStrokeWidth","children"],Je=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:a="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:c}=n,d=function(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,Ke);return(0,r.createElement)("svg",He(He({ref:s},qe),{},{width:l,height:l,stroke:a,strokeWidth:i?24*Number(o)/Number(l):o,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var u});return n.displayName="".concat(e),n},Ge=Je("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),We=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Xe=Je("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$e=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Qe=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ye=Je("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ze=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),et=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var tt=n(579);const nt=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(null),a=le();(0,r.useEffect)(()=>{const e=localStorage.getItem("user");e&&s(JSON.parse(e))},[]);const l=()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),s(null),a("/"),t(!1)},o=(()=>{const e=[{icon:Ge,label:"Home",path:"/"},{icon:We,label:"Search",path:"/public/search"},{icon:Xe,label:"Help",path:"#help"}];return n&&e.splice(1,0,{icon:$e,label:"My Dashboard",path:"/student"}),e})();return(0,tt.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-3",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("button",{onClick:()=>{a("/")},className:"flex items-center gap-3 hover:opacity-80 transition cursor-pointer group",children:[(0,tt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow",children:(0,tt.jsx)("span",{className:"text-white text-xl font-bold",children:"\ud83d\udcda"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"SMD System"}),(0,tt.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Syllabus Management"})]})]}),(0,tt.jsx)("nav",{className:"hidden md:flex items-center gap-2",children:o.map((e,t)=>e.path.startsWith("#")?(0,tt.jsxs)("a",{href:e.path,className:"flex items-center gap-2 px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[(0,tt.jsx)(e.icon,{size:18}),(0,tt.jsx)("span",{className:"text-sm font-medium",children:e.label})]},t):(0,tt.jsxs)(Re,{to:e.path,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 ".concat("My Dashboard"===e.label?"text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-md hover:shadow-lg font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"),children:[(0,tt.jsx)(e.icon,{size:18}),(0,tt.jsx)("span",{className:"text-sm font-medium",children:e.label})]},t))}),(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,tt.jsx)(tt.Fragment,{children:(0,tt.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[(0,tt.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:(n.fullName||n.email||"U")[0].toUpperCase()}),(0,tt.jsx)("span",{className:"text-sm font-semibold text-gray-800 max-w-[150px] truncate",children:n.fullName||n.email})]}),(0,tt.jsxs)("button",{onClick:l,className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-red-700 text-white px-4 py-2.5 rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[(0,tt.jsx)(Qe,{size:18}),(0,tt.jsx)("span",{children:"\u0110\u0103ng xu\u1ea5t"})]})]})}):(0,tt.jsxs)(Re,{to:"/login",className:"hidden sm:flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-5 py-2.5 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[(0,tt.jsx)(Ye,{size:18}),(0,tt.jsx)("span",{children:"Login"})]}),(0,tt.jsx)("button",{onClick:()=>t(!e),className:"md:hidden p-2.5 hover:bg-gray-100 rounded-lg transition-colors",children:e?(0,tt.jsx)(Ze,{size:24}):(0,tt.jsx)(et,{size:24})})]})]}),e&&(0,tt.jsxs)("nav",{className:"md:hidden mt-4 border-t border-gray-200 pt-4 space-y-2 animate-fadeIn",children:[o.map((e,n)=>e.path.startsWith("#")?(0,tt.jsxs)("a",{href:e.path,className:"flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all",onClick:()=>t(!1),children:[(0,tt.jsx)(e.icon,{size:20}),(0,tt.jsx)("span",{className:"font-medium",children:e.label})]},n):(0,tt.jsxs)(Re,{to:e.path,className:"flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all",onClick:()=>t(!1),children:[(0,tt.jsx)(e.icon,{size:20}),(0,tt.jsx)("span",{className:"font-medium",children:e.label})]},n)),n?(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 mt-2",children:[(0,tt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold shadow-sm",children:(n.fullName||n.email||"U")[0].toUpperCase()}),(0,tt.jsx)("span",{className:"font-semibold text-gray-800",children:n.fullName||n.email})]}),(0,tt.jsxs)("button",{onClick:l,className:"flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all shadow-md font-medium w-full",children:[(0,tt.jsx)(Qe,{size:20}),(0,tt.jsx)("span",{children:"\u0110\u0103ng xu\u1ea5t"})]})]}):(0,tt.jsxs)(Re,{to:"/login",className:"flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md font-medium",onClick:()=>t(!1),children:[(0,tt.jsx)(Ye,{size:20}),(0,tt.jsx)("span",{children:"Login"})]})]})]})})},st=()=>(0,tt.jsx)("footer",{className:"bg-gray-900 text-gray-300 border-t border-gray-800",children:(0,tt.jsxs)("div",{className:"container-custom py-8",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-white mb-4",children:"V\u1ec1 h\u1ec7 th\u1ed1ng"}),(0,tt.jsx)("p",{className:"text-sm text-gray-400",children:"C\u1ed5ng th\xf4ng tin c\xf4ng khai cung c\u1ea5p t\xecm ki\u1ebfm gi\xe1o tr\xecnh, xem chi ti\u1ebft, so s\xe1nh phi\xean b\u1ea3n v\xe0 qu\u1ea3n l\xfd theo d\xf5i."})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-white mb-4",children:"Li\xean k\u1ebft nhanh"}),(0,tt.jsxs)("ul",{className:"text-sm space-y-2 text-gray-400",children:[(0,tt.jsx)("li",{children:(0,tt.jsx)(Re,{to:"/",className:"hover:text-white transition",children:"Trang ch\u1ee7"})}),(0,tt.jsx)("li",{children:(0,tt.jsx)(Re,{to:"/search",className:"hover:text-white transition",children:"T\xecm ki\u1ebfm"})}),(0,tt.jsx)("li",{children:(0,tt.jsx)("button",{type:"button",className:"hover:text-white transition bg-transparent border-none cursor-pointer p-0",children:"H\u1ed7 tr\u1ee3"})})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-white mb-4",children:"Li\xean h\u1ec7"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-400",children:["Email: support@example.com",(0,tt.jsx)("br",{}),"\u0110i\u1ec7n tho\u1ea1i: +84 (0)123 456 789"]})]})]}),(0,tt.jsxs)("div",{className:"border-t border-gray-800 pt-8 flex justify-between items-center text-sm",children:[(0,tt.jsx)("p",{className:"text-gray-400",children:"\xa9 2026 H\u1ec7 th\u1ed1ng Qu\u1ea3n l\xfd Gi\xe1o Tr\xecnh. All rights reserved."}),(0,tt.jsx)("p",{className:"text-gray-500",children:"v1.0.0"})]})]})}),at=Je("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),rt=Je("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),lt=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ot=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),it=Je("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ct=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function dt(e,t){return function(){return e.apply(t,arguments)}}const{toString:ut}=Object.prototype,{getPrototypeOf:mt}=Object,{iterator:ht,toStringTag:gt}=Symbol,pt=(xt=Object.create(null),e=>{const t=ut.call(e);return xt[t]||(xt[t]=t.slice(8,-1).toLowerCase())});var xt;const ft=e=>(e=e.toLowerCase(),t=>pt(t)===e),bt=e=>t=>typeof t===e,{isArray:yt}=Array,vt=bt("undefined");function jt(e){return null!==e&&!vt(e)&&null!==e.constructor&&!vt(e.constructor)&&St(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Nt=ft("ArrayBuffer");const wt=bt("string"),St=bt("function"),kt=bt("number"),Ct=e=>null!==e&&"object"===typeof e,Et=e=>{if("object"!==pt(e))return!1;const t=mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(gt in e)&&!(ht in e)},It=ft("Date"),Pt=ft("File"),Lt=ft("Blob"),Ot=ft("FileList"),Tt=ft("URLSearchParams"),[Dt,At,Rt,zt]=["ReadableStream","Request","Response","Headers"].map(ft);function _t(e,t){let n,s,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),yt(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(jt(e))return;const s=a?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let l;for(n=0;n<r;n++)l=s[n],t.call(null,e[l],l,e)}}function Mt(e,t){if(jt(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s,a=n.length;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const Ut="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,Ft=e=>!vt(e)&&e!==Ut;const Bt=(Vt="undefined"!==typeof Uint8Array&&mt(Uint8Array),e=>Vt&&e instanceof Vt);var Vt;const Ht=ft("HTMLFormElement"),qt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Kt=ft("RegExp"),Jt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};_t(n,(n,a)=>{let r;!1!==(r=t(n,a,e))&&(s[a]=r||n)}),Object.defineProperties(e,s)};const Gt=ft("AsyncFunction"),Wt=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),s=[],Ut.addEventListener("message",e=>{let{source:t,data:a}=e;t===Ut&&a===n&&s.length&&s.shift()()},!1),e=>{s.push(e),Ut.postMessage(n,"*")}):e=>setTimeout(e);var n,s})("function"===typeof setImmediate,St(Ut.postMessage)),Xt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Ut):"undefined"!==typeof process&&process.nextTick||Wt,$t={isArray:yt,isArrayBuffer:Nt,isBuffer:jt,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||St(e.append)&&("formdata"===(t=pt(e))||"object"===t&&St(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nt(e.buffer),t},isString:wt,isNumber:kt,isBoolean:e=>!0===e||!1===e,isObject:Ct,isPlainObject:Et,isEmptyObject:e=>{if(!Ct(e)||jt(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Fr){return!1}},isReadableStream:Dt,isRequest:At,isResponse:Rt,isHeaders:zt,isUndefined:vt,isDate:It,isFile:Pt,isBlob:Lt,isRegExp:Kt,isFunction:St,isStream:e=>Ct(e)&&St(e.pipe),isURLSearchParams:Tt,isTypedArray:Bt,isFileList:Ot,forEach:_t,merge:function e(){const{caseless:t,skipUndefined:n}=Ft(this)&&this||{},s={},a=(a,r)=>{const l=t&&Mt(s,r)||r;Et(s[l])&&Et(a)?s[l]=e(s[l],a):Et(a)?s[l]=e({},a):yt(a)?s[l]=a.slice():n&&vt(a)||(s[l]=a)};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&_t(arguments[r],a);return s},extend:function(e,t,n){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _t(t,(t,s)=>{n&&St(t)?e[s]=dt(t,n):e[s]=t},{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let a,r,l;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)l=a[r],s&&!s(l,e,t)||o[l]||(t[l]=e[l],o[l]=!0);e=!1!==n&&mt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:pt,kindOfTest:ft,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(yt(e))return e;let t=e.length;if(!kt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[ht]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:Ht,hasOwnProperty:qt,hasOwnProp:qt,reduceDescriptors:Jt,freezeMethods:e=>{Jt(e,(t,n)=>{if(St(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];St(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach(e=>{n[e]=!0})};return yt(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Mt,global:Ut,isContextDefined:Ft,isSpecCompliantForm:function(e){return!!(e&&St(e.append)&&"FormData"===e[gt]&&e[ht])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(Ct(e)){if(t.indexOf(e)>=0)return;if(jt(e))return e;if(!("toJSON"in e)){t[s]=e;const a=yt(e)?[]:{};return _t(e,(e,t)=>{const r=n(e,s+1);!vt(r)&&(a[t]=r)}),t[s]=void 0,a}}return e};return n(e,0)},isAsyncFn:Gt,isThenable:e=>e&&(Ct(e)||St(e))&&St(e.then)&&St(e.catch),setImmediate:Wt,asap:Xt,isIterable:e=>null!=e&&St(e[ht])};function Qt(e,t,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}$t.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$t.toJSONObject(this.config),code:this.code,status:this.status}}});const Yt=Qt.prototype,Zt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Zt[e]={value:e}}),Object.defineProperties(Qt,Zt),Object.defineProperty(Yt,"isAxiosError",{value:!0}),Qt.from=(e,t,n,s,a,r)=>{const l=Object.create(Yt);$t.toFlatObject(e,l,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",i=null==t&&e?e.code:t;return Qt.call(l,o,i,n,s,a),e&&null==l.cause&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",r&&Object.assign(l,r),l};const en=Qt;function tn(e){return $t.isPlainObject(e)||$t.isArray(e)}function nn(e){return $t.endsWith(e,"[]")?e.slice(0,-2):e}function sn(e,t,n){return e?e.concat(t).map(function(e,t){return e=nn(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const an=$t.toFlatObject($t,{},null,function(e){return/^is[A-Z]/.test(e)});const rn=function(e,t,n){if(!$t.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(n=$t.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!$t.isUndefined(t[e])})).metaTokens,a=n.visitor||c,r=n.dots,l=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&$t.isSpecCompliantForm(t);if(!$t.isFunction(a))throw new TypeError("visitor must be a function");function i(e){if(null===e)return"";if($t.isDate(e))return e.toISOString();if($t.isBoolean(e))return e.toString();if(!o&&$t.isBlob(e))throw new en("Blob is not supported. Use a Buffer instead.");return $t.isArrayBuffer(e)||$t.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if($t.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if($t.isArray(e)&&function(e){return $t.isArray(e)&&!e.some(tn)}(e)||($t.isFileList(e)||$t.endsWith(n,"[]"))&&(o=$t.toArray(e)))return n=nn(n),o.forEach(function(e,s){!$t.isUndefined(e)&&null!==e&&t.append(!0===l?sn([n],s,r):null===l?n:n+"[]",i(e))}),!1;return!!tn(e)||(t.append(sn(a,n,r),i(e)),!1)}const d=[],u=Object.assign(an,{defaultVisitor:c,convertValue:i,isVisitable:tn});if(!$t.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!$t.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+s.join("."));d.push(n),$t.forEach(n,function(n,r){!0===(!($t.isUndefined(n)||null===n)&&a.call(t,n,$t.isString(r)?r.trim():r,s,u))&&e(n,s?s.concat(r):[r])}),d.pop()}}(e),t};function ln(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function on(e,t){this._pairs=[],e&&rn(e,this,t)}const cn=on.prototype;cn.append=function(e,t){this._pairs.push([e,t])},cn.toString=function(e){const t=e?function(t){return e.call(this,t,ln)}:ln;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const dn=on;function un(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mn(e,t,n){if(!t)return e;const s=n&&n.encode||un;$t.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let r;if(r=a?a(t,n):$t.isURLSearchParams(t)?t.toString():new dn(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const hn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$t.forEach(this.handlers,function(t){null!==t&&e(t)})}},gn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:dn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},xn="undefined"!==typeof window&&"undefined"!==typeof document,fn="object"===typeof navigator&&navigator||void 0,bn=xn&&(!fn||["ReactNative","NativeScript","NS"].indexOf(fn.product)<0),yn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,vn=xn&&window.location.href||"http://localhost",jn=He(He({},s),pn);const Nn=function(e){function t(e,n,s,a){let r=e[a++];if("__proto__"===r)return!0;const l=Number.isFinite(+r),o=a>=e.length;if(r=!r&&$t.isArray(s)?s.length:r,o)return $t.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!l;s[r]&&$t.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],a)&&$t.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const a=n.length;let r;for(s=0;s<a;s++)r=n[s],t[r]=e[r];return t}(s[r])),!l}if($t.isFormData(e)&&$t.isFunction(e.entries)){const n={};return $t.forEachEntry(e,(e,s)=>{t(function(e){return $t.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,n,0)}),n}return null};const wn={transitional:gn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,a=$t.isObject(e);a&&$t.isHTMLForm(e)&&(e=new FormData(e));if($t.isFormData(e))return s?JSON.stringify(Nn(e)):e;if($t.isArrayBuffer(e)||$t.isBuffer(e)||$t.isStream(e)||$t.isFile(e)||$t.isBlob(e)||$t.isReadableStream(e))return e;if($t.isArrayBufferView(e))return e.buffer;if($t.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return rn(e,new jn.classes.URLSearchParams,He({visitor:function(e,t,n,s){return jn.isNode&&$t.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=$t.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return rn(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),function(e,t,n){if($t.isString(e))try{return(t||JSON.parse)(e),$t.trim(e)}catch(Fr){if("SyntaxError"!==Fr.name)throw Fr}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||wn.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if($t.isResponse(e)||$t.isReadableStream(e))return e;if(e&&$t.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(Fr){if(n){if("SyntaxError"===Fr.name)throw en.from(Fr,en.ERR_BAD_RESPONSE,this,null,this.response);throw Fr}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jn.classes.FormData,Blob:jn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$t.forEach(["delete","get","head","post","put","patch"],e=>{wn.headers[e]={}});const Sn=wn,kn=$t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cn=Symbol("internals");function En(e){return e&&String(e).trim().toLowerCase()}function In(e){return!1===e||null==e?e:$t.isArray(e)?e.map(In):String(e)}function Pn(e,t,n,s,a){return $t.isFunction(s)?s.call(this,t,n):(a&&(t=n),$t.isString(t)?$t.isString(s)?-1!==t.indexOf(s):$t.isRegExp(s)?s.test(t):void 0:void 0)}class Ln{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function a(e,t,n){const a=En(t);if(!a)throw new Error("header name must be a non-empty string");const r=$t.findKey(s,a);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=In(e))}const r=(e,t)=>$t.forEach(e,(e,n)=>a(e,n,t));if($t.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if($t.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,s,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),s=e.substring(a+1).trim(),!n||t[n]&&kn[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t})(e),t);else if($t.isObject(e)&&$t.isIterable(e)){let n,s,a={};for(const t of e){if(!$t.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[s=t[0]]=(n=a[s])?$t.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=En(e)){const n=$t.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if($t.isFunction(t))return t.call(this,e,n);if($t.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=En(e)){const n=$t.findKey(this,e);return!(!n||void 0===this[n]||t&&!Pn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function a(e){if(e=En(e)){const a=$t.findKey(n,e);!a||t&&!Pn(0,n[a],a,t)||(delete n[a],s=!0)}}return $t.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const a=t[n];e&&!Pn(0,this[a],a,e,!0)||(delete this[a],s=!0)}return s}normalize(e){const t=this,n={};return $t.forEach(this,(s,a)=>{const r=$t.findKey(n,a);if(r)return t[r]=In(s),void delete t[a];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();l!==a&&delete t[a],t[l]=In(s),n[l]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return $t.forEach(this,(n,s)=>{null!=n&&!1!==n&&(t[s]=e&&$t.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Cn]=this[Cn]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=En(e);t[s]||(!function(e,t){const n=$t.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(e,n,a){return this[s].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[s]=!0)}return $t.isArray(e)?e.forEach(s):s(e),this}}Ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$t.reduceDescriptors(Ln.prototype,(e,t)=>{let{value:n}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[s]=e}}}),$t.freezeMethods(Ln);const On=Ln;function Tn(e,t){const n=this||Sn,s=t||n,a=On.from(s.headers);let r=s.data;return $t.forEach(e,function(e){r=e.call(n,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function Dn(e){return!(!e||!e.__CANCEL__)}function An(e,t,n){en.call(this,null==e?"canceled":e,en.ERR_CANCELED,t,n),this.name="CanceledError"}$t.inherits(An,en,{__CANCEL__:!0});const Rn=An;function zn(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new en("Request failed with status code "+n.status,[en.ERR_BAD_REQUEST,en.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const _n=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let a,r=0,l=0;return t=void 0!==t?t:1e3,function(o){const i=Date.now(),c=s[l];a||(a=i),n[r]=o,s[r]=i;let d=l,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===l&&(l=(l+1)%e),i-a<t)return;const m=c&&i-c;return m?Math.round(1e3*u/m):void 0}};const Mn=function(e,t){let n,s,a=0,r=1e3/t;const l=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=r,n=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];t>=r?l(i,e):(n=i,s||(s=setTimeout(()=>{s=null,l(n)},r-t)))},()=>n&&l(n)]},Un=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const a=_n(50,250);return Mn(n=>{const r=n.loaded,l=n.lengthComputable?n.total:void 0,o=r-s,i=a(o);s=r;e({loaded:r,total:l,progress:l?r/l:void 0,bytes:o,rate:i||void 0,estimated:i&&l&&r<=l?(l-r)/i:void 0,event:n,lengthComputable:null!=l,[t?"download":"upload"]:!0})},n)},Fn=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Bn=e=>function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return $t.asap(()=>e(...n))},Vn=jn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,jn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(jn.origin),jn.navigator&&/(msie|trident)/i.test(jn.navigator.userAgent)):()=>!0,Hn=jn.hasStandardBrowserEnv?{write(e,t,n,s,a,r,l){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];$t.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),$t.isString(s)&&o.push("path=".concat(s)),$t.isString(a)&&o.push("domain=".concat(a)),!0===r&&o.push("secure"),$t.isString(l)&&o.push("SameSite=".concat(l)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function qn(e,t,n){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kn=e=>e instanceof On?He({},e):e;function Jn(e,t){t=t||{};const n={};function s(e,t,n,s){return $t.isPlainObject(e)&&$t.isPlainObject(t)?$t.merge.call({caseless:s},e,t):$t.isPlainObject(t)?$t.merge({},t):$t.isArray(t)?t.slice():t}function a(e,t,n,a){return $t.isUndefined(t)?$t.isUndefined(e)?void 0:s(void 0,e,0,a):s(e,t,0,a)}function r(e,t){if(!$t.isUndefined(t))return s(void 0,t)}function l(e,t){return $t.isUndefined(t)?$t.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,a,r){return r in t?s(n,a):r in e?s(void 0,n):void 0}const i={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(e,t,n)=>a(Kn(e),Kn(t),0,!0)};return $t.forEach(Object.keys(He(He({},e),t)),function(s){const r=i[s]||a,l=r(e[s],t[s],s);$t.isUndefined(l)&&r!==o||(n[s]=l)}),n}const Gn=e=>{const t=Jn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:r,headers:l,auth:o}=t;if(t.headers=l=On.from(l),t.url=mn(qn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),$t.isFormData(n))if(jn.hasStandardBrowserEnv||jn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if($t.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,s]=e;t.includes(n.toLowerCase())&&l.set(n,s)})}if(jn.hasStandardBrowserEnv&&(s&&$t.isFunction(s)&&(s=s(t)),s||!1!==s&&Vn(t.url))){const e=a&&r&&Hn.read(r);e&&l.set(a,e)}return t},Wn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const s=Gn(e);let a=s.data;const r=On.from(s.headers).normalize();let l,o,i,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=s;function g(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let p=new XMLHttpRequest;function x(){if(!p)return;const s=On.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());zn(function(e){t(e),g()},function(e){n(e),g()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:s,config:e,request:p}),p=null}p.open(s.method.toUpperCase(),s.url,!0),p.timeout=s.timeout,"onloadend"in p?p.onloadend=x:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(x)},p.onabort=function(){p&&(n(new en("Request aborted",en.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const s=t&&t.message?t.message:"Network Error",a=new en(s,en.ERR_NETWORK,e,p);a.event=t||null,n(a),p=null},p.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const a=s.transitional||gn;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new en(t,a.clarifyTimeoutError?en.ETIMEDOUT:en.ECONNABORTED,e,p)),p=null},void 0===a&&r.setContentType(null),"setRequestHeader"in p&&$t.forEach(r.toJSON(),function(e,t){p.setRequestHeader(t,e)}),$t.isUndefined(s.withCredentials)||(p.withCredentials=!!s.withCredentials),u&&"json"!==u&&(p.responseType=s.responseType),h&&([i,d]=Un(h,!0),p.addEventListener("progress",i)),m&&p.upload&&([o,c]=Un(m),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(l=t=>{p&&(n(!t||t.type?new Rn(null,e,p):t),p.abort(),p=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);f&&-1===jn.protocols.indexOf(f)?n(new en("Unsupported protocol "+f+":",en.ERR_BAD_REQUEST,e)):p.send(a||null)})},Xn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const a=function(e){if(!n){n=!0,l();const t=e instanceof Error?e:this.reason;s.abort(t instanceof en?t:new Rn(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,a(new en("timeout ".concat(t," of ms exceeded"),en.ETIMEDOUT))},t);const l=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=s;return o.unsubscribe=()=>$t.asap(l),o}};function $n(e,t){this.v=e,this.k=t}function Qn(e){return function(){return new Yn(e.apply(this,arguments))}}function Yn(e){var t,n;function s(t,n){try{var r=e[t](n),l=r.value,o=l instanceof $n;Promise.resolve(o?l.v:l).then(function(n){if(o){var i="return"===t?"return":"next";if(!l.k||n.done)return s(i,n);n=e[i](n).value}a(r.done?"return":"normal",n)},function(e){s("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?s(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise(function(r,l){var o={key:e,arg:a,resolve:r,reject:l,next:null};n?n=n.next=o:(t=n=o,s(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function Zn(e){return new $n(e,0)}function es(e){var t={},n=!1;function s(t,s){return n=!0,s=new Promise(function(n){n(e[t](s))}),{done:!1,value:new $n(s,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):s("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return s("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):s("return",e)}),t}function ts(e){var t,n,s,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,s=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(s&&null!=(t=e[s]))return new ns(t.call(e));n="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function ns(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ns=function(e){this.s=e,this.n=e.next},ns.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ns(e)}Yn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Yn.prototype.next=function(e){return this._invoke("next",e)},Yn.prototype.throw=function(e){return this._invoke("throw",e)},Yn.prototype.return=function(e){return this._invoke("return",e)};const ss=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let s,a=0;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},as=function(){var e=Qn(function*(e,t){var n,s=!1,a=!1;try{for(var r,l=ts(rs(e));s=!(r=yield Zn(l.next())).done;s=!1){const e=r.value;yield*es(ts(ss(e,t)))}}catch(o){a=!0,n=o}finally{try{s&&null!=l.return&&(yield Zn(l.return()))}finally{if(a)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),rs=function(){var e=Qn(function*(e){if(e[Symbol.asyncIterator])return void(yield*es(ts(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Zn(t.read());if(e)break;yield n}}finally{yield Zn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),ls=(e,t,n,s)=>{const a=as(e,t);let r,l=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await a.next();if(t)return o(),void e.close();let r=s.byteLength;if(n){let e=l+=r;n(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:os}=$t,is=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})($t.global),{ReadableStream:cs,TextEncoder:ds}=$t.global,us=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return!!e(...n)}catch(Fr){return!1}},ms=e=>{e=$t.merge.call({skipUndefined:!0},is,e);const{fetch:t,Request:n,Response:s}=e,a=t?os(t):"function"===typeof fetch,r=os(n),l=os(s);if(!a)return!1;const o=a&&os(cs),i=a&&("function"===typeof ds?(c=new ds,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const d=r&&o&&us(()=>{let e=!1;const t=new n(jn.origin,{body:new cs,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=l&&o&&us(()=>$t.isReadableStream(new s("").body)),m={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,n)=>{let s=t&&t[e];if(s)return s.call(t);throw new en("Response type '".concat(e,"' is not supported"),en.ERR_NOT_SUPPORT,n)})});const h=async(e,t)=>{const s=$t.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if($t.isBlob(e))return e.size;if($t.isSpecCompliantForm(e)){const t=new n(jn.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return $t.isArrayBufferView(e)||$t.isArrayBuffer(e)?e.byteLength:($t.isURLSearchParams(e)&&(e+=""),$t.isString(e)?(await i(e)).byteLength:void 0)})(t):s};return async e=>{let{url:a,method:l,data:o,signal:i,cancelToken:c,timeout:g,onDownloadProgress:p,onUploadProgress:x,responseType:f,headers:b,withCredentials:y="same-origin",fetchOptions:v}=Gn(e),j=t||fetch;f=f?(f+"").toLowerCase():"text";let N=Xn([i,c&&c.toAbortSignal()],g),w=null;const S=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let k;try{if(x&&d&&"get"!==l&&"head"!==l&&0!==(k=await h(b,o))){let e,t=new n(a,{method:"POST",body:o,duplex:"half"});if($t.isFormData(o)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,n]=Fn(k,Un(Bn(x)));o=ls(t.body,65536,e,n)}}$t.isString(y)||(y=y?"include":"omit");const t=r&&"credentials"in n.prototype,i=He(He({},v),{},{signal:N,method:l.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:t?y:void 0});w=r&&new n(a,i);let c=await(r?j(w,v):j(a,i));const g=u&&("stream"===f||"response"===f);if(u&&(p||g&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=$t.toFiniteNumber(c.headers.get("content-length")),[n,a]=p&&Fn(t,Un(Bn(p),!0))||[];c=new s(ls(c.body,65536,n,()=>{a&&a(),S&&S()}),e)}f=f||"text";let C=await m[$t.findKey(m,f)||"text"](c,e);return!g&&S&&S(),await new Promise((t,n)=>{zn(t,n,{data:C,headers:On.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(C){if(S&&S(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new en("Network Error",en.ERR_NETWORK,e,w),{cause:C.cause||C});throw en.from(C,C&&C.code,e,w)}}},hs=new Map,gs=e=>{let t=e&&e.env||{};const{fetch:n,Request:s,Response:a}=t,r=[s,a,n];let l,o,i=r.length,c=hs;for(;i--;)l=r[i],o=c.get(l),void 0===o&&c.set(l,o=i?new Map:ms(t)),c=o;return o},ps=(gs(),{http:null,xhr:Wn,fetch:{get:gs}});$t.forEach(ps,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Fr){}Object.defineProperty(e,"adapterName",{value:t})}});const xs=e=>"- ".concat(e),fs=e=>$t.isFunction(e)||null===e||!1===e;const bs={getAdapter:function(e,t){e=$t.isArray(e)?e:[e];const{length:n}=e;let s,a;const r={};for(let l=0;l<n;l++){let n;if(s=e[l],a=s,!fs(s)&&(a=ps[(n=String(s)).toLowerCase()],void 0===a))throw new en("Unknown adapter '".concat(n,"'"));if(a&&($t.isFunction(a)||(a=a.get(t))))break;r[n||"#"+l]=a}if(!a){const e=Object.entries(r).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(xs).join("\n"):" "+xs(e[0]):"as no adapter specified";throw new en("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:ps};function ys(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rn(null,e)}function vs(e){ys(e),e.headers=On.from(e.headers),e.data=Tn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return bs.getAdapter(e.adapter||Sn.adapter,e)(e).then(function(t){return ys(e),t.data=Tn.call(e,e.transformResponse,t),t.headers=On.from(t.headers),t},function(t){return Dn(t)||(ys(e),t&&t.response&&(t.response.data=Tn.call(e,e.transformResponse,t.response),t.response.headers=On.from(t.response.headers))),Promise.reject(t)})}const js="1.13.2",Ns={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ns[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ws={};Ns.transitional=function(e,t,n){function s(e,t){return"[Axios v"+js+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,r)=>{if(!1===e)throw new en(s(a," has been removed"+(t?" in "+t:"")),en.ERR_DEPRECATED);return t&&!ws[a]&&(ws[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,r)}},Ns.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ss={assertOptions:function(e,t,n){if("object"!==typeof e)throw new en("options must be an object",en.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const r=s[a],l=t[r];if(l){const t=e[r],n=void 0===t||l(t,r,e);if(!0!==n)throw new en("option "+r+" must be "+n,en.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new en("Unknown option "+r,en.ERR_BAD_OPTION)}},validators:Ns},ks=Ss.validators;class Cs{constructor(e){this.defaults=e||{},this.interceptors={request:new hn,response:new hn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Fr){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Jn(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:a}=t;void 0!==n&&Ss.assertOptions(n,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1),null!=s&&($t.isFunction(s)?t.paramsSerializer={serialize:s}:Ss.assertOptions(s,{encode:ks.function,serialize:ks.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ss.assertOptions(t,{baseUrl:ks.spelling("baseURL"),withXsrfToken:ks.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=a&&$t.merge(a.common,a[t.method]);a&&$t.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=On.concat(r,a);const l=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});const i=[];let c;this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[vs.bind(this),void 0];for(e.unshift(...l),e.push(...i),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=l.length;let m=t;for(;u<d;){const e=l[u++],t=l[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=vs.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=i.length;u<d;)c=c.then(i[u++],i[u++]);return c}getUri(e){return mn(qn((e=Jn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}$t.forEach(["delete","get","head","options"],function(e){Cs.prototype[e]=function(t,n){return this.request(Jn(n||{},{method:e,url:t,data:(n||{}).data}))}}),$t.forEach(["post","put","patch"],function(e){function t(t){return function(n,s,a){return this.request(Jn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}Cs.prototype[e]=t(),Cs.prototype[e+"Form"]=t(!0)});const Es=Cs;class Is{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e(function(e,s,a){n.reason||(n.reason=new Rn(e,s,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Is(function(t){e=t}),cancel:e}}}const Ps=Is;const Ls={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ls).forEach(e=>{let[t,n]=e;Ls[n]=t});const Os=Ls;const Ts=function e(t){const n=new Es(t),s=dt(Es.prototype.request,n);return $t.extend(s,Es.prototype,n,{allOwnKeys:!0}),$t.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Jn(t,n))},s}(Sn);Ts.Axios=Es,Ts.CanceledError=Rn,Ts.CancelToken=Ps,Ts.isCancel=Dn,Ts.VERSION=js,Ts.toFormData=rn,Ts.AxiosError=en,Ts.Cancel=Ts.CanceledError,Ts.all=function(e){return Promise.all(e)},Ts.spread=function(e){return function(t){return e.apply(null,t)}},Ts.isAxiosError=function(e){return $t.isObject(e)&&!0===e.isAxiosError},Ts.mergeConfig=Jn,Ts.AxiosHeaders=On,Ts.formToJSON=e=>Nn($t.isHTMLForm(e)?new FormData(e):e),Ts.getAdapter=bs.getAdapter,Ts.HttpStatusCode=Os,Ts.default=Ts;const Ds=Ts,As=Ds.create({baseURL:"",timeout:1e4});As.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),As.interceptors.response.use(e=>e,e=>{var t;try{var n,s;console.debug("[apiClient] Response error",null===(n=e.response)||void 0===n?void 0:n.status,null===(s=e.response)||void 0===s?void 0:s.data)}catch(Fr){console.debug("[apiClient] Response debug error",Fr)}if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){"true"===localStorage.getItem("suppress401Logout")?console.debug("[apiClient] 401 received \u2014 development/suppress mode, not logging out automatically"):(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login")}return Promise.reject(e)});const Rs=As,zs=()=>{const e=le(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[l,o]=(0,r.useState)(""),[i,c]=(0,r.useState)("all"),[d,u]=(0,r.useState)("all"),[m,h]=(0,r.useState)("all");(0,r.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=(await Rs.get("/api/public/syllabuses",{params:{status:"PUBLISHED",page:0,size:8}})).data;n(Array.isArray(e)?e:e.content||e.data||[])}catch(e){console.error("Error loading syllabuses:",e)}finally{a(!1)}},p=t.slice(0,6),x=t.filter(e=>"PUBLISHED"===e.status).length;return(0,tt.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,tt.jsx)("section",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white py-20 px-6",children:(0,tt.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,tt.jsx)("div",{className:"mb-8 flex justify-center",children:(0,tt.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-xl",children:(0,tt.jsx)(at,{size:40})})}),(0,tt.jsx)("h1",{className:"text-5xl md:text-6xl font-bold mb-6 leading-tight",children:"\ud83d\udcda H\u1ec7 Th\u1ed1ng Qu\u1ea3n L\xfd Gi\xe1o Tr\xecnh"}),(0,tt.jsx)("p",{className:"text-xl text-blue-100 mb-12 max-w-3xl mx-auto",children:"T\xecm ki\u1ebfm v\xe0 kh\xe1m ph\xe1 c\xe1c gi\xe1o tr\xecnh ch\xednh th\u1ee9c c\u1ee7a tr\u01b0\u1eddng. Truy c\u1eadp n\u1ed9i dung h\u1ecdc t\u1eadp ch\u1ea5t l\u01b0\u1ee3ng cao, \u0111\u01b0\u1ee3c qu\u1ea3n l\xfd t\u1eadp trung."})]})}),(0,tt.jsx)("section",{className:"max-w-6xl mx-auto px-6 py-16",children:(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-16",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border-l-4 border-blue-600",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)(rt,{className:"text-blue-600",size:32}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Gi\xe1o Tr\xecnh Xu\u1ea5t B\u1ea3n"}),(0,tt.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[x,"+"]})]})]})}),(0,tt.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border-l-4 border-green-600",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)(lt,{className:"text-green-600",size:32}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Gi\u1ea3ng Vi\xean"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:"100+"})]})]})}),(0,tt.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border-l-4 border-purple-600",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)(ot,{className:"text-purple-600",size:32}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"C\u1eadp Nh\u1eadt H\u1eb1ng Ng\xe0y"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:"24/7"})]})]})})]})}),(0,tt.jsx)("section",{className:"bg-gray-50 py-20 px-6",children:(0,tt.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-12",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 flex items-center gap-3",children:[(0,tt.jsx)(it,{className:"text-yellow-500",size:32}),"Gi\xe1o Tr\xecnh N\u1ed5i B\u1eadt"]}),(0,tt.jsx)("p",{className:"text-gray-600 mt-2",children:"Nh\u1eefng gi\xe1o tr\xecnh \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt g\u1ea7n \u0111\xe2y nh\u1ea5t"})]}),(0,tt.jsxs)("button",{onClick:()=>e("/public/search"),className:"text-blue-600 hover:text-blue-700 font-semibold flex items-center gap-2 transition",children:["Xem t\u1ea5t c\u1ea3 ",(0,tt.jsx)(ct,{size:20})]})]}),s?(0,tt.jsxs)("div",{className:"text-center py-12",children:[(0,tt.jsx)("div",{className:"inline-block",children:(0,tt.jsx)("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),(0,tt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u0110ang t\u1ea3i gi\xe1o tr\xecnh..."})]}):(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map((t,n)=>(0,tt.jsxs)("div",{className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-blue-500 hover:border-blue-700",children:[(0,tt.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white relative",children:[0===n&&(0,tt.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-400 text-gray-900 px-3 py-1 rounded-full text-xs font-bold",children:"\u2b50 N\u1ed5i B\u1eadt"}),(0,tt.jsx)(at,{size:32,className:"text-blue-100 mb-2"})]}),(0,tt.jsxs)("div",{className:"p-6",children:[(0,tt.jsx)("p",{className:"text-sm font-bold text-blue-600 mb-2 tracking-wider",children:t.subjectCode}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3 line-clamp-2 group-hover:text-blue-600 transition",children:t.subjectName}),(0,tt.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:t.summary||"\ud83d\udcd6 Gi\xe1o tr\xecnh chuy\xean ng\xe0nh"}),(0,tt.jsx)("div",{className:"space-y-2 mb-4 text-sm text-gray-600",children:(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsxs)("span",{className:"text-xs",children:["\ud83d\udcc5 v",t.versionNo]}),(0,tt.jsx)("span",{className:"text-xs",children:"\u2022"}),(0,tt.jsx)("span",{className:"text-xs",children:new Date(t.createdAt).toLocaleDateString("vi-VN")})]})}),(0,tt.jsxs)("button",{onClick:()=>e("/public/syllabus/".concat(t.id)),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-lg hover:from-blue-600 hover:to-blue-700 transition font-semibold flex items-center justify-center gap-2 group/btn",children:["Xem Chi Ti\u1ebft",(0,tt.jsx)(ct,{size:18,className:"group-hover/btn:translate-x-1 transition"})]})]})]},t.id))})]})}),(0,tt.jsx)("section",{className:"py-20 px-6",children:(0,tt.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,tt.jsx)("h2",{className:"text-4xl font-bold text-gray-900 text-center mb-16",children:"\u2728 T\xednh N\u0103ng Ch\xednh"}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:"\ud83d\udd0d",title:"T\xecm Ki\u1ebfm N\xe2ng Cao",desc:"T\xecm ki\u1ebfm theo m\xe3, t\xean ho\u1eb7c t\u1eeb kh\xf3a v\u1edbi b\u1ed9 l\u1ecdc \u0111a chi\u1ec1u"},{icon:"\ud83d\udcd6",title:"Xem Chi Ti\u1ebft",desc:"Xem n\u1ed9i dung \u0111\u1ea7y \u0111\u1ee7: CLO, \u0111\xe1nh gi\xe1, k\u1ebf ho\u1ea1ch gi\u1ea3ng d\u1ea1y"},{icon:"\ud83e\udd16",title:"AI Summary",desc:"T\xf3m t\u1eaft t\u1ef1 \u0111\u1ed9ng gi\xfap hi\u1ec3u nhanh n\u1ed9i dung gi\xe1o tr\xecnh"},{icon:"\ud83d\udd17",title:"Quan H\u1ec7 M\xf4n H\u1ecdc",desc:"Xem m\u1ed1i li\xean h\u1ec7 gi\u1eefa c\xe1c m\xf4n h\u1ecdc: ti\xean quy\u1ebft, ph\u1ee5 thu\u1ed9c"}].map((e,t)=>(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition border-t-4 border-blue-500",children:[(0,tt.jsx)("div",{className:"text-4xl mb-4",children:e.icon}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:e.title}),(0,tt.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:e.desc})]},t))})]})}),(0,tt.jsx)("section",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16 px-6",children:(0,tt.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,tt.jsx)("h2",{className:"text-4xl font-bold mb-6",children:"\ud83c\udfaf B\u1eaft \u0110\u1ea7u Kh\xe1m Ph\xe1 Ngay"}),(0,tt.jsx)("p",{className:"text-xl text-blue-100 mb-8",children:"T\xecm ki\u1ebfm gi\xe1o tr\xecnh ph\xf9 h\u1ee3p v\u1edbi chuy\xean ng\xe0nh c\u1ee7a b\u1ea1n"}),(0,tt.jsxs)("div",{className:"flex gap-4 justify-center flex-wrap",children:[(0,tt.jsx)("button",{onClick:()=>e("/public/search"),className:"bg-white text-blue-600 px-8 py-4 rounded-lg hover:bg-blue-50 transition font-bold text-lg shadow-lg",children:"T\xecm Ki\u1ebfm Ngay"}),(0,tt.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-700 text-white px-8 py-4 rounded-lg hover:bg-blue-900 transition font-bold text-lg border-2 border-white",children:"\u0110\u0103ng Nh\u1eadp"})]})]})})]})},_s=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ms=Je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Us=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Fs=Je("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Bs={login:async e=>{try{const t={username:e.username?e.username:e.email&&e.email.includes("@")?e.email.split("@")[0]:e.email,password:e.password};console.log("[AuthService] Sending login request:",{username:t.username});const n=await Rs.post("/api/auth/login",t);return console.log("[AuthService] Login response:",n.data),n.data}catch(s){var t,n;console.error("[AuthService] Login error:",s);const e=(null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||s.message||"Login failed";throw console.error("[AuthService] Error message:",e),new Error(e)}},logout:async()=>{try{await Rs.post("/api/auth/logout")}catch(e){console.error("Logout error:",e)}},verifyToken:async e=>{try{return(await Rs.get("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(n){var t;throw(null===(t=n.response)||void 0===t?void 0:t.data)||n.message}},refreshToken:async()=>{try{return(await Rs.post("/api/auth/refresh")).data}catch(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||t.message}}},Vs={getPublicSyllabi:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await Rs.get("/api/public/syllabi",{params:e})).data}catch(n){var t;throw console.error("Public Service - Get syllabi error:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||{message:n.message||"Failed to fetch syllabi"}}},getSyllabusDetails:async e=>{try{return(await Rs.get("/api/public/syllabi/".concat(e))).data}catch(n){var t;throw console.error("Public Service - Get syllabus details error:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||{message:n.message||"Failed to fetch syllabus details"}}},searchPublicSyllabi:async e=>{try{return(await Rs.get("/api/public/syllabi/search",{params:{q:e}})).data}catch(n){var t;throw console.error("Public Service - Search error:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||{message:n.message||"Search failed"}}},getAnnouncements:async()=>{try{return(await Rs.get("/api/public/announcements")).data}catch(t){var e;throw console.error("Public Service - Get announcements error:",t),(null===(e=t.response)||void 0===e?void 0:e.data)||{message:t.message||"Failed to fetch announcements"}}},getPublicStatistics:async()=>{try{return(await Rs.get("/api/public/statistics")).data}catch(t){var e;throw console.error("Public Service - Get statistics error:",t),(null===(e=t.response)||void 0===e?void 0:e.data)||{message:t.message||"Failed to fetch statistics"}}},downloadSyllabus:async e=>{try{return(await Rs.get("/api/public/syllabi/".concat(e,"/download"),{responseType:"blob"})).data}catch(n){var t;throw console.error("Public Service - Download error:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||{message:n.message||"Download failed"}}}},Hs="/api/syllabuses",qs="/api/syllabus/documents",Ks={list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{q:t="",status:n="ALL",page:s=0,size:a=20}=e,r={};return t&&(r.q=t),n&&"ALL"!==n&&(r.status=n),r.page=s,r.size=a,Rs.get(Hs,{params:r})},getById:async e=>Rs.get("".concat(Hs,"/").concat(e)),getVersions:async e=>Rs.get("".concat(Hs,"/").concat(e,"/versions")),compare:async(e,t,n)=>Rs.get("".concat(Hs,"/").concat(e,"/compare"),{params:{v1:t,v2:n}}),create:async(e,t)=>{const n={syllabusCode:e.syllabusCode,subjectCode:e.subjectCode||"",subjectName:e.subjectName||"",subjectId:e.subjectId,academicYear:e.academicYear,semester:e.semester,content:e.content,description:e.description,learningObjectives:e.learningObjectives,cloPairIds:e.cloPairIds,modules:e.modules};return Rs.post(Hs,n,{headers:{"X-User-Id":t}})},createNewVersion:async(e,t,n)=>{const s={content:t.content,changes:t.changes,subjectCode:t.subjectCode||"",subjectName:t.subjectName||"",academicYear:t.academicYear,semester:t.semester,learningObjectives:t.learningObjectives,cloPairIds:t.cloPairIds,modules:t.modules};return Rs.post("".concat(Hs,"/").concat(e,"/versions"),s,{headers:{"X-User-Id":n}})},submit:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/submit"),{},{headers:{"X-User-Id":t}}),reviewApprove:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/review-approve"),{},{headers:{"X-User-Id":t}}),approve:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/approve"),{},{headers:{"X-User-Id":t}}),publish:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/publish"),{},{headers:{"X-User-Id":t}}),reject:async(e,t,n)=>Rs.post("".concat(Hs,"/").concat(e,"/reject"),{reason:t},{headers:{"X-User-Id":n}}),revise:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/revise"),{},{headers:{"X-User-Id":t}}),follow:async(e,t)=>Rs.post("".concat(Hs,"/").concat(e,"/follow"),{},{headers:{"X-User-Id":t}}),unfollow:async(e,t)=>Rs.delete("".concat(Hs,"/").concat(e,"/follow"),{headers:{"X-User-Id":t}}),getFollowers:async e=>Rs.get("".concat(Hs,"/").concat(e,"/followers")),isFollowing:async(e,t)=>Rs.get("".concat(Hs,"/").concat(e,"/is-following"),{headers:{"X-User-Id":t}}),uploadDocument:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;const r=new FormData;return r.append("file",t),r.append("syllabusId",e),n&&r.append("title",n),s&&r.append("description",s),Rs.post("".concat(qs,"/upload"),r,{headers:{"X-User-Id":a}})},getDocumentsBySyllabus:async e=>Rs.get("".concat(qs,"/syllabus/").concat(e)),getDocumentsByVersion:async(e,t)=>Rs.get("".concat(qs,"/syllabus/").concat(e,"/version/").concat(t)),getMyDocuments:async e=>Rs.get("".concat(qs,"/my-documents"),{headers:{"X-User-Id":e}}),getDocumentInfo:async e=>Rs.get("".concat(qs,"/").concat(e)),downloadDocument:async e=>Rs.get("".concat(qs,"/").concat(e,"/download"),{responseType:"blob"}),deleteDocument:async(e,t)=>Rs.delete("".concat(qs,"/").concat(e),{headers:{"X-User-Id":t}}),getDocumentStatistics:async e=>Rs.get("".concat(qs,"/syllabus/").concat(e,"/statistics")),createIssue:async(e,t)=>Rs.post("/api/issues",e,{headers:{"X-User-Id":t}}),getIssues:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rs.get("/api/issues",{params:e})},getIssueById:async e=>Rs.get("/api/issues/".concat(e)),updateIssueStatus:async(e,t,n)=>Rs.put("/api/issues/".concat(e,"/status"),{status:t},{headers:{"X-User-Id":n}}),deleteIssue:async(e,t)=>Rs.delete("/api/issues/".concat(e),{headers:{"X-User-Id":t}}),addReviewComment:async(e,t)=>Rs.post("/api/review-comments",e,{headers:{"X-User-Id":t}}),getReviewComments:async e=>Rs.get("/api/review-comments/syllabus/".concat(e)),updateReviewComment:async(e,t,n)=>Rs.put("/api/review-comments/".concat(e),t,{headers:{"X-User-Id":n}}),deleteReviewComment:async(e,t)=>Rs.delete("/api/review-comments/".concat(e),{headers:{"X-User-Id":t}}),getSubjects:async()=>Rs.get("/api/v1/subject"),createCLO:async e=>Rs.post("/api/v1/clo",e),getCLOsBySyllabus:async e=>Rs.get("/api/v1/clo/syllabus/".concat(e)),getAllCLOs:async()=>Rs.get("/api/v1/clo"),getCLOById:async e=>Rs.get("/api/v1/clo/".concat(e)),updateCLO:async(e,t)=>Rs.put("/api/v1/clo/".concat(e),t),deleteCLO:async e=>Rs.delete("/api/v1/clo/".concat(e)),searchCLOs:async e=>Rs.get("/api/v1/clo/search",{params:{code:e}}),getUnassignedCLOs:async()=>Rs.get("/api/v1/clo/unassigned"),assignCLOToSubject:async(e,t)=>Rs.post("/api/v1/clo/".concat(e,"/assign-subject"),null,{params:{subjectId:t}})},Js=Ks,Gs=e=>{let{cloIds:t}=e;const[n,s]=(0,r.useState)({}),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if((t?t.sort().join(","):"")===o.sort().join(",")&&Object.keys(n).length>0)return void l(!1);t&&t.length>0?(async()=>{l(!0);const e={};for(const s of t||[])try{var n;const t=await Js.getCLOById(s),a=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||t;console.log("CLO ".concat(s," fetched:"),a),e[s]=a}catch(a){console.error("Failed to fetch CLO ".concat(s,":"),a),e[s]={id:s,cloCode:"CLO-".concat(s),description:"Kh\xf4ng th\u1ec3 t\u1ea3i"}}s(e),i(t||[]),l(!1)})():l(!1)},[t,o,n]),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["\ud83c\udf93 CLO li\xean k\u1ebft (",(null===t||void 0===t?void 0:t.length)||0,")"]}),a?(0,tt.jsx)("div",{className:"text-gray-600 text-sm py-2",children:"\u0110ang t\u1ea3i th\xf4ng tin CLO..."}):(0,tt.jsx)("div",{className:"space-y-2",children:(t||[]).map(e=>{const t=n[e],s=(null===t||void 0===t?void 0:t.cloCode)||(null===t||void 0===t?void 0:t.name)||"CLO-".concat(e),a=(null===t||void 0===t?void 0:t.description)||"";return(0,tt.jsx)("div",{className:"bg-white border border-indigo-200 rounded-lg p-3 hover:shadow-md transition",children:(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("div",{className:"font-semibold text-indigo-900",children:s}),a&&(0,tt.jsx)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:a}),(null===t||void 0===t?void 0:t.level)&&(0,tt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Level: ",t.level]})]}),(0,tt.jsxs)("span",{className:"ml-2 bg-indigo-100 text-indigo-800 px-3 py-1 rounded text-xs font-medium whitespace-nowrap flex-shrink-0",children:["#",e]})]})},e)})})]})},Ws=()=>{var e,t;const{id:n}=oe(),s=le(),[a,l]=(0,r.useState)(null),[o,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{i(!0),d(null);try{const e=await Vs.getSyllabusDetails(n);l(e)}catch(e){console.error("Fetch syllabus error:",e),d(e.message||"Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin gi\xe1o tr\xecnh")}finally{i(!1)}})()},[n]);const u=()=>{s("/search")};return o?(0,tt.jsxs)("div",{className:"container-custom py-12 text-center",children:[(0,tt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,tt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u0110ang t\u1ea3i th\xf4ng tin gi\xe1o tr\xecnh..."})]}):c?(0,tt.jsx)("div",{className:"container-custom py-12",children:(0,tt.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[(0,tt.jsx)("h3",{className:"font-semibold mb-2",children:"L\u1ed7i"}),(0,tt.jsx)("p",{children:c}),(0,tt.jsx)("button",{onClick:u,className:"mt-4 text-red-600 underline",children:"Quay l\u1ea1i t\xecm ki\u1ebfm"})]})}):a?(0,tt.jsxs)("div",{className:"container-custom py-8",children:[(0,tt.jsxs)("button",{onClick:u,className:"flex items-center gap-2 text-gray-600 hover:text-primary-600 mb-6 transition",children:[(0,tt.jsx)(_s,{size:20}),"Quay l\u1ea1i t\xecm ki\u1ebfm"]}),(0,tt.jsx)("div",{className:"card p-6 mb-6",children:(0,tt.jsx)("div",{className:"flex items-start justify-between",children:(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[(0,tt.jsx)(at,{size:32,className:"text-primary-600"}),(null===(e=a.subject)||void 0===e?void 0:e.subjectName)||a.syllabusCode]}),(0,tt.jsxs)("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[(0,tt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,tt.jsx)(rt,{size:18}),"M\xe3: ",(null===(t=a.subject)||void 0===t?void 0:t.subjectCode)||a.syllabusCode]}),(0,tt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,tt.jsx)(Ms,{size:18}),"N\u0103m h\u1ecdc: ",a.academicYear," - HK",a.semester]}),(0,tt.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:["v",a.version]}),(0,tt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat("APPROVED"===a.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:a.status})]})]})})}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,tt.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[a.learningObjectives&&(0,tt.jsxs)("div",{className:"card p-6",children:[(0,tt.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,tt.jsx)(Us,{size:24,className:"text-primary-600"}),"M\u1ee5c Ti\xeau H\u1ecdc T\u1eadp"]}),(0,tt.jsx)("div",{className:"prose max-w-none text-gray-700 whitespace-pre-line",children:a.learningObjectives})]}),a.content&&(0,tt.jsxs)("div",{className:"card p-6",children:[(0,tt.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,tt.jsx)(rt,{size:24,className:"text-primary-600"}),"N\u1ed9i Dung Gi\xe1o Tr\xecnh"]}),(0,tt.jsx)("div",{className:"text-gray-700",children:(()=>{try{const e="string"===typeof a.content?JSON.parse(a.content):a.content;return"object"===typeof e?(0,tt.jsxs)("div",{className:"space-y-4",children:[(e.subjectCode||e.academicYear||e.semester)&&(0,tt.jsxs)("div",{className:"bg-gray-100 p-4 rounded border border-gray-300",children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83d\udccb Th\xf4ng tin"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.subjectCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 m\xf4n:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.subjectCode})]}),e.syllabusCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 gi\xe1o tr\xecnh:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.syllabusCode})]}),e.academicYear&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"N\u0103m h\u1ecdc:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.academicYear})]}),e.semester&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"H\u1ecdc k\u1ef3:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.semester})]})]})]}),e.modules&&e.modules.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2",children:["\ud83d\udcda C\xe1c Module (",e.modules.length,")"]}),(0,tt.jsx)("ul",{className:"space-y-2 ml-4",children:e.modules.map((e,t)=>(0,tt.jsxs)("li",{className:"text-gray-700",children:[(0,tt.jsx)("strong",{children:e.title||e.name||"Module ".concat(t+1)}),e.description&&(0,tt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]},t))})]}),e.learningObjectives&&e.learningObjectives.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83c\udfaf M\u1ee5c Ti\xeau H\u1ecdc T\u1eadp"}),(0,tt.jsx)("p",{className:"whitespace-pre-wrap",children:e.learningObjectives})]}),e.teachingMethods&&e.teachingMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83d\udc68\u200d\ud83c\udfeb Ph\u01b0\u01a1ng Ph\xe1p Gi\u1ea3ng D\u1ea1y"}),(0,tt.jsx)("p",{className:"whitespace-pre-wrap",children:e.teachingMethods})]}),e.assessmentMethods&&e.assessmentMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83d\udcdd Ph\u01b0\u01a1ng Ph\xe1p \u0110\xe1nh Gi\xe1"}),(0,tt.jsx)("p",{className:"whitespace-pre-wrap",children:e.assessmentMethods})]}),e.cloPairIds&&e.cloPairIds.length>0&&(0,tt.jsx)(Gs,{cloIds:e.cloPairIds}),(!e.modules||0===e.modules.length)&&(!e.learningObjectives||!e.learningObjectives.trim())&&(!e.teachingMethods||!e.teachingMethods.trim())&&(!e.assessmentMethods||!e.assessmentMethods.trim())&&(!e.cloPairIds||0===e.cloPairIds.length)&&(0,tt.jsx)("div",{className:"text-gray-500 italic text-center py-8",children:"\u2139\ufe0f Ch\u01b0a c\xf3 n\u1ed9i dung chi ti\u1ebft. H\xe3y th\xeam modules, m\u1ee5c ti\xeau, ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y v\xe0 \u0111\xe1nh gi\xe1."})]}):(0,tt.jsx)("div",{className:"whitespace-pre-line",children:e})}catch(e){return(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-red-600 text-xs mb-2",children:"\u26a0\ufe0f Kh\xf4ng th\u1ec3 parse JSON"}),(0,tt.jsx)("pre",{className:"bg-gray-100 p-3 rounded text-xs overflow-x-auto max-h-48",children:a.content})]})}})()})]})]}),(0,tt.jsxs)("div",{className:"space-y-6",children:[a.teachingMethods&&(0,tt.jsxs)("div",{className:"card p-6",children:[(0,tt.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,tt.jsx)($e,{size:20,className:"text-primary-600"}),"Ph\u01b0\u01a1ng Ph\xe1p Gi\u1ea3ng D\u1ea1y"]}),(0,tt.jsx)("p",{className:"text-gray-700",children:a.teachingMethods})]}),a.assessmentMethods&&(0,tt.jsxs)("div",{className:"card p-6",children:[(0,tt.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,tt.jsx)(Fs,{size:20,className:"text-primary-600"}),"Ph\u01b0\u01a1ng Ph\xe1p \u0110\xe1nh Gi\xe1"]}),(0,tt.jsx)("p",{className:"text-gray-700",children:a.assessmentMethods})]}),a.subject&&(0,tt.jsxs)("div",{className:"card p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Th\xf4ng Tin M\xf4n H\u1ecdc"}),(0,tt.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,tt.jsxs)("div",{className:"flex justify-between",children:[(0,tt.jsx)("dt",{className:"text-gray-500",children:"S\u1ed1 t\xedn ch\u1ec9:"}),(0,tt.jsx)("dd",{className:"font-medium",children:a.subject.credits})]}),(0,tt.jsxs)("div",{className:"flex justify-between",children:[(0,tt.jsx)("dt",{className:"text-gray-500",children:"Lo\u1ea1i m\xf4n:"}),(0,tt.jsx)("dd",{className:"font-medium",children:a.subject.subjectType||"N/A"})]})]})]}),a.updatedAt&&(0,tt.jsx)("div",{className:"card p-6 bg-gray-50",children:(0,tt.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,tt.jsx)(ot,{size:18}),(0,tt.jsxs)("span",{className:"text-sm",children:["C\u1eadp nh\u1eadt: ",new Date(a.updatedAt).toLocaleDateString("vi-VN")]})]})})]})]})]}):(0,tt.jsxs)("div",{className:"container-custom py-12 text-center",children:[(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh"}),(0,tt.jsx)("button",{onClick:u,className:"mt-4 text-primary-600 underline",children:"Quay l\u1ea1i t\xecm ki\u1ebfm"})]})},Xs=Je("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),$s=Je("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qs=()=>{const e=le(),[t,n]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),x=e=>{e&&(document.cookie="access_token=".concat(e,"; path=/; SameSite=Lax"))};(0,r.useEffect)(()=>{const e=localStorage.getItem("user");e&&p(JSON.parse(e))},[]);return(0,tt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center px-4",children:(0,tt.jsxs)("div",{className:"w-full max-w-md",children:[g&&(0,tt.jsxs)("div",{className:"mb-6 bg-white rounded-lg shadow-lg p-4 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,tt.jsx)($e,{size:20,className:"text-blue-600"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:g.name}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:g.email})]})]}),(0,tt.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),document.cookie="access_token=; Max-Age=0; path=/; SameSite=Lax",p(null),n(""),a("")},className:"flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition font-medium text-sm",children:[(0,tt.jsx)(Qe,{size:16}),"\u0110\u0103ng xu\u1ea5t"]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 space-y-6",children:[(0,tt.jsxs)("div",{className:"text-center space-y-2",children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"SMD System"}),(0,tt.jsx)("p",{className:"text-slate-600 text-sm",children:"Sign in to your account"})]}),d&&(0,tt.jsxs)("div",{className:"rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-700",children:["\u26a0\ufe0f ",d]}),(0,tt.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),u(""),h(!0),!t||!s)return u("Email and password are required"),void h(!1);if(!t.includes("@"))return u("Please enter a valid email"),void h(!1);try{console.log("[Login] Starting login process for:",t);const a=await Bs.login({email:t,password:s});if(console.log("[Login] Login response received:",a),!a)throw new Error("No response from server");a.token?(localStorage.setItem("token",a.token),x(a.token),console.log("[Login] Token saved")):console.warn("[Login] No token in response"),a.refreshToken&&localStorage.setItem("refreshToken",a.refreshToken);let r=Array.isArray(a.roles)?a.roles:a.roles?Array.from(a.roles):[];console.log("[Login] ========== ROLES DEBUG =========="),console.log("[Login] Raw roles from API:",a.roles),console.log("[Login] Type of response.roles:",typeof a.roles),console.log("[Login] Is Array?",Array.isArray(a.roles)),console.log("[Login] Parsed userRoles array:",r),console.log("[Login] userRoles[0]:",r[0]),console.log("[Login] userRoles includes ROLE_ADMIN?",r.includes("ROLE_ADMIN")),console.log("[Login] ======================================");const l=["ROLE_RECTOR","ROLE_ACADEMIC_AFFAIRS","ROLE_HOD","ROLE_ADMIN","ROLE_LECTURER","ROLE_STUDENT"];let o="ROLE_STUDENT";if(r&&r.length>0){for(const e of l)if(r.includes(e)){o=e,console.log("[Login] Primary role selected:",o);break}}else console.warn("[Login] No roles found, using default ROLE_STUDENT");const c={email:a.email||t,name:a.fullName||a.username||t.split("@")[0],username:a.username,role:o,roles:r,userId:a.userId,major:a.major||a.programName||a.program||""};console.log("[Login] User data prepared:",c),localStorage.setItem("user",JSON.stringify(c));try{localStorage.setItem("role",o),console.log("[Login] \u2705 Saved to localStorage - role:",o),console.log("[Login] \u2705 Saved to localStorage - user:",JSON.stringify(c))}catch(n){console.warn("Failed to set localStorage role",n)}const d=JSON.parse(localStorage.getItem("user")),u=localStorage.getItem("role");console.log("[Login] \ud83d\udd0d Verify localStorage - savedUser:",d),console.log("[Login] \ud83d\udd0d Verify localStorage - savedRole:",u),p(c),console.log("[Login] User data saved, navigating to dashboard"),i&&localStorage.setItem("rememberEmail",t),console.log("[Login] Login successful, primaryRole =",o);const m={ROLE_RECTOR:"/rector/dashboard",ROLE_ACADEMIC_AFFAIRS:"/academic/dashboard",ROLE_HOD:"/lecturer/dashboard",ROLE_ADMIN:"/admin/portal",ROLE_LECTURER:"/lecturer/dashboard",ROLE_STUDENT:"/student"}[o]||"/student";console.log("[Login] Will navigate ".concat(o," \u2192 ").concat(m)),console.log("[Login] Current userData.role:",c.role),console.log("[Login] Current userData.roles:",c.roles),console.log("[Login] Checking condition: primaryRole === ROLE_ADMIN?","ROLE_ADMIN"===o),"ROLE_ADMIN"===o?(console.log("[Login] \u2705 ROLE_ADMIN detected - navigate to /admin/portal immediately"),e("/admin/portal",{replace:!0})):(console.log("[Login] \u26a0\ufe0f NOT ADMIN - Routing ".concat(o," \u2192 ").concat(m)),setTimeout(()=>e(m,{replace:!0}),100))}catch(a){console.error("[Login] Error caught:",a);const n=a.message||a.error||"Login failed. Please check your credentials.";if(console.error("[Login] Final error message:",n),u(n),"admin@smd.edu.vn"===t&&"Lecturer@123"===s){console.warn("[Login] Backend not available, using demo login");const t={email:"admin@smd.edu.vn",name:"Qu\u1ea3n tr\u1ecb vi\xean",username:"admin",role:"ROLE_ADMIN",roles:["ROLE_ADMIN"],userId:"1"};localStorage.setItem("token","demo-token-"+Date.now()),x(localStorage.getItem("token")),localStorage.setItem("user",JSON.stringify(t)),p(t),setTimeout(()=>e("/admin/portal"),100)}}finally{h(!1)}},className:"space-y-4",children:[(0,tt.jsxs)("div",{className:"space-y-1",children:[(0,tt.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"Email Address"}),(0,tt.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"you@example.com",className:"w-full rounded-md border border-slate-300 px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,tt.jsxs)("div",{className:"space-y-1",children:[(0,tt.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"Password"}),(0,tt.jsxs)("div",{className:"relative flex items-center",children:[(0,tt.jsx)("input",{type:l?"text":"password",value:s,onChange:e=>a(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full rounded-md border border-slate-300 px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),(0,tt.jsx)("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 text-slate-500 hover:text-slate-700 transition-colors",title:l?"Hide password":"Show password",children:l?(0,tt.jsx)(Xs,{size:18}):(0,tt.jsx)($s,{size:18})})]})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("label",{className:"flex items-center gap-2",children:[(0,tt.jsx)("input",{type:"checkbox",checked:i,onChange:e=>c(e.target.checked),className:"rounded border-slate-300"}),(0,tt.jsx)("span",{className:"text-sm text-slate-600",children:"Remember me"})]}),(0,tt.jsx)("a",{href:"#forgot",className:"text-sm text-emerald-600 hover:underline",children:"Forgot password?"})]}),(0,tt.jsx)("button",{type:"submit",disabled:m,className:"w-full rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500 transition disabled:opacity-50 disabled:cursor-not-allowed",children:m?"\ud83d\udd04 Signing in...":"\ud83d\udd10 Sign In"})]}),(0,tt.jsx)("button",{type:"button",onClick:()=>{e("/")},className:"w-full text-sm text-slate-600 hover:text-slate-900 transition",children:"\u2190 Back to Home"})]}),(0,tt.jsx)("p",{className:"text-center text-xs text-slate-400 mt-6",children:"SMD System \xa9 2025. All rights reserved."})]})})},Ys=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Zs=Je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ea=Je("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]),ta=Je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),na="/api/syllabuses",sa=async e=>{const t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.userId||t.id;if(!n)throw new Error("User not logged in");return Rs.post("".concat(na,"/").concat(e,"/follow"),{},{headers:{"X-User-Id":String(n)}})},aa=async e=>{const t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.userId||t.id;if(!n)throw new Error("User not logged in");return Rs.delete("".concat(na,"/").concat(e,"/follow"),{headers:{"X-User-Id":String(n)}})},ra=async e=>{const t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.userId||t.id;if(!n)return!1;try{const t=await Rs.get("".concat(na,"/").concat(e,"/is-following"),{headers:{"X-User-Id":String(n)}});return!0===t.data||"true"===t.data}catch(s){return console.warn("[studentAPI] Error checking follow status:",s),!1}},la=async()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=e.userId||e.id;if(!t)return console.warn("[studentAPI] User not logged in, returning empty array"),[];try{return(await Rs.get("".concat(na,"/my-followed"),{headers:{"X-User-Id":String(t)}})).data||[]}catch(n){return console.warn("[studentAPI] Error fetching followed syllabuses:",n),[]}},oa=()=>{const e=le(),[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[l,o]=(0,r.useState)([]),[i,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=localStorage.getItem("user");e&&n(JSON.parse(e)),m()},[]);const m=async()=>{try{u(!0);const e=await la();console.log("[StudentPage] Loaded followed syllabuses:",e),a(e);const t=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");o(t.slice(0,4)),c([{id:1,type:"update",title:"C\u1eadp nh\u1eadt gi\xe1o tr\xecnh",message:'Gi\xe1o tr\xecnh "L\u1eadp tr\xecnh h\u01b0\u1edbng \u0111\u1ed1i t\u01b0\u1ee3ng" \u0111\xe3 c\xf3 phi\xean b\u1ea3n m\u1edbi',time:"2 gi\u1edd tr\u01b0\u1edbc",read:!1},{id:2,type:"new",title:"Gi\xe1o tr\xecnh m\u1edbi",message:'Gi\xe1o tr\xecnh "C\u1ea5u tr\xfac d\u1eef li\u1ec7u" v\u1eeba \u0111\u01b0\u1ee3c xu\u1ea5t b\u1ea3n',time:"1 ng\xe0y tr\u01b0\u1edbc",read:!1},{id:3,type:"reminder",title:"Nh\u1eafc nh\u1edf",message:"B\u1ea1n c\xf3 3 gi\xe1o tr\xecnh \u0111ang theo d\xf5i",time:"2 ng\xe0y tr\u01b0\u1edbc",read:!0}])}catch(e){console.error("Error loading dashboard data:",e)}finally{u(!1)}},h=()=>{e("/public/search")},g=()=>{e("/student/followed")},p=i.filter(e=>!e.read).length;return d?(0,tt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"}),(0,tt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u0110ang t\u1ea3i b\u1ea3ng \u0111i\u1ec1u khi\u1ec3n..."})]})}):(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,tt.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200 sticky top-0 z-50",children:(0,tt.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-md",children:(0,tt.jsx)(at,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Student Dashboard"}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:"Qu\u1ea3n l\xfd gi\xe1o tr\xecnh c\u1ee7a b\u1ea1n"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsxs)("button",{onClick:()=>e("/"),className:"hidden md:flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition",children:[(0,tt.jsx)(Ge,{size:18}),(0,tt.jsx)("span",{className:"text-sm font-medium",children:"Trang ch\u1ee7"})]}),(0,tt.jsxs)("button",{onClick:()=>e("/student/profile"),className:"flex items-center gap-3 px-3 py-2 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:from-blue-50 hover:to-blue-100 hover:border-blue-300 transition-all cursor-pointer",children:[(0,tt.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:((null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.email)||"S")[0].toUpperCase()}),(0,tt.jsxs)("div",{className:"hidden md:block text-left",children:[(0,tt.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.name)||"Sinh vi\xean"}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:null===t||void 0===t?void 0:t.email})]})]}),(0,tt.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),e("/login")},className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-red-700 text-white px-4 py-2 rounded-lg hover:from-red-700 hover:to-red-800 transition-all shadow-md hover:shadow-lg font-medium text-sm",children:[(0,tt.jsx)(Qe,{size:18}),(0,tt.jsx)("span",{className:"hidden md:inline",children:"\u0110\u0103ng xu\u1ea5t"})]})]})]})})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 rounded-xl shadow-xl p-8 mb-8 text-white",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h2",{className:"text-3xl font-bold mb-2",children:["Xin ch\xe0o, ",(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.name)||"Sinh vi\xean","! \ud83d\udc4b"]}),(0,tt.jsxs)("p",{className:"text-blue-100",children:["Ch\xe0o m\u1eebng b\u1ea1n tr\u1edf l\u1ea1i. B\u1ea1n c\xf3 ",p," th\xf4ng b\xe1o m\u1edbi."]})]}),(0,tt.jsx)(Ys,{size:64,className:"text-blue-300 opacity-50 hidden md:block"})]})}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,tt.jsxs)("button",{onClick:h,className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 text-left group border border-gray-200 hover:border-blue-300",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,tt.jsx)(We,{size:24,className:"text-white"})}),(0,tt.jsx)(ct,{size:24,className:"text-gray-400 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"})]}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"T\xecm ki\u1ebfm gi\xe1o tr\xecnh"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Kh\xe1m ph\xe1 v\xe0 t\xecm ki\u1ebfm gi\xe1o tr\xecnh theo m\xf4n h\u1ecdc"})]}),(0,tt.jsxs)("button",{onClick:g,className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 text-left group border border-gray-200 hover:border-purple-300",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,tt.jsx)(Zs,{size:24,className:"text-white"})}),(0,tt.jsx)(ct,{size:24,className:"text-gray-400 group-hover:text-purple-600 group-hover:translate-x-1 transition-all"})]}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Gi\xe1o tr\xecnh \u0111ang theo d\xf5i"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Xem t\u1ea5t c\u1ea3 gi\xe1o tr\xecnh b\u1ea1n \u0111\xe3 theo d\xf5i"})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,tt.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:[(0,tt.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(it,{className:"text-yellow-500",size:24}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Gi\xe1o tr\xecnh \u0111ang theo d\xf5i"})]}),(0,tt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:s.length})]})}),(0,tt.jsx)("div",{className:"p-6",children:s.length>0?(0,tt.jsxs)("div",{className:"space-y-4",children:[s.slice(0,3).map((t,n)=>(0,tt.jsxs)("div",{onClick:()=>e("/public/syllabus/".concat(t.rootId)),className:"flex items-center gap-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg hover:shadow-md transition-all cursor-pointer border border-yellow-200 hover:border-yellow-300",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,tt.jsx)(ea,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:t.subjectName||t.name}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:t.subjectCode||t.code})]}),(0,tt.jsx)(ct,{size:20,className:"text-gray-400"})]},t.rootId||n)),s.length>3&&(0,tt.jsxs)("button",{onClick:g,className:"w-full py-2 text-blue-600 hover:text-blue-800 font-medium text-sm",children:["Xem t\u1ea5t c\u1ea3 (",s.length,")"]})]}):(0,tt.jsxs)("div",{className:"text-center py-8",children:[(0,tt.jsx)(it,{size:48,className:"mx-auto text-gray-300 mb-3"}),(0,tt.jsx)("p",{className:"text-gray-600 mb-4",children:"B\u1ea1n ch\u01b0a theo d\xf5i gi\xe1o tr\xecnh n\xe0o"}),(0,tt.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"T\xecm ki\u1ebfm gi\xe1o tr\xecnh"})]})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-200",children:[(0,tt.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(ot,{className:"text-blue-500",size:24}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Xem g\u1ea7n \u0111\xe2y"})]})}),(0,tt.jsx)("div",{className:"p-6",children:l.length>0?(0,tt.jsx)("div",{className:"space-y-4",children:l.map((t,n)=>(0,tt.jsxs)("div",{onClick:()=>e("/student/syllabus/".concat(t.id)),className:"flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg hover:shadow-md transition-all cursor-pointer border border-blue-200 hover:border-blue-300",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,tt.jsx)($s,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:t.name}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:t.viewedAt})]}),(0,tt.jsx)(ct,{size:20,className:"text-gray-400"})]},n))}):(0,tt.jsxs)("div",{className:"text-center py-8",children:[(0,tt.jsx)(ot,{size:48,className:"mx-auto text-gray-300 mb-3"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Ch\u01b0a c\xf3 l\u1ecbch s\u1eed xem gi\xe1o tr\xecnh"})]})})]})]}),(0,tt.jsx)("div",{className:"lg:col-span-1",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 sticky top-24",children:[(0,tt.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(ta,{className:"text-red-500",size:24}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Th\xf4ng b\xe1o"})]}),p>0&&(0,tt.jsx)("span",{className:"px-2 py-1 bg-red-500 text-white rounded-full text-xs font-bold",children:p})]})}),(0,tt.jsx)("div",{className:"p-4 max-h-96 overflow-y-auto",children:i.length>0?(0,tt.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,tt.jsx)("div",{className:"p-4 rounded-lg border transition-all cursor-pointer ".concat(e.read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200 hover:bg-blue-100"),children:(0,tt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,tt.jsx)("div",{className:"w-2 h-2 rounded-full mt-2 ".concat(e.read?"bg-gray-400":"bg-blue-600")}),(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:e.title}),(0,tt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.message}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]})]})},e.id))}):(0,tt.jsxs)("div",{className:"text-center py-8",children:[(0,tt.jsx)(ta,{size:48,className:"mx-auto text-gray-300 mb-3"}),(0,tt.jsx)("p",{className:"text-gray-600 text-sm",children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o m\u1edbi"})]})})]})})]})]})]})},ia=Je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ca=Je("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),da="/api/v1/syllabus",ua=()=>{const e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}},ma={getAllPrograms:async()=>{try{var e;const t=await Ds.get("".concat(da,"/programs/all"),{headers:ua()}),n=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data;return Array.isArray(n)?n:[]}catch(t){return console.error("Error fetching programs:",t.message),[]}},getPublishedSyllabuses:async function(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var t;let n="".concat(da,"/published");e&&(n+="?programName=".concat(encodeURIComponent(e)));const s=await Ds.get(n,{headers:ua()}),a=(null===(t=s.data)||void 0===t?void 0:t.data)||s.data;return Array.isArray(a)?a:[a]}catch(n){throw console.error("Error fetching published syllabuses:",n.message),n}},getSyllabusById:async e=>{try{var t;const n=await Ds.get("".concat(da,"/").concat(e),{headers:ua()});return(null===(t=n.data)||void 0===t?void 0:t.data)||n.data}catch(n){throw console.error("Error fetching syllabus:",n.message),n}},getSyllabusesbySubject:async e=>{try{var t;const n=await Ds.get("".concat(da,"/subject/").concat(e),{headers:ua()}),s=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data;return Array.isArray(s)?s:[s]}catch(n){throw console.error("Error fetching syllabuses by subject:",n.message),n}},searchSyllabuses:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n;const s=await Ds.get("".concat(da,"/search"),{params:He({keyword:e},t),headers:ua()}),a=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data;return Array.isArray(a)?a:[a]}catch(s){throw console.error("Error searching syllabuses:",s.message),s}},getSyllabusDocuments:async e=>{try{var t;const n=await Ds.get("".concat(da,"/").concat(e,"/documents"),{headers:ua()});return(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[]}catch(n){return console.warn("Error fetching syllabus documents:",n.message),[]}},getAllApprovedSyllabuses:async()=>{try{var e;const t=await Ds.get("".concat(da,"/status/APPROVED"),{headers:ua()}),n=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data;return Array.isArray(n)?n:[]}catch(t){return console.error("Error fetching APPROVED syllabuses:",t.message),[]}}},ha=ma,ga=()=>{const{id:e}=oe(),t=le(),[n,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)([]),[p,x]=(0,r.useState)("overview");(0,r.useEffect)(()=>{f(),y()},[e]),(0,r.useEffect)(()=>{n&&(v(),b())},[n]);const f=async()=>{try{l(!0);const t=await ha.getSyllabusById(e);s(t.data)}catch(t){console.error("Error loading syllabus:",t)}finally{l(!1)}},b=async()=>{try{const t=(null===n||void 0===n?void 0:n.rootId)||e,s=await ra(t);i(s)}catch(t){console.warn("Could not check follow status:",t);const n=JSON.parse(localStorage.getItem("followedSyllabuses")||"[]").some(t=>t.id===e);i(n)}},y=()=>{g([{id:1,type:"update",message:"Phi\xean b\u1ea3n 2.0 \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t b\u1ea3n",date:"2024-01-20"},{id:2,type:"change",message:"C\u1eadp nh\u1eadt n\u1ed9i dung ch\u01b0\u01a1ng 3",date:"2024-01-15"},{id:3,type:"new",message:"T\xe0i li\u1ec7u tham kh\u1ea3o m\u1edbi \u0111\u01b0\u1ee3c th\xeam",date:"2024-01-10"}])},v=()=>{const t=JSON.parse(localStorage.getItem("recentlyViewed")||"[]"),s={id:e,name:(null===n||void 0===n?void 0:n.subject_name)||"Gi\xe1o tr\xecnh",viewedAt:(new Date).toLocaleString("vi-VN")},a=t.filter(t=>t.id!==e);a.unshift(s),localStorage.setItem("recentlyViewed",JSON.stringify(a.slice(0,10)))},j=[{id:"overview",label:"T\u1ed5ng quan",icon:at},{id:"clo-plo",label:"CLO-PLO",icon:it},{id:"assessment",label:"\u0110\xe1nh gi\xe1",icon:ea},{id:"materials",label:"T\xe0i li\u1ec7u",icon:ia}];return a?(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"}),(0,tt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u0110ang t\u1ea3i gi\xe1o tr\xecnh..."})]})}):n?(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,tt.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:(0,tt.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("button",{onClick:()=>t("/student"),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 transition",children:[(0,tt.jsx)(_s,{size:20}),(0,tt.jsx)("span",{className:"font-medium",children:"V\u1ec1 Dashboard"})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsxs)("button",{onClick:async()=>{const t=(null===n||void 0===n?void 0:n.rootId)||e;d(!0);try{if(o){await aa(t),i(!1);const n=JSON.parse(localStorage.getItem("followedSyllabuses")||"[]").filter(t=>t.id!==e);localStorage.setItem("followedSyllabuses",JSON.stringify(n))}else{await sa(t),i(!0);const s=JSON.parse(localStorage.getItem("followedSyllabuses")||"[]"),a={id:e,rootId:t,name:(null===n||void 0===n?void 0:n.subject_name)||(null===n||void 0===n?void 0:n.subjectName)||"Gi\xe1o tr\xecnh",code:(null===n||void 0===n?void 0:n.subject_code)||(null===n||void 0===n?void 0:n.subjectCode)||"N/A",followedAt:(new Date).toISOString()};s.push(a),localStorage.setItem("followedSyllabuses",JSON.stringify(s))}}catch(s){console.error("Error toggling follow:",s),alert("Kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao t\xe1c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{d(!1)}},disabled:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all shadow-md ".concat(o?"bg-gradient-to-r from-pink-500 to-pink-600 text-white hover:from-pink-600 hover:to-pink-700":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800"," ").concat(c?"opacity-50 cursor-not-allowed":""),children:[c?(0,tt.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,tt.jsx)(Zs,{size:18,className:o?"fill-current":""}),(0,tt.jsx)("span",{children:o?"\u0110ang theo d\xf5i":"Theo d\xf5i"})]}),(0,tt.jsxs)("button",{onClick:()=>m(!u),className:"relative flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition font-medium",children:[(0,tt.jsx)(ta,{size:18}),(0,tt.jsx)("span",{className:"hidden md:inline",children:"L\u1ecbch s\u1eed th\xf4ng b\xe1o"}),(0,tt.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:h.length})]})]})]})})}),u&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>m(!1),children:(0,tt.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full md:w-96 bg-white shadow-xl overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,tt.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"L\u1ecbch s\u1eed th\xf4ng b\xe1o"}),(0,tt.jsx)("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]})}),(0,tt.jsx)("div",{className:"p-4 space-y-3",children:h.map(e=>(0,tt.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,tt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,tt.jsx)(ta,{size:20,className:"text-blue-600 mt-1 flex-shrink-0"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:e.message}),(0,tt.jsx)("p",{className:"text-xs text-gray-600",children:e.date})]})]})},e.id))})]})}),(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 text-white py-12",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-blue-200 text-sm",children:[(0,tt.jsx)("span",{children:"Trang ch\u1ee7"}),(0,tt.jsx)(ct,{size:16}),(0,tt.jsx)("span",{children:"Gi\xe1o tr\xecnh"}),(0,tt.jsx)(ct,{size:16}),(0,tt.jsx)("span",{className:"text-white",children:n.subject_code})]}),(0,tt.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,tt.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-xl flex items-center justify-center backdrop-blur",children:(0,tt.jsx)(at,{size:32})}),(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("h1",{className:"text-4xl font-bold mb-2",children:n.subject_name}),(0,tt.jsx)("p",{className:"text-blue-100 text-lg mb-4",children:n.subject_code}),(0,tt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-2 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur",children:[(0,tt.jsx)(ea,{size:16}),(0,tt.jsxs)("span",{className:"text-sm",children:[n.credits||3," t\xedn ch\u1ec9"]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-2 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur",children:[(0,tt.jsx)($e,{size:16}),(0,tt.jsxs)("span",{className:"text-sm",children:["GV: ",n.created_by||"N/A"]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-2 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur",children:[(0,tt.jsx)(Ms,{size:16}),(0,tt.jsxs)("span",{className:"text-sm",children:["N\u0103m: ",n.academic_year||"N/A"]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-2 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur",children:[(0,tt.jsx)(ca,{size:16}),(0,tt.jsxs)("span",{className:"text-sm",children:["H\u1ecdc k\u1ef3: ",n.semester||"N/A"]})]})]})]})]})]})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md mb-6 overflow-hidden",children:[(0,tt.jsx)("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:j.map(e=>(0,tt.jsxs)("button",{onClick:()=>x(e.id),className:"flex items-center gap-2 px-6 py-4 font-medium transition-all whitespace-nowrap ".concat(p===e.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,tt.jsx)(e.icon,{size:18}),(0,tt.jsx)("span",{children:e.label})]},e.id))}),(0,tt.jsxs)("div",{className:"p-8",children:["overview"===p&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"T\u1ed5ng quan"}),(0,tt.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:n.summary||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"}),(0,tt.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Th\xf4ng tin chi ti\u1ebft"}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(ea,{className:"text-blue-600",size:20}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"S\u1ed1 t\xedn ch\u1ec9"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:n.credits||3})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(ot,{className:"text-green-600",size:20}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Phi\xean b\u1ea3n"}),(0,tt.jsxs)("p",{className:"font-semibold text-gray-900",children:["v",n.version_no||"1.0"]})]})]})]})]})]}),"clo-plo"===p&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Chu\u1ea9n \u0111\u1ea7u ra (CLO-PLO)"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"N\u1ed9i dung CLO-PLO s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."})]}),"assessment"===p&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"N\u1ed9i dung \u0111\xe1nh gi\xe1 s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."})]}),"materials"===p&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"T\xe0i li\u1ec7u tham kh\u1ea3o"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Danh s\xe1ch t\xe0i li\u1ec7u s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."})]})]})]}),(0,tt.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[(0,tt.jsx)(ta,{className:"text-yellow-600 flex-shrink-0 mt-1",size:20}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-semibold text-yellow-900 mb-1",children:"L\u01b0u \xfd"}),(0,tt.jsx)("p",{className:"text-sm text-yellow-800",children:"\u0110\xe2y l\xe0 ch\u1ebf \u0111\u1ed9 xem d\xe0nh cho sinh vi\xean. B\u1ea1n c\xf3 th\u1ec3 theo d\xf5i gi\xe1o tr\xecnh \u0111\u1ec3 nh\u1eadn th\xf4ng b\xe1o v\u1ec1 c\xe1c c\u1eadp nh\u1eadt m\u1edbi."})]})]})]})]}):(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)(at,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh"}),(0,tt.jsx)("button",{onClick:()=>t("/student"),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"V\u1ec1 Dashboard"})]})})},pa=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xa=Je("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),fa=Je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ba=Je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ya=Je("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),va=()=>{const e=le(),[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)({fullName:"",email:"",phoneNumber:""}),[i,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);n(t),o({fullName:t.fullName||t.name||"",email:t.email||"",phoneNumber:t.phoneNumber||""})}const t=JSON.parse(localStorage.getItem("followedSyllabuses")||"[]"),s=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");c(t.length),u(s.length)},[]);return t?(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,tt.jsx)("div",{className:"bg-white shadow-md border-b border-gray-200",children:(0,tt.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,tt.jsxs)("button",{onClick:()=>e("/student"),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 transition",children:[(0,tt.jsx)(_s,{size:20}),(0,tt.jsx)("span",{className:"font-medium",children:"V\u1ec1 Dashboard"})]})})}),(0,tt.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,tt.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 px-8 py-12 text-white",children:(0,tt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,tt.jsx)("div",{className:"w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur border-4 border-white",children:(0,tt.jsx)("span",{className:"text-4xl font-bold",children:(t.fullName||t.name||t.email||"S")[0].toUpperCase()})}),(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold mb-2",children:t.fullName||t.name||"Sinh vi\xean"}),(0,tt.jsxs)("p",{className:"text-blue-100 flex items-center gap-2",children:[(0,tt.jsx)(pa,{size:16}),t.email]})]}),(0,tt.jsx)("button",{onClick:()=>a(!s),className:"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition font-medium flex items-center gap-2",children:s?(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(Ze,{size:18}),(0,tt.jsx)("span",{className:"hidden md:inline",children:"H\u1ee7y"})]}):(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(xa,{size:18}),(0,tt.jsx)("span",{className:"hidden md:inline",children:"Ch\u1ec9nh s\u1eeda"})]})})]})}),(0,tt.jsxs)("div",{className:"p-8",children:[(0,tt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),s?(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"H\u1ecd v\xe0 t\xean"}),(0,tt.jsx)("input",{type:"text",value:l.fullName,onChange:e=>o(He(He({},l),{},{fullName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,tt.jsx)("input",{type:"email",value:l.email,onChange:e=>o(He(He({},l),{},{email:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,tt.jsx)("input",{type:"tel",value:l.phoneNumber,onChange:e=>o(He(He({},l),{},{phoneNumber:e.target.value})),placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,tt.jsxs)("div",{className:"flex gap-3",children:[(0,tt.jsxs)("button",{onClick:()=>{const e=He(He({},t),{},{name:l.fullName,fullName:l.fullName,email:l.email,phoneNumber:l.phoneNumber});console.log("[StudentProfile] Saving user data:",e),localStorage.setItem("user",JSON.stringify(e)),n(e),a(!1),alert("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!")},className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg font-medium",children:[(0,tt.jsx)(fa,{size:20}),"L\u01b0u thay \u0111\u1ed5i"]}),(0,tt.jsx)("button",{onClick:()=>{o({fullName:(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",phoneNumber:(null===t||void 0===t?void 0:t.phoneNumber)||""}),a(!1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"H\u1ee7y"})]})]}):(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsx)($e,{className:"text-blue-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"H\u1ecd v\xe0 t\xean"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:t.fullName||t.name||"Ch\u01b0a c\u1eadp nh\u1eadt"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsx)(pa,{className:"text-green-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:t.email})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsx)(ba,{className:"text-purple-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:t.phoneNumber||"Ch\u01b0a c\u1eadp nh\u1eadt"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsx)(Ms,{className:"text-orange-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Vai tr\xf2"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"Sinh vi\xean"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsx)(at,{className:"text-indigo-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Ng\xe0nh"}),(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:t.major||"Ch\u01b0a c\u1eadp nh\u1eadt"})]})]})]})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,tt.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center",children:(0,tt.jsx)(Zs,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110ang theo d\xf5i"}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]})}),(0,tt.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-lg flex items-center justify-center",children:(0,tt.jsx)(ot,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110\xe3 xem"}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d})]})]})}),(0,tt.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-lg flex items-center justify-center",children:(0,tt.jsx)(ya,{size:24,className:"text-white"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110i\u1ec3m ho\u1ea1t \u0111\u1ed9ng"}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,tt.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,tt.jsx)(ta,{className:"text-blue-600",size:24}),"Ho\u1ea1t \u0111\u1ed9ng g\u1ea7n \u0111\xe2y"]}),(0,tt.jsxs)("div",{className:"text-center py-8",children:[(0,tt.jsx)(at,{size:48,className:"mx-auto text-gray-300 mb-3"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Ch\u01b0a c\xf3 ho\u1ea1t \u0111\u1ed9ng n\xe0o"})]})]})]})})]}):(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)($e,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp"})]})})},ja=e=>{let{user:t,onLogout:n}=e;return(0,tt.jsxs)("div",{className:"p-6",children:[(0,tt.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),(0,tt.jsxs)("p",{className:"mt-2 text-gray-700",children:["Welcome, ",(null===t||void 0===t?void 0:t.name)||"Admin"]}),(0,tt.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,tt.jsxs)(Re,{to:"/admin/users",className:"border rounded p-4 hover:bg-gray-50",children:[(0,tt.jsx)("h3",{className:"font-semibold",children:"User Management"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"T\u1ea1o/Import ng\u01b0\u1eddi d\xf9ng, RBAC, kh\xf3a/m\u1edf, reset m\u1eadt kh\u1ea9u"})]}),(0,tt.jsxs)(Re,{to:"/admin/system",className:"border rounded p-4 hover:bg-gray-50",children:[(0,tt.jsx)("h3",{className:"font-semibold",children:"System Configuration"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"N\u0103m h\u1ecdc, h\u1ecdc k\u1ef3, khoa/b\u1ed9 m\xf4n, workflow, templates"})]}),(0,tt.jsxs)(Re,{to:"/admin/publishing",className:"border rounded p-4 hover:bg-gray-50",children:[(0,tt.jsx)("h3",{className:"font-semibold",children:"Publishing Management"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Publish/Unpublish/Archive, ng\xe0y hi\u1ec7u l\u1ef1c, phi\xean b\u1ea3n"})]}),(0,tt.jsxs)(Re,{to:"/admin/audit",className:"border rounded p-4 hover:bg-gray-50",children:[(0,tt.jsx)("h3",{className:"font-semibold",children:"Audit & Monitoring"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Log \u0111\u0103ng nh\u1eadp, ch\u1ec9nh s\u1eeda, duy\u1ec7t; xu\u1ea5t b\xe1o c\xe1o"})]})]}),(0,tt.jsx)("button",{onClick:n,className:"mt-6 px-4 py-2 bg-red-600 text-white rounded",children:"Logout"})]})},Na=Je("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),wa=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Sa=Je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ka=Je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ca={getPendingForReview:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"PENDING_REVIEW",size:100})});console.log("[syllabusApprovalService] getPendingForReview response:",t.data);const n=t.data;let s=[];return n?(Array.isArray(n)?s=n:n.content&&Array.isArray(n.content)?s=n.content:n.data&&Array.isArray(n.data)?s=n.data:n.data&&n.data.content&&Array.isArray(n.data.content)?s=n.data.content:n._embedded&&Array.isArray(n._embedded.syllabuses)?s=n._embedded.syllabuses:Array.isArray(n.items)?s=n.items:Array.isArray(n.results)&&(s=n.results),s.length>0?(console.log("[syllabusApprovalService] Parsed items count:",s.length),s):(console.warn("[syllabusApprovalService] No items parsed from response:",n),[])):[]}catch(t){throw console.error("Error fetching pending for review:",t),t}},getPendingForApproval:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"PENDING_APPROVAL",size:100})});console.log("[syllabusApprovalService] getPendingForApproval response:",t.data);const n=t.data;let s=[];return n?(Array.isArray(n)?s=n:n.content&&Array.isArray(n.content)?s=n.content:n.data&&Array.isArray(n.data)?s=n.data:n.data&&n.data.content&&Array.isArray(n.data.content)?s=n.data.content:n._embedded&&Array.isArray(n._embedded.syllabuses)?s=n._embedded.syllabuses:Array.isArray(n.items)?s=n.items:Array.isArray(n.results)&&(s=n.results),s.length>0?(console.log("[syllabusApprovalService] Parsed items count:",s.length),s):(console.warn("[syllabusApprovalService] No items parsed from response:",n),[])):[]}catch(t){throw console.error("Error fetching pending for approval:",t),t}},getDetails:async e=>{try{const t=await Rs.get("/api/syllabuses/".concat(e));return console.log("[syllabusApprovalService] getDetails response for id",e,":",t.data),t.data}catch(t){throw console.error("Error fetching syllabus details:",t),t}},getVersionHistory:async e=>{try{return await Rs.get("/api/syllabuses/".concat(e,"/versions"))}catch(t){throw console.error("Error fetching version history:",t),t}},reviewApprove:async(e,t)=>{try{return await Rs.post("/api/syllabuses/".concat(e,"/review-approve"),{},{headers:{"X-User-Id":t}})}catch(n){throw console.error("Error in review-approve:",n),n}},approve:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return await Rs.post("/api/syllabuses/".concat(e,"/approve"),{comment:n},{headers:{"X-User-Id":t}})}catch(s){throw console.error("Error in approve:",s),s}},reject:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return await Rs.post("/api/syllabuses/".concat(e,"/reject"),{reason:n},{headers:{"X-User-Id":t}})}catch(s){throw console.error("Error in reject:",s),s}},publish:async(e,t)=>{try{return await Rs.post("/api/syllabuses/".concat(e,"/publish"),{},{headers:{"X-User-Id":t}})}catch(n){throw console.error("Error in publish:",n),n}},revise:async(e,t)=>{try{return await Rs.post("/api/syllabuses/".concat(e,"/revise"),{},{headers:{"X-User-Id":t}})}catch(n){throw console.error("Error in revise:",n),n}},getApproved:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"APPROVED",size:e.size||100})});return console.log("[syllabusApprovalService] getApproved response:",t.data),t}catch(t){throw console.error("Error fetching approved syllabuses:",t),t}},getDraft:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"DRAFT",size:e.size||100})});return console.log("[syllabusApprovalService] getDraft response:",t.data),t}catch(t){throw console.error("Error fetching draft syllabuses:",t),t}},getReview:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"REVIEW",size:e.size||100})});return console.log("[syllabusApprovalService] getReview response:",t.data),t}catch(t){throw console.error("Error fetching review syllabuses:",t),t}},getRejected:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{status:"REJECTED",size:e.size||100})});return console.log("[syllabusApprovalService] getRejected response:",t.data),t}catch(t){throw console.error("Error fetching rejected syllabuses:",t),t}},getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await Rs.get("/api/syllabuses",{params:He(He({},e),{},{size:e.size||100})});return console.log("[syllabusApprovalService] getAll response:",t.data),t}catch(t){throw console.error("Error fetching all syllabuses:",t),t}}},Ea=Ca,Ia={getSyllabuses:()=>Rs.get("/api/v1/syllabus"),getSyllabusById:e=>Rs.get("/api/v1/syllabus/".concat(e)),getSyllabusesBySubject:e=>Rs.get("/api/v1/syllabus/subject/".concat(e)),getSyllabusesByStatus:e=>Rs.get("/api/v1/syllabus/status/".concat(e)),getSyllabusesByApprovalStatus:e=>Rs.get("/api/v1/syllabus/approval-status/".concat(e)),getSyllabusesByProgram:e=>Rs.get("/api/v1/syllabus/program/".concat(e)),createSyllabus:e=>Rs.post("/api/v1/syllabus",e),updateSyllabus:(e,t)=>Rs.put("/api/v1/syllabus/".concat(e),t),updateApprovalStatus:(e,t,n,s)=>Rs.patch("/api/v1/syllabus/".concat(e,"/approve"),null,{params:{approvalStatus:t,approvedBy:n,comments:s}}),deleteSyllabus:e=>Rs.delete("/api/v1/syllabus/".concat(e)),validateForApproval:e=>Rs.get("/api/v1/syllabus/".concat(e,"/validate-approval")),validatePrerequisites:e=>Rs.get("/api/v1/syllabus/".concat(e,"/validate-prerequisites")),getVersionHistory:e=>Rs.get("/api/v1/syllabus/".concat(e,"/versions")),getVersion:(e,t)=>Rs.get("/api/v1/syllabus/".concat(e,"/versions/").concat(t)),getLatestVersion:e=>Rs.get("/api/v1/syllabus/".concat(e,"/versions/latest")),compareVersions:(e,t,n)=>Rs.get("/api/v1/syllabus/".concat(e,"/compare"),{params:{version1:t,version2:n}}),getPrograms:()=>Rs.get("/api/academic/program"),getProgramById:e=>Rs.get("/api/academic/program/".concat(e)),getProgramByCode:e=>Rs.get("/api/academic/program/code/".concat(e)),getProgramsByDepartment:e=>Rs.get("/api/academic/program/department/".concat(e)),searchPrograms:e=>Rs.get("/api/academic/program/search",{params:{name:e}}),createProgram:e=>Rs.post("/api/academic/program",e),updateProgram:(e,t)=>Rs.put("/api/academic/program/".concat(e),t),deleteProgram:e=>Rs.delete("/api/academic/program/".concat(e)),getCurriculumTree:e=>Rs.get("/api/academic/program/".concat(e,"/curriculum")),getDashboardStats:e=>Rs.get("/api/academic/program/".concat(e,"/dashboard")),getSubjects:()=>Rs.get("/api/academic/subject"),getSubjectById:e=>Rs.get("/api/academic/subject/".concat(e)),getSubjectsByProgram:e=>Rs.get("/api/academic/subject/program/".concat(e)),getSubjectsByProgramAndSemester:(e,t)=>Rs.get("/api/academic/subject/program/".concat(e,"/semester/").concat(t)),createSubject:e=>Rs.post("/api/academic/subject",e),updateSubject:(e,t)=>Rs.put("/api/academic/subject/".concat(e),t),deleteSubject:e=>Rs.delete("/api/academic/subject/".concat(e)),getCloById:e=>Rs.get("/api/academic/clo/".concat(e)),getClosBySubject:e=>Rs.get("/api/academic/clo/subject/".concat(e)),getClosBySyllabus:e=>Rs.get("/api/academic/clo/syllabus/".concat(e)),getAllClos:()=>Rs.get("/api/academic/clo"),searchClos:e=>Rs.get("/api/academic/clo/search",{params:{code:e}}),getPlos:()=>Rs.get("/api/academic/plo"),getPloById:e=>Rs.get("/api/academic/plo/".concat(e)),getPlosByProgram:e=>Rs.get("/api/academic/plo/program/".concat(e)),searchPlos:e=>Rs.get("/api/academic/plo/search",{params:{code:e}}),createPlo:e=>Rs.post("/api/academic/plo",e),updatePlo:(e,t)=>Rs.put("/api/academic/plo/".concat(e),t),deletePlo:e=>Rs.delete("/api/academic/plo/".concat(e)),getMappingById:e=>Rs.get("/api/academic/mapping/".concat(e)),getMappingsByClo:e=>Rs.get("/api/academic/mapping/clo/".concat(e)),getMappingsByPlo:e=>Rs.get("/api/academic/mapping/plo/".concat(e)),getMappingsByProgram:e=>Rs.get("/api/academic/mapping/program/".concat(e)),getAllMappings:()=>Rs.get("/api/academic/mapping"),createMapping:e=>Rs.post("/api/academic/mapping",e),updateMapping:(e,t)=>Rs.put("/api/academic/mapping/".concat(e),t),deleteMapping:e=>Rs.delete("/api/academic/mapping/".concat(e))},Pa=Ia,La="/api/ai",Oa={ingestDocument:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const a=new FormData;return a.append("file",e),a.append("syllabus_id",t),n&&a.append("subject_name",n),s&&a.append("document_id",s),Rs.post("".concat(La,"/documents/ingest"),a,{headers:{"Content-Type":"multipart/form-data"}})},generateDocumentSummary:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MEDIUM";return Rs.post("".concat(La,"/summary"),{syllabusId:e,documentId:t,length:n})},generateSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MEDIUM";return Rs.post("".concat(La,"/summary"),{syllabusId:e,length:t})},getJobStatus:async e=>{const t=await Rs.get("".concat(La,"/jobs/").concat(e));return console.log("[aiService] getJobStatus(".concat(e,") full response:"),t),console.log("[aiService] getJobStatus(".concat(e,") response.data:"),t.data),t.data||t},getSummaryResult:async e=>{try{const t=await Oa.getJobStatus(e),n=t.data||t;return"SUCCEEDED"===n.status&&n.result?n.result:null}catch(t){return console.error("[aiService] getSummaryResult error:",t),null}},cancelJob:async e=>Rs.post("".concat(La,"/jobs/").concat(e,"/cancel")),searchDocuments:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n={query:e,limit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:5};return t&&(n.syllabus_id=t),Rs.get("".concat(La,"/documents/search"),{params:n})},getCollections:async()=>Rs.get("".concat(La,"/documents/collections")),deleteDocuments:async e=>Rs.delete("".concat(La,"/documents/").concat(e)),saveDocumentJobId:async(e,t)=>Rs.put("/api/syllabus/documents/".concat(e,"/update-job-id"),{jobId:t}),saveDocumentJobIdImmediately:async(e,t)=>{try{console.log("[aiService] Calling saveDocumentJobId(documentId=".concat(e,", jobId=").concat(t,")"));const n=await Oa.saveDocumentJobId(e,t);return console.log("[aiService] \u2705 SAVED - jobId saved to database, response:",n),n}catch(n){throw console.error("[aiService] \u274c ERROR - Failed to save jobId:",n),n}},checkCLOPLOConsistency:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Rs.post("".concat(La,"/clo-check"),{syllabusId:e,cloList:t,ploList:n,mapping:s})}},Ta=Oa,Da=Je("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Aa=Je("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function Ra(e){let{document:t,onClose:n}=e;const[s,a]=(0,r.useState)(null),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{null!==t&&void 0!==t&&t.aiIngestionJobId&&d()},[t]);const d=async()=>{if(null!==t&&void 0!==t&&t.aiIngestionJobId){o(!0),c(null);try{console.log("[DocumentSummaryModal] Checking job status for jobId:",t.aiIngestionJobId);const e=await Ta.getJobStatus(t.aiIngestionJobId),n=e.data||e;console.log("[DocumentSummaryModal] Job response:",n);const s=(n.status||"").toUpperCase();"SUCCEEDED"===s&&n.result?(console.log("[DocumentSummaryModal] Summary loaded:",n.result),a(n.result)):c("QUEUED"===s||"RUNNING"===s?"T\xf3m t\u1eaft \u0111ang \u0111\u01b0\u1ee3c t\u1ea1o (tr\u1ea1ng th\xe1i: ".concat(n.status,"). Vui l\xf2ng ch\u1edd m\u1ed9t l\xe1t r\u1ed3i th\u1eed l\u1ea1i."):"FAILED"===s?"T\xf3m t\u1eaft th\u1ea5t b\u1ea1i: ".concat(n.error||"L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh"):"Kh\xf4ng th\u1ec3 t\u1ea3i t\xf3m t\u1eaft - tr\u1ea1ng th\xe1i kh\xf4ng x\xe1c \u0111\u1ecbnh: ".concat(n.status))}catch(e){console.error("[DocumentSummaryModal] Load summary error:",e),c("L\u1ed7i khi t\u1ea3i t\xf3m t\u1eaft: "+e.message)}finally{o(!1)}}};return(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 px-6 py-4 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(Da,{className:"text-blue-600",size:24}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"T\xf3m t\u1eaft t\xe0i li\u1ec7u"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:null===t||void 0===t?void 0:t.originalName})]})]}),(0,tt.jsx)("button",{onClick:n,className:"p-2 hover:bg-blue-100 rounded-lg text-gray-500",children:(0,tt.jsx)(Ze,{size:20})})]}),(0,tt.jsxs)("div",{className:"p-6",children:[l&&(0,tt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)(Aa,{className:"mx-auto mb-3 text-blue-600 animate-spin",size:32}),(0,tt.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i t\xf3m t\u1eaft..."})]})}),i&&(0,tt.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,tt.jsx)(Na,{className:"text-red-600 flex-shrink-0",size:20}),(0,tt.jsx)("span",{className:"text-red-800",children:i})]}),i.includes("\u0111ang \u0111\u01b0\u1ee3c t\u1ea1o")&&(0,tt.jsx)("button",{onClick:d,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Th\u1eed l\u1ea1i"})]}),!l&&!i&&s&&(0,tt.jsxs)("div",{className:"space-y-6",children:[s.summary&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"T\xf3m t\u1eaft ch\xednh"}),(0,tt.jsx)("p",{className:"text-gray-700 leading-relaxed text-justify whitespace-pre-wrap",children:s.summary})]}),s.bullets&&s.bullets.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"\u0110i\u1ec3m ch\xednh"}),(0,tt.jsx)("ul",{className:"space-y-2",children:s.bullets.map((e,t)=>(0,tt.jsxs)("li",{className:"flex gap-3",children:[(0,tt.jsx)("span",{className:"text-blue-600 font-bold flex-shrink-0",children:"\u2022"}),(0,tt.jsx)("span",{className:"text-gray-700",children:e})]},t))})]}),s.keywords&&s.keywords.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"T\u1eeb kh\xf3a"}),(0,tt.jsx)("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((e,t)=>(0,tt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:e},t))})]}),s.targetAudience&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83d\udc65 \u0110\u1ed1i t\u01b0\u1ee3ng h\u1ecdc"}),(0,tt.jsx)("p",{className:"text-gray-700",children:s.targetAudience})]}),s.prerequisites&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\ud83d\udcda \u0110i\u1ec1u ki\u1ec7n ti\xean quy\u1ebft"}),(0,tt.jsx)("p",{className:"text-gray-700",children:s.prerequisites})]})]}),!l&&!i&&!s&&(0,tt.jsxs)("div",{className:"text-center py-12",children:[(0,tt.jsx)(Na,{className:"mx-auto mb-3 text-gray-400",size:32}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u t\xf3m t\u1eaft"})]})]}),(0,tt.jsx)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:(0,tt.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"\u0110\xf3ng"})})]})})}const za=Je("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_a=e=>{let{cloIds:t}=e;const[n,s]=(0,r.useState)({}),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if((t?t.sort().join(","):"")===o.sort().join(",")&&Object.keys(n).length>0)return void l(!1);t&&t.length>0?(async()=>{l(!0);const e={};for(const s of t||[])try{var n;const t=await Js.getCLOById(s),l=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||t;let o=[];try{var a;const e=((null===(a=(await Rs.get("/api/v1/mapping/clo/".concat(s))).data)||void 0===a?void 0:a.data)||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);o=await Promise.all(e.map(e=>Rs.get("/api/v1/plo/".concat(e)).then(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)||e.data}).catch(()=>null))),o=o.filter(Boolean)}catch(r){console.warn("Failed to fetch PLO mappings for CLO ".concat(s,":"),r)}e[s]=He(He({},l),{},{mappedPlos:o})}catch(o){console.error("Failed to fetch CLO ".concat(s,":"),o),e[s]={id:s,cloCode:"CLO-".concat(s),description:"Kh\xf4ng th\u1ec3 t\u1ea3i",mappedPlos:[]}}s(e),i(t||[]),l(!1)})():l(!1)},[t,o,n]),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["CLO li\xean k\u1ebft (",(null===t||void 0===t?void 0:t.length)||0,")"]}),a?(0,tt.jsx)("div",{className:"text-gray-600 text-sm py-2",children:"\u0110ang t\u1ea3i th\xf4ng tin CLO..."}):(0,tt.jsx)("div",{className:"space-y-3",children:(t||[]).map(e=>{const t=n[e],s=(null===t||void 0===t?void 0:t.cloCode)||(null===t||void 0===t?void 0:t.name)||"CLO-".concat(e),a=(null===t||void 0===t?void 0:t.description)||"",r=(null===t||void 0===t?void 0:t.mappedPlos)||[];return(0,tt.jsxs)("div",{className:"bg-white border border-indigo-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("div",{className:"font-semibold text-indigo-900",children:s}),a&&(0,tt.jsx)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:a}),(null===t||void 0===t?void 0:t.level)&&(0,tt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Level: ",t.level]})]}),(0,tt.jsxs)("span",{className:"ml-2 bg-indigo-100 text-indigo-800 px-3 py-1 rounded text-xs font-medium whitespace-nowrap flex-shrink-0",children:["#",e]})]}),r&&r.length>0&&(0,tt.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-100",children:[(0,tt.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"PLO li\xean k\u1ebft:"}),(0,tt.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-purple-50 border border-purple-200 rounded p-2",children:[(0,tt.jsx)("p",{className:"font-medium text-purple-700",children:e.ploCode||e.code||"PLO"}),(0,tt.jsx)("p",{className:"text-purple-600 mt-0.5",children:e.description||e.ploName||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]},t))})]})]},e)})})]})},Ma=e=>{var t,n,s,a;let{isOpen:l,onClose:o,syllabusDetailData:i,syllabusDetailLoading:c,syllabusDetailDocuments:d,syllabusDetailDocumentsLoading:u,documentSummaries:m,documentSummarizingId:h,cloCheckLoading:g,cloCheckHistory:p,handleViewSyllabusDetail:x,handleCheckCLOPLOConsistency:f,handleViewCLOCheckHistory:b,handleClearCLOCheckHistory:y,handleViewPreviousCLOCheckResult:v,handleViewDocument:j,generateDocumentSummary:N,handleQuickAddDocument:w,setShowDocumentSummaryModal:S,setSelectedDocumentForSummary:k,showToast:C}=e;const[E,I]=(0,r.useState)(!1),[P,L]=(0,r.useState)(null),[O,T]=(0,r.useState)(!1),[D,A]=(0,r.useState)(null),R=()=>{I(!1),L(null),o()};return l?(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Chi ti\u1ebft gi\xe1o tr\xecnh"}),(0,tt.jsx)("button",{onClick:R,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,tt.jsx)("div",{className:"p-8 space-y-6",children:c?(0,tt.jsx)("div",{className:"text-center py-8 text-gray-600",children:"\u0110ang t\u1ea3i th\xf4ng tin gi\xe1o tr\xecnh..."}):i?(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"M\xe3 m\xf4n h\u1ecdc:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.subjectCode})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"T\xean m\xf4n h\u1ecdc:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.subjectName})]}),(i.programInfo||i.programName)&&(0,tt.jsxs)("div",{className:"col-span-2",children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.programInfo?"".concat(i.programInfo.programCode," - ").concat(i.programInfo.programName):i.programName})]}),i.subjectInfo&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"S\u1ed1 t\xedn ch\u1ec9:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.subjectInfo.credits||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"H\u1ecdc k\u1ef3:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.subjectInfo.semester||"-"})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"Tr\u1ea1ng th\xe1i:"}),(0,tt.jsx)("div",{className:"font-semibold",children:(0,tt.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("APPROVED"===i.status?"bg-green-100 text-green-800":"PENDING_REVIEW"===i.status?"bg-yellow-100 text-yellow-800":"PENDING_APPROVAL"===i.status?"bg-blue-100 text-blue-800":"DRAFT"===i.status?"bg-gray-100 text-gray-800":"REJECTED"===i.status?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"),children:i.status})})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"Phi\xean b\u1ea3n:"}),(0,tt.jsxs)("div",{className:"font-semibold text-gray-900",children:["v",i.versionNo||1]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"Ng\u01b0\u1eddi t\u1ea1o:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.createdBy})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm text-gray-600",children:"Ng\xe0y t\u1ea1o:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900",children:i.createdAt?new Date(i.createdAt).toLocaleString("vi-VN"):"-"})]})]})]}),(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"L\u1ecbch s\u1eed"}),(0,tt.jsxs)("div",{className:"space-y-3",children:[i.submittedAt&&(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"\u0110\xe3 n\u1ed9p:"}),(0,tt.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:new Date(i.submittedAt).toLocaleString("vi-VN")})]})]}),i.reviewedAt&&(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-3 h-3 rounded-full bg-indigo-500"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"\u0110\xe3 duy\u1ec7t b\u1edfi HoD:"}),(0,tt.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:new Date(i.reviewedAt).toLocaleString("vi-VN")})]})]}),i.approvedAt&&(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"\u0110\xe3 ph\xea duy\u1ec7t:"}),(0,tt.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:new Date(i.approvedAt).toLocaleString("vi-VN")})]})]}),i.rejectedAt&&(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"B\u1ecb t\u1eeb ch\u1ed1i:"}),(0,tt.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:new Date(i.rejectedAt).toLocaleString("vi-VN")}),i.rejectionReason&&(0,tt.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["L\xfd do: ",i.rejectionReason]})]})]}),i.publishedAt&&(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"\u0110\xe3 c\xf4ng b\u1ed1:"}),(0,tt.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:new Date(i.publishedAt).toLocaleString("vi-VN")})]})]})]})]}),i.summary&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"T\xf3m t\u1eaft"}),(0,tt.jsx)("p",{className:"text-gray-700",children:i.summary})]}),i.content&&"{}"!==i.content&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"N\u1ed9i dung gi\xe1o tr\xecnh"}),(0,tt.jsx)("div",{className:"text-sm text-gray-700",children:(()=>{try{const e="string"===typeof i.content?JSON.parse(i.content):i.content;return"object"===typeof e?(0,tt.jsxs)("div",{className:"space-y-4",children:[(e.subjectCode||e.academicYear||e.semester)&&(0,tt.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Th\xf4ng tin"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.subjectCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 m\xf4n:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.subjectCode})]}),e.syllabusCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 gi\xe1o tr\xecnh:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.syllabusCode})]}),e.academicYear&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"N\u0103m h\u1ecdc:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.academicYear})]}),e.semester&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"H\u1ecdc k\u1ef3:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.semester})]})]})]}),e.modules&&e.modules.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["C\xe1c module (",e.modules.length,")"]}),(0,tt.jsx)("ul",{className:"space-y-1 ml-4",children:e.modules.map((e,t)=>(0,tt.jsxs)("li",{className:"text-gray-700",children:["\u2022 ",e.title||e.name||"Module ".concat(t+1),e.description&&" - ".concat(e.description)]},t))})]}),e.learningObjectives&&e.learningObjectives.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"M\u1ee5c ti\xeau h\u1ecdc t\u1eadp"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.learningObjectives})]}),e.teachingMethods&&e.teachingMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.teachingMethods})]}),e.assessmentMethods&&e.assessmentMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.assessmentMethods})]}),e.cloPairIds&&e.cloPairIds.length>0&&(0,tt.jsx)(_a,{cloIds:e.cloPairIds}),(!e.modules||0===e.modules.length)&&(!e.learningObjectives||!e.learningObjectives.trim())&&(!e.teachingMethods||!e.teachingMethods.trim())&&(!e.assessmentMethods||!e.assessmentMethods.trim())&&(!e.cloPairIds||0===e.cloPairIds.length)&&(0,tt.jsx)("div",{className:"text-gray-500 italic",children:"Ch\u01b0a c\xf3 n\u1ed9i dung chi ti\u1ebft. H\xe3y th\xeam modules, m\u1ee5c ti\xeau, ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y v\xe0 \u0111\xe1nh gi\xe1."})]}):(0,tt.jsx)("pre",{className:"whitespace-pre-wrap overflow-x-auto",children:e})}catch(e){return(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-red-600 text-xs mb-2",children:"\u26a0\ufe0f Kh\xf4ng th\u1ec3 parse JSON, hi\u1ec3n th\u1ecb th\xf4:"}),(0,tt.jsx)("pre",{className:"bg-white p-3 rounded border border-gray-300 text-xs overflow-x-auto max-h-48",children:i.content})]})}})()})]}),(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["T\u1ec7p b\xe0i gi\u1ea3ng (",d.length,")"]}),u?(0,tt.jsx)("div",{className:"text-center py-4 text-gray-600",children:(0,tt.jsx)("p",{className:"text-sm",children:"\u0110ang t\u1ea3i t\u1ec7p..."})}):d.length>0?(0,tt.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,tt.jsx)("div",{className:"bg-white p-4 rounded border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.originalName||e.title||e.fileName||"Unnamed Document"}),e.description&&(0,tt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,tt.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[e.fileSize&&(0,tt.jsxs)("span",{children:["K\xedch th\u01b0\u1edbc: ",(e.fileSize/1024/1024).toFixed(2)," MB"]}),e.uploadedAt&&(0,tt.jsxs)("span",{children:["Ng\xe0y t\u1ea3i: ",new Date(e.uploadedAt).toLocaleString("vi-VN")]}),e.uploadedBy&&(0,tt.jsxs)("span",{children:["Ng\u01b0\u1eddi t\u1ea3i: ",e.uploadedBy]})]}),m[e.id]&&(0,tt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,tt.jsx)(Sa,{size:14,className:"text-green-600"}),(0,tt.jsx)("span",{className:"text-xs text-green-700 font-medium",children:"\u0110\xe3 c\xf3 t\xf3m t\u1eaft AI"})]})]}),(0,tt.jsxs)("div",{className:"flex gap-2 flex-shrink-0 flex-col",children:[(0,tt.jsxs)("button",{onClick:()=>j(e.id),title:"Xem tr\u1ef1c ti\u1ebfp",className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-medium flex items-center gap-1 whitespace-nowrap",children:[(0,tt.jsx)($s,{size:14}),"Xem"]}),(e.aiIngestionJobId||m[e.id])&&(0,tt.jsxs)("button",{onClick:()=>{L(e),I(!0)},title:"Xem t\xf3m t\u1eaft t\xe0i li\u1ec7u",className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium flex items-center gap-1 whitespace-nowrap",children:[(0,tt.jsx)(za,{size:14}),"Xem t\xf3m t\u1eaft"]}),(0,tt.jsxs)("button",{onClick:()=>N(e.id,e.fileName),disabled:h===e.id,title:"T\xf3m t\u1eaft t\xe0i li\u1ec7u b\u1eb1ng AI",className:"px-3 py-1.5 bg-amber-600 text-white rounded hover:bg-amber-700 text-xs font-medium flex items-center gap-1 whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed",children:[h===e.id?(0,tt.jsx)(Aa,{size:14,className:"animate-spin"}):(0,tt.jsx)(za,{size:14}),h===e.id?"\u0110ang...":"T\xf3m t\u1eaft"]})]})]})},e.id))}):(0,tt.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,tt.jsx)("p",{className:"text-sm italic",children:"Ch\u01b0a c\xf3 t\u1ec7p b\xe0i gi\u1ea3ng n\xe0o \u0111\u01b0\u1ee3c t\u1ea3i l\xean"})})]}),(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Th\xf4ng tin kh\xe1c"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Workflow ID:"}),(0,tt.jsx)("div",{className:"font-mono text-xs text-gray-900 mt-1",children:i.workflowId||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi c\u1eadp nh\u1eadt g\u1ea7n nh\u1ea5t:"}),(0,tt.jsx)("div",{className:"text-gray-900 mt-1",children:i.lastActionBy||i.updatedBy||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Root ID:"}),(0,tt.jsx)("div",{className:"font-mono text-xs text-gray-900 mt-1",children:i.rootId||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i:"}),(0,tt.jsx)("div",{className:"text-gray-900 mt-1",children:i.updatedAt?new Date(i.updatedAt).toLocaleString("vi-VN"):"-"})]})]})]})]}):(0,tt.jsx)("div",{className:"text-center py-8 text-red-600",children:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c th\xf4ng tin gi\xe1o tr\xecnh"})}),(0,tt.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-between items-center border-t",children:[(0,tt.jsx)("div",{className:"flex items-center gap-2",children:i&&p&&p[null===i||void 0===i?void 0:i.id]&&(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsxs)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["\u2713 \u0110\xe3 check: ",p[null===i||void 0===i?void 0:i.id].timestamp]}),(0,tt.jsxs)("button",{onClick:async()=>{if(null===i||void 0===i||!i.id)return;const e=p[i.id];if(e&&e.jobId)try{var t;const n=await Ta.getJobStatus(e.jobId),s=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data;let a=e.result;"SUCCEEDED"===(null===s||void 0===s?void 0:s.status)&&null!==s&&void 0!==s&&s.result&&(a=s.result,"string"===typeof a&&(a=JSON.parse(a))),A(a),T(!0)}catch(n){console.warn("Failed to fetch latest CLO check result:",n),A(e.result),T(!0)}},disabled:g,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm flex items-center gap-2 disabled:bg-gray-400",title:"Xem k\u1ebft qu\u1ea3 ki\u1ec3m tra CLO-PLO",children:[(0,tt.jsx)($s,{size:14}),g?"\u0110ang t\u1ea3i...":"Xem k\u1ebft qu\u1ea3"]}),(0,tt.jsx)("button",{onClick:()=>y(null===i||void 0===i?void 0:i.id),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-xs",title:"Xo\xe1 k\u1ebft qu\u1ea3 l\u01b0u tr\u1eef",children:"\u2715"})]})}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{onClick:()=>f(i),disabled:g,className:"px-6 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 disabled:bg-gray-400 flex items-center gap-2",children:g?(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(Aa,{size:16,className:"animate-spin"}),"Ki\u1ec3m tra..."]}):(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(Sa,{size:16}),"Ki\u1ec3m tra CLO-PLO"]})}),(0,tt.jsx)("button",{onClick:R,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"\u0110\xf3ng"})]})]}),E&&P&&(0,tt.jsx)(Ra,{document:P,onClose:()=>{I(!1),L(null)}}),O&&D&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"K\u1ebft qu\u1ea3 ki\u1ec3m tra CLO-PLO"}),(0,tt.jsx)("button",{onClick:()=>T(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-light",children:"\xd7"})]}),(0,tt.jsxs)("div",{className:"p-8 space-y-6",children:[(0,tt.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-l-4 border-blue-600 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"\u0110\xe1nh gi\xe1 t\u1ed5ng quan"}),(0,tt.jsxs)("div",{className:"space-y-2",children:[(0,tt.jsxs)("p",{className:"text-gray-700",children:["\u0110i\u1ec3m ki\u1ec3m tra: ",(0,tt.jsxs)("span",{className:"font-bold text-xl text-blue-600",children:[(null===D||void 0===D||null===(t=D.overallAssessment)||void 0===t||null===(n=t.score)||void 0===n?void 0:n.toFixed(1))||"N/A","/10"]})]}),(0,tt.jsxs)("p",{className:"text-gray-700",children:["Tr\u1ea1ng th\xe1i: ",(0,tt.jsx)("span",{className:"font-semibold text-gray-800",children:(null===D||void 0===D||null===(s=D.overallAssessment)||void 0===s?void 0:s.status)||"N/A"})]}),(null===D||void 0===D||null===(a=D.overallAssessment)||void 0===a?void 0:a.keyStrengths)&&D.overallAssessment.keyStrengths.length>0&&(0,tt.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,tt.jsx)("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"\u0110i\u1ec3m m\u1ea1nh:"}),(0,tt.jsx)("ul",{className:"text-sm text-gray-700 space-y-1",children:D.overallAssessment.keyStrengths.map((e,t)=>(0,tt.jsxs)("li",{className:"flex gap-2",children:[(0,tt.jsx)("span",{className:"text-blue-600",children:"\u2022"}),(0,tt.jsx)("span",{children:e})]},t))})]})]})]}),(null===D||void 0===D?void 0:D.mappingAnalysis)&&(0,tt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ph\xe2n t\xedch Mapping"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,tt.jsxs)("div",{className:"bg-slate-50 p-4 rounded border border-gray-200",children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"T\u1ed5ng s\u1ed1 CLO"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:D.mappingAnalysis.totalClos||0})]}),(0,tt.jsxs)("div",{className:"bg-slate-50 p-4 rounded border border-gray-200",children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"PLO \u0111\u01b0\u1ee3c cover"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:D.mappingAnalysis.coveredPlos||0})]})]}),D.mappingAnalysis.unmappedClos&&D.mappingAnalysis.unmappedClos.length>0&&(0,tt.jsxs)("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded",children:[(0,tt.jsx)("p",{className:"text-sm font-semibold text-red-900 mb-1",children:"CLO ch\u01b0a mapping:"}),(0,tt.jsx)("p",{className:"text-sm text-red-800",children:D.mappingAnalysis.unmappedClos.join(", ")})]}),D.mappingAnalysis.uncoveredPlos&&D.mappingAnalysis.uncoveredPlos.length>0&&(0,tt.jsxs)("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded",children:[(0,tt.jsx)("p",{className:"text-sm font-semibold text-orange-900 mb-1",children:"PLO ch\u01b0a cover:"}),(0,tt.jsx)("p",{className:"text-sm text-orange-800",children:D.mappingAnalysis.uncoveredPlos.join(", ")})]})]}),(null===D||void 0===D?void 0:D.issues)&&D.issues.length>0&&(0,tt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,tt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["C\xe1c v\u1ea5n \u0111\u1ec1 ph\xe1t hi\u1ec7n (",D.issues.length,")"]}),(0,tt.jsx)("div",{className:"space-y-3",children:D.issues.map((e,t)=>(0,tt.jsxs)("div",{className:"p-4 rounded-lg border-l-4 ".concat("critical"===e.severity?"bg-red-50 border-red-500":"major"===e.severity?"bg-orange-50 border-orange-500":"bg-yellow-50 border-yellow-500"),children:[(0,tt.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"critical"===e.severity?"M\u1ee9c \u0111\u1ed9: Nghi\xeam tr\u1ecdng":"major"===e.severity?"M\u1ee9c \u0111\u1ed9: Cao":"M\u1ee9c \u0111\u1ed9: Trung b\xecnh"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,tt.jsx)("strong",{children:"V\u1ea5n \u0111\u1ec1:"})," ",e.problem]}),e.why&&(0,tt.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,tt.jsx)("strong",{children:"Nguy\xean nh\xe2n:"})," ",e.why]}),e.impact&&(0,tt.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,tt.jsx)("strong",{children:"T\xe1c \u0111\u1ed9ng:"})," ",e.impact]}),e.recommendation&&(0,tt.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,tt.jsx)("strong",{children:"Khuy\u1ebfn ngh\u1ecb:"})," ",e.recommendation]}),e.howToFix&&(0,tt.jsxs)("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[(0,tt.jsx)("strong",{className:"text-sm",children:"H\u01b0\u1edbng d\u1eabn s\u1eeda:"}),(0,tt.jsx)("div",{className:"mt-2 text-xs text-gray-700 whitespace-pre-wrap",children:e.howToFix})]}),(0,tt.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["\u01afu ti\xean: ",e.priority,"/3"]})]},t))})]})]}),(0,tt.jsx)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-end gap-2 border-t",children:(0,tt.jsx)("button",{onClick:()=>T(!1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"\u0110\xf3ng"})})]})})]})}):null},Ua=()=>{const e=le(),[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[m,h]=(0,r.useState)({departments:"--",programs:"--"}),[g,p]=(0,r.useState)({}),[x,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null),[C,E]=(0,r.useState)(!1),[I,P]=(0,r.useState)([]),[L,O]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[A,R]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=localStorage.getItem("cloCheckHistory");if(e)try{R(JSON.parse(e))}catch(Fr){console.warn("Failed to load CLO check history:",Fr)}const t=localStorage.getItem("documentSummaries");if(t)try{p(JSON.parse(t))}catch(Fr){console.warn("Failed to load document summaries:",Fr)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("cloCheckHistory",JSON.stringify(A))},[A]),(0,r.useEffect)(()=>{localStorage.setItem("documentSummaries",JSON.stringify(g))},[g]),(0,r.useEffect)(()=>{const t=(()=>{try{return JSON.parse(localStorage.getItem("user"))}catch(Fr){return null}})();t&&"ROLE_ACADEMIC_AFFAIRS"===t.role?(n(t),M(),_()):e("/login")},[]);const z=e=>{const t=null===e||void 0===e?void 0:e.data;return t?Array.isArray(t)?t:Array.isArray(t.data)?t.data:t.data&&Array.isArray(t.data.content)?t.data.content:Array.isArray(t.content)?t.content:[]:[]},_=async()=>{try{const[e,t]=await Promise.all([Pa.getPrograms(),Pa.getSubjects()]),n=z(e),s=z(t),a=new Set(n.map(e=>e.departmentId).filter(Boolean)).size;h({programs:n.length,departments:a||0,subjects:s.length})}catch(e){console.error(e)}},M=async()=>{try{o(!0),c(null);const e=await Ea.getPendingForApproval();a(Array.isArray(e)?e:[])}catch(e){c(e.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh c\u1ea7n duy\u1ec7t"),a([])}finally{o(!1)}},U=async e=>{try{E(!0),w(!0),k(null),P([]);let i=e.entityId||e.id||e.syllabusId;if(!i)return void alert("Kh\xf4ng t\xecm th\u1ea5y ID gi\xe1o tr\xecnh");const c=(await Rs.get("/api/syllabuses/".concat(i))).data;let d=null,u=null;if(c.subjectCode)try{var t;if(d=(await Rs.get("/api/academic/subjects/code/".concat(c.subjectCode))).data,null!==(t=d)&&void 0!==t&&t.programId)try{u=(await Rs.get("/api/academic/programs/".concat(d.programId))).data}catch(a){console.warn("Failed to fetch program info:",a)}}catch(r){console.warn("Failed to fetch subject info:",r)}O(!0);try{var n;const e=await Js.getDocumentsBySyllabus(i),t=(null===(n=e.data)||void 0===n?void 0:n.data)||e.data||[];P(Array.isArray(t)?t:[]);const a={};for(const n of t)if(n.aiIngestionJobId)try{var s;const e=await Ta.getJobStatus(n.aiIngestionJobId),t=(null===(s=e.data)||void 0===s?void 0:s.data)||e.data;let r=null;"SUCCEEDED"===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.result?(r=t.result,"string"===typeof r&&(r=JSON.parse(r))):null!==t&&void 0!==t&&t.summary&&(r=t),r&&(a[n.id]={summary:r.summary||"",bullets:Array.isArray(r.bullets)?r.bullets:[],keywords:Array.isArray(r.keywords)?r.keywords:[],targetAudience:r.targetAudience||"",prerequisites:r.prerequisites||"",ragUsed:r.ragUsed||!1,ragContext:r.ragContext||"",tokens:r.tokens||0,model:r.model||""})}catch(l){console.warn("Failed to load cached summary for doc ".concat(n.id,":"),l)}Object.keys(a).length>0&&p(a)}catch(o){console.warn("Failed to fetch documents:",o),P([])}finally{O(!1)}k(He(He({},c),{},{subjectInfo:d,programInfo:u}))}catch(i){console.error("Failed to load syllabus detail:",i),alert("Kh\xf4ng th\u1ec3 t\u1ea3i chi ti\u1ebft gi\xe1o tr\xecnh"),w(!1)}finally{E(!1)}},F=(0,r.useMemo)(()=>({pending:s.length,programs:m.programs,departments:m.departments}),[s,m]);return(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white",children:[(0,tt.jsx)("div",{className:"bg-white shadow-md border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-6 flex justify-between items-center",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcda Dashboard Ph\xf2ng \u0110\xe0o T\u1ea1o"}),(0,tt.jsxs)("p",{className:"text-gray-600 mt-1",children:["Xin ch\xe0o, ",(0,tt.jsx)("span",{className:"font-semibold",children:null===t||void 0===t?void 0:t.name})]})]}),(0,tt.jsxs)("button",{onClick:()=>{localStorage.clear(),e("/login")},className:"flex items-center gap-2 bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition font-medium",children:[(0,tt.jsx)(Qe,{size:18}),"\u0110\u0103ng xu\u1ea5t"]})]})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-purple-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Gi\xe1o tr\xecnh ch\u1edd duy\u1ec7t"}),(0,tt.jsx)(Na,{size:28,className:"text-yellow-500"})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-purple-600",children:F.pending}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"PENDING_APPROVAL"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-green-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Khoa/B\u1ed9 m\xf4n"}),(0,tt.jsx)(lt,{size:28,className:"text-blue-500"})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-green-600",children:F.departments}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"\u0110ang ho\u1ea1t \u0111\u1ed9ng"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-indigo-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsx)(at,{size:28,className:"text-indigo-500"})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-indigo-600",children:F.programs}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"CT\u0110T"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-gray-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"T\xf9y ch\u1ecdn"}),(0,tt.jsx)(wa,{size:28,className:"text-gray-500"})]}),(0,tt.jsx)("p",{className:"text-xl font-semibold text-gray-800",children:"C\u1ea5u h\xecnh & b\xe1o c\xe1o"})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,tt.jsxs)("button",{onClick:()=>e("/academic/programs"),className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold hover:shadow-lg transition flex items-center justify-center gap-3",children:[(0,tt.jsx)(Sa,{size:20}),"Qu\u1ea3n l\xfd CT\u0110T & h\u1ecdc ph\u1ea7n"]}),(0,tt.jsxs)("button",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-xl font-semibold hover:shadow-lg transition flex items-center justify-center gap-3",children:[(0,tt.jsx)(ka,{size:20}),"B\xe1o c\xe1o ch\u01b0\u01a1ng tr\xecnh"]}),(0,tt.jsxs)("button",{className:"bg-gradient-to-r from-gray-500 to-gray-600 text-white px-8 py-4 rounded-xl font-semibold hover:shadow-lg transition flex items-center justify-center gap-3",children:[(0,tt.jsx)(wa,{size:20}),"C\u1ea5u h\xecnh h\u1ec7 th\u1ed1ng"]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,tt.jsx)("div",{children:(0,tt.jsx)("h2",{className:"text-2xl font-bold",children:"Gi\xe1o tr\xecnh ch\u1edd ph\xea duy\u1ec7t"})}),(0,tt.jsx)("button",{onClick:M,disabled:l,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 text-sm font-medium",children:l?"\u0110ang t\u1ea3i...":"T\u1ea3i l\u1ea1i"})]}),i&&(0,tt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-red-700",children:["\u26a0\ufe0f ",i]}),l?(0,tt.jsx)("div",{className:"text-center py-10 text-gray-600",children:"\u0110ang t\u1ea3i danh s\xe1ch..."}):0===s.length?(0,tt.jsx)("div",{className:"text-center py-10 text-gray-600",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh c\u1ea7n ph\xea duy\u1ec7t"}):(0,tt.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,tt.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition",children:(0,tt.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.subjectCode||"N/A"}),(0,tt.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold",children:"PENDING_APPROVAL"})]}),(0,tt.jsx)("p",{className:"text-gray-700 font-medium mb-2",children:e.subjectName||"Ch\u01b0a c\xf3 t\xean"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Gi\u1ea3ng vi\xean: ",e.lecturerName||e.createdBy||"N/A"]}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Ng\xe0y g\u1eedi: ",e.submittedAt?new Date(e.submittedAt).toLocaleDateString("vi-VN"):"N/A"]})]}),(0,tt.jsxs)("div",{className:"flex flex-col gap-2 min-w-[220px]",children:[(0,tt.jsxs)("button",{onClick:()=>U(e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 justify-center",children:[(0,tt.jsx)($s,{size:16}),"Xem chi ti\u1ebft"]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,tt.jsx)("button",{onClick:()=>(async e=>{if(t)try{u(e),await Ea.approve(e,t.userId),await M()}catch(n){alert(n.message||"Kh\xf4ng th\u1ec3 ph\xea duy\u1ec7t")}finally{u(null)}})(e.id),disabled:d===e.id,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm disabled:opacity-50",children:d===e.id?"\u0110ang x\u1eed l\xfd...":"Ph\xea duy\u1ec7t"}),(0,tt.jsx)("button",{onClick:()=>(async e=>{if(!t)return;const n=prompt("Nh\u1eadp l\xfd do t\u1eeb ch\u1ed1i:");if(n&&""!==n.trim())try{u(e),await Ea.reject(e,t.userId,n),await M()}catch(s){alert(s.message||"Kh\xf4ng th\u1ec3 t\u1eeb ch\u1ed1i")}finally{u(null)}})(e.id),disabled:d===e.id,className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition text-sm disabled:opacity-50",children:"T\u1eeb ch\u1ed1i"})]})]})]})},e.id))})]})]}),b&&v&&(0,tt.jsx)(Ra,{document:v,onClose:()=>{y(!1),j(null)}}),(0,tt.jsx)(Ma,{isOpen:N,onClose:()=>{w(!1),k(null)},syllabusDetailData:S,syllabusDetailLoading:C,syllabusDetailDocuments:I,syllabusDetailDocumentsLoading:L,documentSummaries:g,documentSummarizingId:x,cloCheckLoading:T,cloCheckHistory:A,handleViewSyllabusDetail:U,handleCheckCLOPLOConsistency:async function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&e.id){D(!0);try{var t;console.log("[AcademicDashboard] Starting CLO-PLO check with data:",{syllabusId:e.id,subjectCode:e.subjectCode,subjectName:e.subjectName});const l="string"===typeof e.content?JSON.parse(e.content):e.content,o=(null===l||void 0===l?void 0:l.cloPairIds)||(null===l||void 0===l?void 0:l.cloIds)||[];if(console.log("[AcademicDashboard] CLO IDs found:",o),0===o.length)return alert("Gi\xe1o tr\xecnh n\xe0y ch\u01b0a c\xf3 CLO li\xean k\u1ebft"),void D(!1);console.log("[AcademicDashboard] Fetching details for ".concat(o.length," CLOs..."));const i={},c={},d=new Set;for(const e of o)try{var n;const t=await Js.getCLOById(e),a=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||{};i[e]={code:a.cloCode||a.code||"CLO-".concat(e),description:a.description||""};try{var s;const t=await Rs.get("/api/v1/mapping/clo/".concat(e)),n=((null===(s=t.data)||void 0===s?void 0:s.data)||t.data||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);c[e]=n,n.forEach(e=>d.add(e))}catch(m){console.warn("[AcademicDashboard] Failed to fetch PLO mappings for CLO ".concat(e,":"),m),c[e]=[]}}catch(h){console.warn("[AcademicDashboard] Failed to fetch CLO ".concat(e,":"),h),i[e]={code:"CLO-".concat(e),description:"Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c m\xf4 t\u1ea3"},c[e]=[]}const u={},p={};for(const e of d)try{var a;const t=await Rs.get("/api/v1/plo/".concat(e)),n=(null===(a=t.data)||void 0===a?void 0:a.data)||t.data||{},s=n.ploCode||n.code||"PLO-".concat(e);u[e]=s,p[s]={code:s,description:n.description||""}}catch(g){console.warn("[AcademicDashboard] Failed to fetch PLO ".concat(e,":"),g)}const x=Object.values(i).map(e=>({id:e.code,description:e.description})),f=Object.values(p).map(e=>({id:e.code,description:e.description})),b={};for(const e of o){var r;const t=null===(r=i[e])||void 0===r?void 0:r.code,n=(c[e]||[]).map(e=>u[e]).filter(Boolean);n.length>0&&(b[t]=n)}if(0===f.length)return alert("Kh\xf4ng t\xecm th\u1ea5y PLO n\xe0o \u0111\u1ec3 ki\u1ec3m tra"),void D(!1);console.log("[AcademicDashboard] Calling AI service...");const y=await Ta.checkCLOPLOConsistency(e.id,x,f,b),v=(null===(t=y.data)||void 0===t?void 0:t.jobId)||y.jobId;if(!v)return alert("Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c Job ID t\u1eeb AI service"),void D(!1);console.log("[AcademicDashboard] Job ID: ".concat(v,", polling for result..."));const j=3e5,N=Date.now();let w=1e3,S=0;let k=await new Promise((e,t)=>{const n=async()=>{try{S++;const s=await Ta.getJobStatus(v),a=s.data||s;if(console.log("[CLO Check] Poll #".concat(S," - Status: ").concat(a.status)),"succeeded"===a.status||"SUCCEEDED"===a.status)console.log("[CLO Check] \u2705 Job succeeded!",a.result),e(a.result);else if("failed"===a.status||"FAILED"===a.status||"canceled"===a.status||"CANCELED"===a.status)t(new Error("Job failed with status: ".concat(a.status)));else if("running"===a.status||"RUNNING"===a.status){Date.now()-N>j?t(new Error("Timeout waiting for CLO check result")):(w=Math.min(5e3,w+500),setTimeout(n,w))}else{Date.now()-N>j?t(new Error("Timeout waiting for CLO check result")):setTimeout(n,w)}}catch(s){console.error("[CLO Check] Poll error:",s),t(s)}};n()});"string"===typeof k&&(k=JSON.parse(k)),R(t=>He(He({},t),{},{[e.id]:{jobId:v,result:k,syllabusName:"".concat(e.subjectCode," - ").concat(e.subjectName),timestamp:(new Date).toLocaleString("vi-VN")}}))}catch(p){var l,o,i,c,d,u;console.error("[AcademicDashboard] Error checking CLO-PLO consistency:",p),console.error("[AcademicDashboard] Error response:",null===(l=p.response)||void 0===l?void 0:l.data),console.error("[AcademicDashboard] Full error:",{message:p.message,status:null===(o=p.response)||void 0===o?void 0:o.status,statusText:null===(i=p.response)||void 0===i?void 0:i.statusText,data:null===(c=p.response)||void 0===c?void 0:c.data,config:p.config?{method:p.config.method,url:p.config.url,baseURL:p.config.baseURL}:null}),alert("L\u1ed7i: ".concat(p.message).concat(null!==(d=p.response)&&void 0!==d&&null!==(u=d.data)&&void 0!==u&&u.message?"\n"+p.response.data.message:""))}finally{D(!1)}}else alert("Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh")},handleClearCLOCheckHistory:e=>{R(t=>{const n=He({},t);return delete n[e],n}),alert("\u2705 \u0110\xe3 xo\xe1 k\u1ebft qu\u1ea3 ki\u1ec3m tra")},handleViewDocument:async e=>{try{const t=await Rs.get("/api/documents/".concat(e,"/download"),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=n,s.click()}catch(t){console.error("Error downloading document:",t),alert("Kh\xf4ng th\u1ec3 t\u1ea3i t\xe0i li\u1ec7u")}},generateDocumentSummary:async(e,t)=>{f(e);try{var n;const t=await Ta.summarizeDocument(e),s=(null===(n=t.data)||void 0===n?void 0:n.jobId)||t.jobId;if(!s)return alert("Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c Job ID t\u1eeb AI service"),void f(null);let a=60,r=0;const l=setInterval(async()=>{r++;try{var t;const n=await Ta.getJobStatus(s),o=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data;if("SUCCEEDED"===(null===o||void 0===o?void 0:o.status)||"succeeded"===(null===o||void 0===o?void 0:o.status)){clearInterval(l);let t=o.result;"string"===typeof t&&(t=JSON.parse(t)),p(n=>He(He({},n),{},{[e]:{summary:t.summary||"",bullets:Array.isArray(t.bullets)?t.bullets:[],keywords:Array.isArray(t.keywords)?t.keywords:[],targetAudience:t.targetAudience||"",prerequisites:t.prerequisites||"",ragUsed:t.ragUsed||!1,ragContext:t.ragContext||"",tokens:t.tokens||0,model:t.model||""}})),f(null),alert("\u2705 T\xf3m t\u1eaft t\xe0i li\u1ec7u th\xe0nh c\xf4ng!")}else"FAILED"===(null===o||void 0===o?void 0:o.status)||"failed"===(null===o||void 0===o?void 0:o.status)?(clearInterval(l),f(null),alert("\u274c T\xf3m t\u1eaft t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i")):r>=a&&(clearInterval(l),f(null),alert("\u274c Timeout t\xf3m t\u1eaft t\xe0i li\u1ec7u"))}catch(n){r>=a&&(clearInterval(l),f(null),alert("\u274c L\u1ed7i t\xf3m t\u1eaft t\xe0i li\u1ec7u"))}},1e3)}catch(s){console.error("Error summarizing document:",s),f(null),alert("\u274c L\u1ed7i: ".concat(s.message))}},setShowDocumentSummaryModal:y,setSelectedDocumentForSummary:j,showToast:()=>{}})]})},Fa=Je("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ba=()=>{var e,t,n;const s=le(),[a,l]=(0,r.useState)(null),[o,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("user");e&&l(JSON.parse(e)),y()},[]);const y=async()=>{try{d(!0),m(null),console.log("[HODDashboard] Loading pending syllabi...");const e=await Ea.getPendingForReview();console.log("[HODDashboard] Received data:",e),console.log("[HODDashboard] Is array?",Array.isArray(e)),console.log("[HODDashboard] Data length:",Array.isArray(e)?e.length:"N/A");const t=Array.isArray(e)?e:[];console.log("[HODDashboard] Setting syllabi:",t.length,"items"),i(t)}catch(e){console.error("[HODDashboard] Error loading syllabi:",e),m(e.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh"),i([])}finally{d(!1)}},v=()=>{g(null),x("")},j={pending:o.length,thisWeek:o.filter(e=>{const t=new Date(e.createdAt||e.submittedAt),n=new Date;return n.setDate(n.getDate()-7),t>=n}).length};return(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[(0,tt.jsx)("div",{className:"bg-white shadow-md border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-6 flex justify-between items-center",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Head of Department - Review Gi\xe1o Tr\xecnh"}),(0,tt.jsxs)("p",{className:"text-gray-600 mt-1",children:["Xin ch\xe0o, ",(0,tt.jsx)("span",{className:"font-semibold",children:(null===a||void 0===a?void 0:a.name)||"HOD"})]})]}),(0,tt.jsxs)("button",{onClick:()=>{localStorage.clear(),s("/login")},className:"flex items-center gap-2 bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition font-medium",children:[(0,tt.jsx)(Qe,{size:18}),"\u0110\u0103ng xu\u1ea5t"]})]})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-yellow-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Ch\u1edd review"}),(0,tt.jsx)(ot,{size:28,className:"text-yellow-500"})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-yellow-600",children:j.pending}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Gi\xe1o tr\xecnh c\u1ea7n x\u1eed l\xfd"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-blue-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Tu\u1ea7n n\xe0y"}),(0,tt.jsx)(Na,{size:28,className:"text-blue-500"})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-blue-600",children:j.thisWeek}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Gi\xe1o tr\xecnh m\u1edbi"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-green-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vai tr\xf2"}),(0,tt.jsx)(Sa,{size:28,className:"text-green-500"})]}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"Tr\u01b0\u1edfng B\u1ed9 M\xf4n"}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Head of Department"})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Danh s\xe1ch gi\xe1o tr\xecnh ch\u1edd duy\u1ec7t"}),(0,tt.jsx)("button",{onClick:y,disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 text-sm font-medium",children:c?"\u0110ang t\u1ea3i...":"T\u1ea3i l\u1ea1i"})]}),u&&(0,tt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-red-700",children:["\u26a0\ufe0f ",u]}),c?(0,tt.jsxs)("div",{className:"text-center py-12",children:[(0,tt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,tt.jsx)("p",{className:"text-gray-600 mt-4",children:"\u0110ang t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh..."})]}):0===o.length?(0,tt.jsxs)("div",{className:"text-center py-12",children:[(0,tt.jsx)(Sa,{size:48,className:"text-green-500 mx-auto mb-4"}),(0,tt.jsx)("p",{className:"text-xl text-gray-600",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh c\u1ea7n duy\u1ec7t"}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"T\u1ea5t c\u1ea3 gi\xe1o tr\xecnh \u0111\xe3 \u0111\u01b0\u1ee3c x\u1eed l\xfd"})]}):(0,tt.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,tt.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition",children:(0,tt.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.subjectCode||"N/A"}),(0,tt.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold",children:"PENDING_REVIEW"})]}),(0,tt.jsx)("p",{className:"text-gray-700 font-medium mb-2",children:e.subjectName||"Ch\u01b0a c\xf3 t\xean"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Gi\u1ea3ng vi\xean: ",e.lecturerName||e.createdBy||"N/A"]}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Ng\xe0y g\u1eedi: ",e.submittedAt?new Date(e.submittedAt).toLocaleDateString("vi-VN"):"N/A"]})]}),(0,tt.jsx)("div",{className:"flex gap-2",children:(0,tt.jsxs)("button",{onClick:()=>(e=>{g(e)})(e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2",children:[(0,tt.jsx)($s,{size:16}),"Xem chi ti\u1ebft"]})})]})},e.id))})]})]}),h&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Review Gi\xe1o Tr\xecnh"}),(0,tt.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 text-2xl font-light",children:"\xd7"})]}),(0,tt.jsxs)("div",{className:"px-8 py-6 space-y-6",children:[(0,tt.jsxs)("section",{children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"M\xe3 m\xf4n"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:h.subjectCode||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"T\xean m\xf4n"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:h.subjectName||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"Gi\u1ea3ng vi\xean"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:h.lecturerName||h.createdBy||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"Ng\xe0y g\u1eedi"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:h.submittedAt?new Date(h.submittedAt).toLocaleDateString("vi-VN"):"-"})]})]})]}),(0,tt.jsxs)("section",{children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"CLOs (Course Learning Outcomes)"}),null!==(e=h.content)&&void 0!==e&&e.objectives&&Array.isArray(h.content.objectives)&&h.content.objectives.length>0?(0,tt.jsx)("ul",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:h.content.objectives.map((e,t)=>(0,tt.jsxs)("li",{className:"text-sm text-gray-700 flex gap-3",children:[(0,tt.jsxs)("span",{className:"font-semibold text-gray-900 flex-shrink-0",children:["CLO",t+1,":"]}),(0,tt.jsx)("span",{children:e})]},t))}):(0,tt.jsx)("p",{className:"text-sm text-gray-500",children:"Ch\u01b0a c\xf3 CLO \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a"})]}),(0,tt.jsxs)("section",{children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Ch\u01b0\u01a1ng tr\xecnh gi\u1ea3ng d\u1ea1y"}),null!==(t=h.content)&&void 0!==t&&t.modules&&Array.isArray(h.content.modules)&&h.content.modules.length>0?(0,tt.jsx)("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:h.content.modules.map((e,t)=>(0,tt.jsxs)("div",{className:"border-l-2 border-blue-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:e.title||"Module ".concat(t+1)}),e.topics&&Array.isArray(e.topics)&&e.topics.length>0&&(0,tt.jsx)("ul",{className:"text-sm text-gray-700 mt-1 space-y-1",children:e.topics.map((e,t)=>(0,tt.jsxs)("li",{className:"flex gap-2",children:[(0,tt.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,tt.jsx)("span",{children:e})]},t))})]},t))}):(0,tt.jsx)("p",{className:"text-sm text-gray-500",children:"Ch\u01b0a c\xf3 module gi\u1ea3ng d\u1ea1y"})]}),(null===(n=h.content)||void 0===n?void 0:n.assessment)&&(0,tt.jsxs)("section",{children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1"}),(0,tt.jsxs)("div",{className:"grid grid-cols-3 gap-3 bg-gray-50 p-4 rounded-lg",children:[void 0!==h.content.assessment.midterm&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"Gi\u1eefa k\u1ef3"}),(0,tt.jsxs)("p",{className:"font-medium text-gray-900",children:[h.content.assessment.midterm,"%"]})]}),void 0!==h.content.assessment.final&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"Cu\u1ed1i k\u1ef3"}),(0,tt.jsxs)("p",{className:"font-medium text-gray-900",children:[h.content.assessment.final,"%"]})]}),void 0!==h.content.assessment.assignments&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-600 uppercase",children:"B\xe0i t\u1eadp"}),(0,tt.jsxs)("p",{className:"font-medium text-gray-900",children:[h.content.assessment.assignments,"%"]})]})]})]}),(0,tt.jsxs)("section",{children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Nh\u1eadn x\xe9t / Ghi ch\xfa"}),(0,tt.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Nh\u1eadp nh\u1eadn x\xe9t ho\u1eb7c y\xeau c\u1ea7u ch\u1ec9nh s\u1eeda c\u1ee7a b\u1ea1n...",className:"w-full border border-gray-300 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4})]}),(0,tt.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[(0,tt.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("X\xe1c nh\u1eadn ph\xea duy\u1ec7t gi\xe1o tr\xecnh n\xe0y \u0111\u1ec3 g\u1eedi sang ph\xf2ng \u0111\xe0o t\u1ea1o?"))try{b(!0),await Ea.reviewApprove(e,p),alert("Ph\xea duy\u1ec7t th\xe0nh c\xf4ng"),x(""),g(null),y()}catch(t){console.error("Error review-approve:",t),alert("L\u1ed7i: "+(t.message||"Kh\xf4ng th\u1ec3 ph\xea duy\u1ec7t"))}finally{b(!1)}})(h.id),disabled:f,className:"flex-1 bg-green-600 text-white px-6 py-2.5 rounded-lg hover:bg-green-700 transition font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,tt.jsx)(Sa,{size:18}),f?"\u0110ang x\u1eed l\xfd...":"Ph\xea duy\u1ec7t"]}),(0,tt.jsxs)("button",{onClick:()=>(async e=>{const t=prompt("Nh\u1eadp l\xfd do t\u1eeb ch\u1ed1i:");if(t&&""!==t.trim())try{b(!0),await Ea.reject(e,t),alert("T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng"),g(null),y()}catch(n){console.error("Error rejecting:",n),alert("L\u1ed7i: "+(n.message||"Kh\xf4ng th\u1ec3 t\u1eeb ch\u1ed1i"))}finally{b(!1)}else alert("Vui l\xf2ng nh\u1eadp l\xfd do t\u1eeb ch\u1ed1i")})(h.id),disabled:f,className:"flex-1 bg-red-600 text-white px-6 py-2.5 rounded-lg hover:bg-red-700 transition font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,tt.jsx)(Fa,{size:18}),f?"\u0110ang x\u1eed l\xfd...":"T\u1eeb ch\u1ed1i"]}),(0,tt.jsx)("button",{onClick:v,className:"bg-gray-200 text-gray-700 px-6 py-2.5 rounded-lg hover:bg-gray-300 transition font-medium text-sm",children:"\u0110\xf3ng"})]})]})]})})]})},Va=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ha=()=>{const e=le(),[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),[x,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)([]),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)({}),[S,k]=(0,r.useState)(!1),[C,E]=(0,r.useState)({}),[I,P]=(0,r.useState)(!1),[L,O]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("cloCheckHistory");if(e)try{E(JSON.parse(e))}catch(Fr){console.warn("Failed to load CLO check history:",Fr)}const t=localStorage.getItem("documentSummaries");if(t)try{w(JSON.parse(t))}catch(Fr){console.warn("Failed to load document summaries:",Fr)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("cloCheckHistory",JSON.stringify(C))},[C]),(0,r.useEffect)(()=>{localStorage.setItem("documentSummaries",JSON.stringify(N))},[N]),(0,r.useEffect)(()=>{const t=(()=>{try{return JSON.parse(localStorage.getItem("user"))}catch(Fr){return null}})();t&&"ROLE_RECTOR"===t.role?(n(t),T()):e("/login")},[e]);const T=async()=>{try{o(!0),c(null),console.log("[RectorDashboard] Loading approved syllabi...");const e=(await Rs.get("/api/syllabuses",{params:{status:"APPROVED",size:100}})).data;console.log("[RectorDashboard] Received data:",e);let t=[];Array.isArray(e)?t=e:e.content&&Array.isArray(e.content)?t=e.content:e.data&&Array.isArray(e.data)?t=e.data:e.data&&e.data.content&&Array.isArray(e.data.content)&&(t=e.data.content),console.log("[RectorDashboard] Processed array:",t),a(t)}catch(e){console.error("[RectorDashboard] Error loading syllabi:",e),c("L\u1ed7i khi t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{o(!1)}},D=async e=>{if(t&&window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n ph\xea duy\u1ec7t gi\xe1o tr\xecnh n\xe0y?"))try{u(e);const n=(null===t||void 0===t?void 0:t.userId)||(null===t||void 0===t?void 0:t.id)||localStorage.getItem("userId");await Rs.post("/api/syllabuses/".concat(e,"/publish"),{reason:""},{headers:{"X-User-Id":n}}),alert("\u2705 Gi\xe1o tr\xecnh \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t th\xe0nh c\xf4ng!"),h(!1),p(null),await T()}catch(a){var n,s;console.error("[RectorDashboard] Publish error:",a),alert("\u274c L\u1ed7i khi ph\xea duy\u1ec7t: "+((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||a.message))}finally{u(null)}},A=async e=>{try{f(!0),h(!0),p(null),y([]);let r=e.entityId||e.id||e.syllabusId;if(!r)return void alert("Kh\xf4ng t\xecm th\u1ea5y ID gi\xe1o tr\xecnh");const l=(await Rs.get("/api/syllabuses/".concat(r))).data;p(l),f(!1),j(!0);try{var t;console.log("[RectorDashboard] Fetching documents for syllabus:",r);const e=await Js.getDocumentsBySyllabus(r),a=(null===(t=e.data)||void 0===t?void 0:t.data)||e.data||[],l=a.documents||a||[];console.log("[RectorDashboard] Documents loaded:",l),y(l);const o={};for(const t of l){const e=t.id||t.documentId,a=t.aiIngestionJobId;if(a)try{console.log("[RectorDashboard] Loading cached summary for doc ".concat(e,", jobId: ").concat(a));const t=await Ta.getJobStatus(a),s=t.data||t;if("succeeded"===s.status&&s.result){let t=s.result;if("string"===typeof t)try{t=JSON.parse(t)}catch(n){}o[e]=t,console.log("[RectorDashboard] \u2705 Cached summary loaded for doc ".concat(e))}}catch(s){console.warn("[RectorDashboard] Failed to load cached summary for doc ".concat(e,":"),s)}}Object.keys(o).length>0&&w(e=>He(He({},e),o))}catch(a){console.warn("[RectorDashboard] Failed to load documents:",a),y([])}finally{j(!1)}}catch(s){console.error("[RectorDashboard] Error loading detail:",s),alert("L\u1ed7i khi t\u1ea3i chi ti\u1ebft gi\xe1o tr\xecnh"),h(!1),f(!1)}},R=[{label:"Ch\u1edd Ph\xea Duy\u1ec7t",value:s.length,icon:ot,color:"text-blue-600",bgColor:"bg-blue-100"},{label:"\u0110ang X\u1eed L\xfd",value:d?1:0,icon:Na,color:"text-orange-600",bgColor:"bg-orange-100"}];return(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white",children:[(0,tt.jsx)("div",{className:"bg-white shadow-md border-b border-gray-200",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-6 flex justify-between items-center",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udcda Dashboard Hi\u1ec7u Tr\u01b0\u1edfng"}),(0,tt.jsx)("p",{className:"text-gray-600 mt-1",children:"Ph\xea duy\u1ec7t gi\xe1o tr\xecnh t\u1eeb APPROVED \u2192 PUBLISHED"})]}),(0,tt.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login")},className:"flex items-center gap-2 bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition font-medium",children:[(0,tt.jsx)(Qe,{size:18}),"\u0110\u0103ng xu\u1ea5t"]})]})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:R.map((e,t)=>{const n=e.icon;return(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-purple-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.label}),(0,tt.jsx)(n,{size:28,className:e.color})]}),(0,tt.jsx)("p",{className:"text-4xl font-bold text-purple-600",children:e.value})]},t)})}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,tt.jsx)("div",{children:(0,tt.jsx)("h2",{className:"text-2xl font-bold",children:"Gi\xe1o tr\xecnh ch\u1edd ph\xea duy\u1ec7t"})}),(0,tt.jsxs)("button",{onClick:T,disabled:l,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 text-sm font-medium flex items-center gap-2",children:[(0,tt.jsx)(Va,{size:16}),l?"\u0110ang t\u1ea3i...":"T\u1ea3i l\u1ea1i"]})]}),i&&(0,tt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-red-700",children:["\u26a0\ufe0f ",i]}),l?(0,tt.jsx)("div",{className:"text-center py-10 text-gray-600",children:"\u0110ang t\u1ea3i danh s\xe1ch..."}):0===s.length?(0,tt.jsx)("div",{className:"text-center py-10 text-gray-600",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh c\u1ea7n ph\xea duy\u1ec7t"}):(0,tt.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,tt.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition",children:(0,tt.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.subjectCode||e.code||"N/A"}),(0,tt.jsx)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold",children:"APPROVED"})]}),(0,tt.jsx)("p",{className:"text-gray-700 font-medium mb-2",children:e.subjectName||e.name||"Ch\u01b0a c\xf3 t\xean"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Gi\u1ea3ng vi\xean: ",e.createdBy||"N/A"]}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["Ng\xe0y g\u1eedi: ",e.submittedAt?new Date(e.submittedAt).toLocaleDateString("vi-VN"):"N/A"]})]}),(0,tt.jsxs)("div",{className:"flex flex-col gap-2 min-w-[220px]",children:[(0,tt.jsxs)("button",{onClick:()=>A(e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 justify-center",children:[(0,tt.jsx)($s,{size:16}),"Xem chi ti\u1ebft"]}),(0,tt.jsxs)("button",{onClick:()=>D(e.id),disabled:d===e.id,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm disabled:opacity-50 flex items-center gap-1 justify-center",children:[(0,tt.jsx)(Sa,{size:14}),d===e.id?"\u0110ang...":"Ph\xea Duy\u1ec7t"]})]})]})},e.id))})]})]}),(0,tt.jsx)(Ma,{isOpen:m,onClose:()=>{h(!1),p(null)},syllabusDetailData:g,syllabusDetailLoading:x,syllabusDetailDocuments:b,syllabusDetailDocumentsLoading:v,documentSummaries:N,documentSummarizingId:null,cloCheckLoading:S,cloCheckHistory:C,handleViewSyllabusDetail:A,handleCheckCLOPLOConsistency:async function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&e.id){k(!0);try{var t;console.log("[RectorDashboard] Starting CLO-PLO check with data:",{syllabusId:e.id,subjectCode:e.subjectCode,subjectName:e.subjectName});const l="string"===typeof e.content?JSON.parse(e.content):e.content,o=(null===l||void 0===l?void 0:l.cloPairIds)||(null===l||void 0===l?void 0:l.cloIds)||[];if(console.log("[RectorDashboard] CLO IDs found:",o),0===o.length)return alert("Gi\xe1o tr\xecnh n\xe0y ch\u01b0a c\xf3 CLO li\xean k\u1ebft"),void k(!1);console.log("[RectorDashboard] Fetching details for ".concat(o.length," CLOs..."));const i={},c={},d=new Set;for(const e of o)try{var n;const t=await Js.getCLOById(e),a=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||{};i[e]={code:a.cloCode||a.code||"CLO-".concat(e),description:a.description||""};try{var s;const t=await Rs.get("/api/v1/mapping/clo/".concat(e)),n=((null===(s=t.data)||void 0===s?void 0:s.data)||t.data||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);c[e]=n,n.forEach(e=>d.add(e))}catch(m){console.warn("[RectorDashboard] Failed to fetch PLO mappings for CLO ".concat(e,":"),m),c[e]=[]}}catch(h){console.warn("[RectorDashboard] Failed to fetch CLO ".concat(e,":"),h),i[e]={code:"CLO-".concat(e),description:"Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c m\xf4 t\u1ea3"},c[e]=[]}const u={},p={};for(const e of d)try{var a;const t=await Rs.get("/api/v1/plo/".concat(e)),n=(null===(a=t.data)||void 0===a?void 0:a.data)||t.data||{},s=n.ploCode||n.code||"PLO-".concat(e);u[e]=s,p[s]={code:s,description:n.description||""}}catch(g){console.warn("[RectorDashboard] Failed to fetch PLO ".concat(e,":"),g)}const x=Object.values(i).map(e=>({id:e.code,description:e.description})),f=Object.values(p).map(e=>({id:e.code,description:e.description})),b={};for(const e of o){var r;const t=null===(r=i[e])||void 0===r?void 0:r.code,n=(c[e]||[]).map(e=>u[e]).filter(Boolean);n.length>0&&(b[t]=n)}if(0===f.length)return alert("Kh\xf4ng t\xecm th\u1ea5y PLO n\xe0o \u0111\u1ec3 ki\u1ec3m tra"),void k(!1);console.log("[RectorDashboard] Calling AI service...");const y=await Ta.checkCLOPLOConsistency(e.id,x,f,b),v=(null===(t=y.data)||void 0===t?void 0:t.jobId)||y.jobId;if(!v)return alert("Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c Job ID t\u1eeb AI service"),void k(!1);console.log("[RectorDashboard] Job ID: ".concat(v,", polling for result..."));const j=3e5,N=Date.now();let w=1e3,S=0;let C=await new Promise((e,t)=>{const n=async()=>{try{S++;const s=await Ta.getJobStatus(v),a=s.data||s;if(console.log("[CLO Check] Poll #".concat(S," - Status: ").concat(a.status)),"succeeded"===a.status||"SUCCEEDED"===a.status)console.log("[CLO Check] \u2705 Job succeeded!",a.result),e(a.result);else if("failed"===a.status||"FAILED"===a.status||"canceled"===a.status||"CANCELED"===a.status)t(new Error("Job failed with status: ".concat(a.status)));else if("running"===a.status||"RUNNING"===a.status){Date.now()-N>j?t(new Error("Timeout waiting for CLO check result")):(w=Math.min(5e3,w+500),setTimeout(n,w))}else{Date.now()-N>j?t(new Error("Timeout waiting for CLO check result")):setTimeout(n,w)}}catch(s){console.error("[CLO Check] Poll error:",s),t(s)}};n()});"string"===typeof C&&(C=JSON.parse(C)),E(t=>He(He({},t),{},{[e.id]:{jobId:v,result:C,syllabusName:"".concat(e.subjectCode," - ").concat(e.subjectName),timestamp:(new Date).toLocaleString("vi-VN")}}))}catch(p){var l,o,i,c,d,u;console.error("[RectorDashboard] Error checking CLO-PLO consistency:",p),console.error("[RectorDashboard] Error response:",null===(l=p.response)||void 0===l?void 0:l.data),console.error("[RectorDashboard] Full error:",{message:p.message,status:null===(o=p.response)||void 0===o?void 0:o.status,statusText:null===(i=p.response)||void 0===i?void 0:i.statusText,data:null===(c=p.response)||void 0===c?void 0:c.data,config:p.config?{method:p.config.method,url:p.config.url,baseURL:p.config.baseURL}:null}),alert("L\u1ed7i: ".concat(p.message).concat(null!==(d=p.response)&&void 0!==d&&null!==(u=d.data)&&void 0!==u&&u.message?"\n"+p.response.data.message:""))}finally{k(!1)}}else alert("Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh")},handleViewCLOCheckHistory:e=>{const t=C[e];t&&alert("L\u1ea7n ki\u1ec3m tra cu\u1ed1i c\xf9ng: ".concat(t.timestamp,"\n\nK\u1ebft qu\u1ea3:\n").concat(JSON.stringify(t.result,null,2)))},handleClearCLOCheckHistory:e=>{E(t=>{const n=He({},t);return delete n[e],n}),alert("\u2705 \u0110\xe3 xo\xe1 k\u1ebft qu\u1ea3 ki\u1ec3m tra")},handleViewPreviousCLOCheckResult:e=>{const t=C[e];t&&t.result&&alert("K\u1ebft qu\u1ea3 ki\u1ec3m tra CLO-PLO:\n\n".concat(JSON.stringify(t.result,null,2)))},handleViewDocument:e=>{window.open("/api/documents/".concat(e,"/download"),"_blank")},generateDocumentSummary:async(e,t)=>{try{var n;const s="".concat(t,"-").concat(e.documentId);w(e=>He(He({},e),{},{[s]:{status:"loading"}}));const a=await Ta.generateDocumentSummary(e.documentId,e.title),r=(null===(n=a.data)||void 0===n?void 0:n.jobId)||a.jobId;if(!r)throw new Error("No job ID received");const l=12e4,o=Date.now();let i=1e3;const c=await new Promise((e,t)=>{const n=async()=>{try{const s=await Ta.getJobStatus(r),a=s.data||s;"succeeded"===a.status||"SUCCEEDED"===a.status?e(a.result):"failed"===a.status||"FAILED"===a.status?t(new Error("Document summarization failed")):Date.now()-o>l?t(new Error("Timeout")):(i=Math.min(5e3,i+500),setTimeout(n,i))}catch(s){t(s)}};n()});w(e=>He(He({},e),{},{[s]:{status:"success",summary:c}})),alert("\u2705 T\xf3m t\u1eaft t\xe0i li\u1ec7u th\xe0nh c\xf4ng!")}catch(s){console.error("Error generating summary:",s),w(n=>He(He({},n),{},{["".concat(t,"-").concat(e.documentId)]:{status:"error",error:s.message}})),alert("\u274c L\u1ed7i: "+s.message)}},setShowDocumentSummaryModal:P,setSelectedDocumentForSummary:O,showToast:e=>{console.log("[Toast]",e)}}),m&&g&&(0,tt.jsx)("div",{className:"fixed bottom-0 right-0 left-0 bg-white border-t border-gray-200 z-40",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-4 flex gap-3 justify-end",children:[(0,tt.jsxs)("button",{onClick:()=>D(g.id),disabled:d===g.id,className:"bg-green-600 text-white px-6 py-2.5 rounded-lg hover:bg-green-700 transition font-medium text-sm disabled:opacity-50 flex items-center gap-2",children:[(0,tt.jsx)(Sa,{size:18}),d===g.id?"\u0110ang X\u1eed L\xfd...":"Ph\xea Duy\u1ec7t"]}),(0,tt.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-200 text-gray-700 px-6 py-2.5 rounded-lg hover:bg-gray-300 transition font-medium text-sm",children:"\u0110\xf3ng"})]})})]})},qa=()=>{var e,t,n,s,a,l,o,i,c;const[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[x,f]=(0,r.useState)({id:null,programCode:"",programName:"",description:"",departmentId:"",creditsRequired:"",durationYears:"",degreeType:"",accreditationStatus:"",isActive:!0}),[b,y]=(0,r.useState)({id:null,subjectCode:"",subjectName:"",description:"",programId:"",credits:"",semester:"",prerequisites:"",corequisites:"",subjectType:"",isFoundational:!1,isActive:!0}),[v,j]=(0,r.useState)({ploCode:"",ploName:"",description:"",programId:"",displayOrder:"",ploLevel:"",assessmentMethod:"",isActive:!0}),[N,w]=(0,r.useState)({open:!1,program:null,subjects:[],plos:[],closBySubject:{},loading:!1}),[S,k]=(0,r.useState)(!1),[C,E]=(0,r.useState)(""),I=async()=>{try{var e;k(!0),E("");const t=(null===(e=(await Pa.getPrograms()).data)||void 0===e?void 0:e.data)||[];u(t),t.length&&!m&&D(t[0])}catch(t){console.error(t),E("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c danh s\xe1ch ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o")}finally{k(!1)}},P=async e=>{if(e)try{var t;k(!0),E("");const n=(null===(t=(await Pa.getSubjectsByProgram(e)).data)||void 0===t?void 0:t.data)||[];p(n)}catch(n){console.error(n),E("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c danh s\xe1ch h\u1ecdc ph\u1ea7n cho ch\u01b0\u01a1ng tr\xecnh \u0111\u01b0\u1ee3c ch\u1ecdn")}finally{k(!1)}};(0,r.useEffect)(()=>{I()},[]);const L=e=>{const t=null===e||void 0===e?void 0:e.data;return t?Array.isArray(t)?t:Array.isArray(t.data)?t.data:t.data&&Array.isArray(t.data.content)?t.data.content:Array.isArray(t.content)?t.content:[]:[]},O=()=>{f({id:null,programCode:"",programName:"",description:"",departmentId:"",creditsRequired:"",durationYears:"",degreeType:"",accreditationStatus:"",isActive:!0})},T=e=>{y({id:null,subjectCode:"",subjectName:"",description:"",programId:e||(null===m||void 0===m?void 0:m.id)||"",credits:"",semester:"",prerequisites:"",corequisites:"",subjectType:"",isFoundational:!1,isActive:!0})},D=e=>{h(e),T(null===e||void 0===e?void 0:e.id),P(null===e||void 0===e?void 0:e.id)},A=e=>{const{name:t,value:n,type:s,checked:a}=e.target;f(e=>He(He({},e),{},{[t]:"checkbox"===s?a:n}))},R=e=>{const{name:t,value:n,type:s,checked:a}=e.target;y(e=>He(He({},e),{},{[t]:"checkbox"===s?a:n}))},z=e=>{const{name:t,value:n,type:s,checked:a}=e.target;j(e=>He(He({},e),{},{[t]:"checkbox"===s?a:n}))};return(0,tt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold",children:"Qu\u1ea3n l\xfd Ch\u01b0\u01a1ng tr\xecnh & H\u1ecdc ph\u1ea7n"}),C&&(0,tt.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:C}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,tt.jsx)("h2",{className:"text-xl font-semibold",children:"Danh s\xe1ch ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o"}),(0,tt.jsx)("button",{type:"button",onClick:()=>O(),className:"px-3 py-1.5 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700",children:"+ Th\xeam ch\u01b0\u01a1ng tr\xecnh"})]}),(0,tt.jsx)("div",{className:"border rounded overflow-hidden",children:(0,tt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,tt.jsx)("thead",{className:"bg-gray-50",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"M\xe3"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"T\xean ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"S\u1ed1 t\xedn ch\u1ec9"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"px-3 py-2"})]})}),(0,tt.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[d.map(e=>(0,tt.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50 "+((null===m||void 0===m?void 0:m.id)===e.id?"bg-indigo-50":""),onClick:()=>D(e),children:[(0,tt.jsx)("td",{className:"px-3 py-2",children:e.programCode}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.programName}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.creditsRequired}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.isActive?(0,tt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700",children:"\u0110ang ho\u1ea1t \u0111\u1ed9ng"}):(0,tt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-600",children:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"})}),(0,tt.jsxs)("td",{className:"px-3 py-2 text-right space-x-2",children:[(0,tt.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),(async e=>{w(t=>He(He({},t),{},{open:!0,loading:!0,program:e}));try{var t;const[n,s,a]=await Promise.all([Pa.getProgramById(e.id),Pa.getSubjectsByProgram(e.id),Pa.getPlosByProgram(e.id)]),r=L(s),l=L(a),o=r.map(async e=>{try{const t=await Pa.getClosBySubject(e.id);return[e.id,L(t)]}catch(t){return console.error("Load CLO error",t),[e.id,[]]}}),i=(await Promise.all(o)).reduce((e,t)=>{let[n,s]=t;return e[n]=s,e},{});w({open:!0,loading:!1,program:(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data)||e,subjects:r,plos:l,closBySubject:i})}catch(n){console.error(n),w(e=>He(He({},e),{},{loading:!1})),E("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c chi ti\u1ebft CT\u0110T")}})(e)},className:"text-xs px-2 py-1 rounded border border-blue-300 text-blue-700 hover:bg-blue-50",children:"Xem"}),(0,tt.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),(e=>{var t;f({id:e.id,programCode:e.programCode||"",programName:e.programName||"",description:e.description||"",departmentId:e.departmentId||"",creditsRequired:e.creditsRequired||"",durationYears:e.durationYears||"",degreeType:e.degreeType||"",accreditationStatus:e.accreditationStatus||"",isActive:null===(t=e.isActive)||void 0===t||t})})(e)},className:"text-xs px-2 py-1 rounded border border-gray-300 hover:bg-gray-50",children:"S\u1eeda"}),(0,tt.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ch\u01b0\u01a1ng tr\xecnh n\xe0y?"))try{k(!0),E(""),await Pa.deleteProgram(e),(null===m||void 0===m?void 0:m.id)===e&&(h(null),p([]),T("")),await I()}catch(t){console.error(t),E("X\xf3a ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o th\u1ea5t b\u1ea1i")}finally{k(!1)}})(e.id)},className:"text-xs px-2 py-1 rounded border border-red-300 text-red-700 hover:bg-red-50",children:"X\xf3a"})]})]},e.id)),!d.length&&(0,tt.jsx)("tr",{children:(0,tt.jsx)("td",{className:"px-3 py-4 text-center text-gray-500",colSpan:5,children:"Ch\u01b0a c\xf3 ch\u01b0\u01a1ng tr\xecnh n\xe0o"})})]})]})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,tt.jsx)("h2",{className:"text-lg font-semibold mb-3",children:x.id?"C\u1eadp nh\u1eadt ch\u01b0\u01a1ng tr\xecnh":"Th\xeam ch\u01b0\u01a1ng tr\xecnh m\u1edbi"}),(0,tt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{k(!0),E("");const e={programCode:x.programCode,programName:x.programName,description:x.description,departmentId:x.departmentId?Number(x.departmentId):null,creditsRequired:x.creditsRequired?Number(x.creditsRequired):null,durationYears:x.durationYears?Number(x.durationYears):null,degreeType:x.degreeType,accreditationStatus:x.accreditationStatus,isActive:x.isActive};x.id?await Pa.updateProgram(x.id,e):await Pa.createProgram(e),O(),await I()}catch(t){console.error(t),E("L\u01b0u ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o th\u1ea5t b\u1ea1i")}finally{k(!1)}},className:"space-y-3 text-sm",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xe3 ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsx)("input",{type:"text",name:"programCode",value:x.programCode,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"T\xean ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsx)("input",{type:"text",name:"programName",value:x.programName,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,tt.jsx)("textarea",{name:"description",value:x.description,onChange:A,rows:2,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Khoa/B\u1ed9 m\xf4n (ID)"}),(0,tt.jsx)("input",{type:"number",name:"departmentId",value:x.departmentId,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"T\u1ed5ng s\u1ed1 t\xedn ch\u1ec9"}),(0,tt.jsx)("input",{type:"number",name:"creditsRequired",value:x.creditsRequired,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Th\u1eddi gian (n\u0103m)"}),(0,tt.jsx)("input",{type:"number",name:"durationYears",value:x.durationYears,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Lo\u1ea1i b\u1eb1ng c\u1ea5p"}),(0,tt.jsx)("input",{type:"text",name:"degreeType",value:x.degreeType,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Ch\u1ee9ng nh\u1eadn ki\u1ec3m \u0111\u1ecbnh"}),(0,tt.jsx)("input",{type:"text",name:"accreditationStatus",value:x.accreditationStatus,onChange:A,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,tt.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-700",children:[(0,tt.jsx)("input",{type:"checkbox",name:"isActive",checked:x.isActive,onChange:A,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"\u0110ang ho\u1ea1t \u0111\u1ed9ng"]}),(0,tt.jsxs)("div",{className:"space-x-2",children:[(0,tt.jsx)("button",{type:"button",onClick:O,className:"px-3 py-1.5 text-sm rounded border border-gray-300 hover:bg-gray-50",children:"X\xf3a form"}),(0,tt.jsx)("button",{type:"submit",disabled:S,className:"px-4 py-1.5 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",children:x.id?"C\u1eadp nh\u1eadt":"L\u01b0u m\u1edbi"})]})]})]})]})]}),(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,tt.jsx)("h2",{className:"text-xl font-semibold",children:"H\u1ecdc ph\u1ea7n theo ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsx)("button",{type:"button",onClick:()=>T(null===m||void 0===m?void 0:m.id),className:"px-3 py-1.5 text-sm rounded bg-green-600 text-white hover:bg-green-700",disabled:!m,children:"+ Th\xeam h\u1ecdc ph\u1ea7n"})]}),(0,tt.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Ch\u01b0\u01a1ng tr\xecnh \u0111ang ch\u1ecdn:"," ",m?(0,tt.jsxs)("span",{className:"font-semibold",children:["[",m.programCode,"] ",m.programName]}):(0,tt.jsx)("span",{className:"italic text-gray-500",children:"Ch\u01b0a ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh"})]}),(0,tt.jsx)("div",{className:"border rounded overflow-hidden",children:(0,tt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,tt.jsx)("thead",{className:"bg-gray-50",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"M\xe3 HP"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"T\xean h\u1ecdc ph\u1ea7n"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"TC"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"K\u1ef3"}),(0,tt.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"px-3 py-2"})]})}),(0,tt.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[g.map(e=>(0,tt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,tt.jsx)("td",{className:"px-3 py-2",children:e.subjectCode}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.subjectName}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.credits}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.semester}),(0,tt.jsx)("td",{className:"px-3 py-2",children:e.isActive?(0,tt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700",children:"\u0110ang m\u1edf"}):(0,tt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-600",children:"Ng\u1eebng m\u1edf"})}),(0,tt.jsxs)("td",{className:"px-3 py-2 text-right space-x-2",children:[(0,tt.jsx)("button",{type:"button",onClick:()=>(e=>{var t,n;y({id:e.id,subjectCode:e.subjectCode||"",subjectName:e.subjectName||"",description:e.description||"",programId:e.programId||(null===m||void 0===m?void 0:m.id)||"",credits:e.credits||"",semester:e.semester||"",prerequisites:e.prerequisites||"",corequisites:e.corequisites||"",subjectType:e.subjectType||"",isFoundational:null!==(t=e.isFoundational)&&void 0!==t&&t,isActive:null===(n=e.isActive)||void 0===n||n})})(e),className:"text-xs px-2 py-1 rounded border border-gray-300 hover:bg-gray-50",children:"S\u1eeda"}),(0,tt.jsx)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a h\u1ecdc ph\u1ea7n n\xe0y?"))try{k(!0),E(""),await Pa.deleteSubject(e),null!==m&&void 0!==m&&m.id&&await P(m.id)}catch(t){console.error(t),E("X\xf3a h\u1ecdc ph\u1ea7n th\u1ea5t b\u1ea1i")}finally{k(!1)}})(e.id),className:"text-xs px-2 py-1 rounded border border-red-300 text-red-700 hover:bg-red-50",children:"X\xf3a"})]})]},e.id)),!g.length&&(0,tt.jsx)("tr",{children:(0,tt.jsx)("td",{className:"px-3 py-4 text-center text-gray-500",colSpan:6,children:m?"Ch\u01b0a c\xf3 h\u1ecdc ph\u1ea7n n\xe0o cho ch\u01b0\u01a1ng tr\xecnh n\xe0y":"Ch\u1ecdn m\u1ed9t ch\u01b0\u01a1ng tr\xecnh \u0111\u1ec3 xem danh s\xe1ch h\u1ecdc ph\u1ea7n"})})]})]})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,tt.jsx)("h2",{className:"text-lg font-semibold mb-3",children:b.id?"C\u1eadp nh\u1eadt h\u1ecdc ph\u1ea7n":"Th\xeam h\u1ecdc ph\u1ea7n m\u1edbi"}),(0,tt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==m&&void 0!==m&&m.id||b.programId)try{k(!0),E("");const e=b.programId||m.id,t={subjectCode:b.subjectCode,subjectName:b.subjectName,description:b.description,programId:Number(e),credits:b.credits?Number(b.credits):null,semester:b.semester?Number(b.semester):null,prerequisites:b.prerequisites,corequisites:b.corequisites,subjectType:b.subjectType,isFoundational:b.isFoundational,isActive:b.isActive};b.id?await Pa.updateSubject(b.id,t):await Pa.createSubject(t),T(e),await P(e)}catch(t){console.error(t),E("L\u01b0u h\u1ecdc ph\u1ea7n th\u1ea5t b\u1ea1i")}finally{k(!1)}else E("Vui l\xf2ng ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh tr\u01b0\u1edbc khi th\xeam h\u1ecdc ph\u1ea7n")},className:"space-y-3 text-sm",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xe3 h\u1ecdc ph\u1ea7n"}),(0,tt.jsx)("input",{type:"text",name:"subjectCode",value:b.subjectCode,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500",required:!0})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"T\xean h\u1ecdc ph\u1ea7n"}),(0,tt.jsx)("input",{type:"text",name:"subjectName",value:b.subjectName,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500",required:!0})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,tt.jsx)("textarea",{name:"description",value:b.description,onChange:R,rows:2,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"S\u1ed1 t\xedn ch\u1ec9"}),(0,tt.jsx)("input",{type:"number",name:"credits",value:b.credits,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"K\u1ef3 (semester)"}),(0,tt.jsx)("input",{type:"number",name:"semester",value:b.semester,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Lo\u1ea1i h\u1ecdc ph\u1ea7n"}),(0,tt.jsx)("input",{type:"text",name:"subjectType",value:b.subjectType,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Ti\xean quy\u1ebft"}),(0,tt.jsx)("input",{type:"text",name:"prerequisites",value:b.prerequisites,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Song h\xe0nh"}),(0,tt.jsx)("input",{type:"text",name:"corequisites",value:b.corequisites,onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500"})]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Ch\u01b0\u01a1ng tr\xecnh (ID)"}),(0,tt.jsx)("input",{type:"number",name:"programId",value:b.programId||(null===m||void 0===m?void 0:m.id)||"",onChange:R,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-green-500",disabled:!!m}),(0,tt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:m?"\u0110ang g\u1eafn v\u1edbi ch\u01b0\u01a1ng tr\xecnh \u0111ang ch\u1ecdn, ID \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng \u0111i\u1ec1n.":"Nh\u1eadp ID ch\u01b0\u01a1ng tr\xecnh n\u1ebfu ch\u01b0a ch\u1ecdn \u1edf b\u1ea3ng b\xean tr\xe1i."})]}),(0,tt.jsxs)("div",{className:"flex flex-col justify-center gap-2 mt-1",children:[(0,tt.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-700",children:[(0,tt.jsx)("input",{type:"checkbox",name:"isFoundational",checked:b.isFoundational,onChange:R,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),"H\u1ecdc ph\u1ea7n n\u1ec1n t\u1ea3ng"]}),(0,tt.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-700",children:[(0,tt.jsx)("input",{type:"checkbox",name:"isActive",checked:b.isActive,onChange:R,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),"\u0110ang m\u1edf"]})]})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,tt.jsx)("button",{type:"button",onClick:()=>T(null===m||void 0===m?void 0:m.id),className:"px-3 py-1.5 text-sm rounded border border-gray-300 hover:bg-gray-50",children:"X\xf3a form"}),(0,tt.jsx)("button",{type:"submit",disabled:S,className:"px-4 py-1.5 text-sm rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",children:b.id?"C\u1eadp nh\u1eadt":"L\u01b0u m\u1edbi"})]})]})]})]})]}),(0,tt.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,tt.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,tt.jsx)("h2",{className:"text-xl font-semibold",children:"T\u1ea1o PLO cho ch\u01b0\u01a1ng tr\xecnh"})}),(0,tt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=v.programId||(null===m||void 0===m?void 0:m.id);if(t)try{k(!0),E("");const e={ploCode:v.ploCode,ploName:v.ploName,description:v.description,programId:Number(t),displayOrder:v.displayOrder?Number(v.displayOrder):null,ploLevel:v.ploLevel,assessmentMethod:v.assessmentMethod,isActive:v.isActive};await Pa.createPlo(e),j({ploCode:"",ploName:"",description:"",programId:"",displayOrder:"",ploLevel:"",assessmentMethod:"",isActive:!0})}catch(n){console.error(n),E("T\u1ea1o PLO th\u1ea5t b\u1ea1i")}finally{k(!1)}else E("Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh tr\u01b0\u1edbc khi t\u1ea1o PLO")},className:"space-y-3 text-sm",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh"}),(0,tt.jsxs)("select",{name:"programId",value:v.programId||(null===m||void 0===m?void 0:m.id)||"",onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh --"}),d.map(e=>(0,tt.jsxs)("option",{value:e.id,children:["[",e.programCode,"] ",e.programName]},e.id))]})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xe3 PLO"}),(0,tt.jsx)("input",{type:"text",name:"ploCode",value:v.ploCode,onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"T\xean PLO"}),(0,tt.jsx)("input",{type:"text",name:"ploName",value:v.ploName,onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,tt.jsx)("textarea",{name:"description",value:v.description,onChange:z,rows:2,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Th\u1ee9 t\u1ef1 hi\u1ec3n th\u1ecb"}),(0,tt.jsx)("input",{type:"number",name:"displayOrder",value:v.displayOrder,onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"M\u1ee9c \u0111\u1ed9"}),(0,tt.jsx)("input",{type:"text",name:"ploLevel",value:v.ploLevel,onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Foundational / Advanced"})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-gray-700 mb-1",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1"}),(0,tt.jsx)("input",{type:"text",name:"assessmentMethod",value:v.assessmentMethod,onChange:z,className:"w-full border rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,tt.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-700",children:[(0,tt.jsx)("input",{type:"checkbox",name:"isActive",checked:v.isActive,onChange:z,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"K\xedch ho\u1ea1t"]}),(0,tt.jsx)("button",{type:"submit",disabled:S,className:"px-4 py-1.5 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",children:"L\u01b0u PLO"})]})]})]})}),S&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black/10 flex items-center justify-center pointer-events-none",children:(0,tt.jsx)("div",{className:"bg-white shadow px-4 py-2 rounded text-sm text-gray-700",children:"\u0110ang x\u1eed l\xfd..."})}),N.open&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h2",{className:"text-xl font-semibold",children:"Chi ti\u1ebft ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o"}),(0,tt.jsxs)("p",{className:"text-sm text-gray-600",children:["[",null===(e=N.program)||void 0===e?void 0:e.programCode,"] ",null===(t=N.program)||void 0===t?void 0:t.programName]})]}),(0,tt.jsx)("button",{onClick:()=>w({open:!1,program:null,subjects:[],plos:[],closBySubject:{},loading:!1}),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),N.loading?(0,tt.jsx)("div",{className:"p-6 text-center text-gray-600",children:"\u0110ang t\u1ea3i chi ti\u1ebft..."}):(0,tt.jsxs)("div",{className:"p-6 space-y-6 text-sm",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"M\xf4 t\u1ea3"}),(0,tt.jsx)("p",{className:"text-gray-800",children:(null===(n=N.program)||void 0===n?void 0:n.description)||"-"})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"T\xedn ch\u1ec9"}),(0,tt.jsx)("p",{className:"text-gray-800",children:null!==(s=null===(a=N.program)||void 0===a?void 0:a.creditsRequired)&&void 0!==s?s:"--"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Th\u1eddi gian (n\u0103m)"}),(0,tt.jsx)("p",{className:"text-gray-800",children:null!==(l=null===(o=N.program)||void 0===o?void 0:o.durationYears)&&void 0!==l?l:"--"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"B\u1eb1ng c\u1ea5p"}),(0,tt.jsx)("p",{className:"text-gray-800",children:(null===(i=N.program)||void 0===i?void 0:i.degreeType)||"--"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Ki\u1ec3m \u0111\u1ecbnh"}),(0,tt.jsx)("p",{className:"text-gray-800",children:(null===(c=N.program)||void 0===c?void 0:c.accreditationStatus)||"--"})]})]})]}),(0,tt.jsxs)("div",{className:"space-y-2",children:[(0,tt.jsx)("h3",{className:"text-base font-semibold",children:"PLO c\u1ee7a ch\u01b0\u01a1ng tr\xecnh"}),N.plos.length?(0,tt.jsx)("div",{className:"border rounded divide-y",children:N.plos.map(e=>(0,tt.jsxs)("div",{className:"p-3",children:[(0,tt.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.ploCode," - ",e.ploName]}),(0,tt.jsx)("p",{className:"text-gray-700 text-sm",children:e.description})]},e.id))}):(0,tt.jsx)("p",{className:"text-gray-500",children:"Ch\u01b0a c\xf3 PLO"})]}),(0,tt.jsxs)("div",{className:"space-y-2",children:[(0,tt.jsx)("h3",{className:"text-base font-semibold",children:"H\u1ecdc ph\u1ea7n & CLO"}),N.subjects.length?(0,tt.jsx)("div",{className:"space-y-3",children:N.subjects.map(e=>{var t,n,s;return(0,tt.jsxs)("div",{className:"border rounded p-3",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.subjectCode," - ",e.subjectName]}),(0,tt.jsxs)("p",{className:"text-gray-600 text-xs",children:["TC: ",null!==(t=e.credits)&&void 0!==t?t:"--"," | K\u1ef3: ",null!==(n=e.semester)&&void 0!==n?n:"--"]})]}),(0,tt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:e.isActive?"\u0110ang m\u1edf":"Ng\u1eebng"})]}),(0,tt.jsxs)("div",{className:"mt-2",children:[(0,tt.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"CLO:"}),null!==(s=N.closBySubject[e.id])&&void 0!==s&&s.length?(0,tt.jsx)("ul",{className:"list-disc list-inside text-gray-800 text-sm space-y-1",children:N.closBySubject[e.id].map(e=>(0,tt.jsxs)("li",{children:[(0,tt.jsx)("span",{className:"font-semibold",children:e.cloCode})," - ",e.cloName||e.description]},e.id))}):(0,tt.jsx)("p",{className:"text-gray-500 text-sm",children:"Ch\u01b0a c\xf3 CLO"})]})]},e.id)})}):(0,tt.jsx)("p",{className:"text-gray-500",children:"Ch\u01b0a c\xf3 h\u1ecdc ph\u1ea7n"})]})]})]})})]})},Ka=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ja=Je("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Ga=Je("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Wa={submit:async(e,t)=>{try{return await Js.submit(e,t)}catch(n){throw console.error("Submit syllabus failed:",n),n}},reviewApprove:async(e,t)=>{try{return await Js.reviewApprove(e,t)}catch(n){throw console.error("Review approve failed:",n),n}},approve:async(e,t)=>{try{return await Js.approve(e,t)}catch(n){throw console.error("Approve failed:",n),n}},publish:async(e,t)=>{try{return await Js.publish(e,t)}catch(n){throw console.error("Publish failed:",n),n}},reject:async(e,t,n)=>{try{return await Js.reject(e,t,n)}catch(s){throw console.error("Reject failed:",s),s}},revise:async(e,t)=>{try{return await Js.revise(e,t)}catch(n){throw console.error("Revise failed:",n),n}},getApprovalStatus:async e=>{try{return await Rs.get("/api/syllabuses/".concat(e,"/approval-status"))}catch(t){throw console.error("Get approval status failed:",t),t}},getApprovalHistory:async e=>{try{return await Rs.get("/api/syllabuses/".concat(e,"/approval-history"))}catch(t){throw console.error("Get approval history failed:",t),t}}},Xa=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$a=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Qa=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ya=Je("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Za=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),er="/api/v1",tr="/api/syllabuses",nr={createDualSyllabus:async(e,t)=>{var n;console.log("[Orchestrator] Starting dual syllabus creation",{syllabusCode:e.syllabusCode,subjectId:e.subjectId,cloIds:(null===(n=e.cloPairIds)||void 0===n?void 0:n.length)||0});try{const n={syllabusCode:e.syllabusCode,subjectId:e.subjectId,version:e.version||1,academicYear:e.academicYear,semester:e.semester,content:e.content||"",learningObjectives:e.learningObjectives||"",teachingMethods:e.teachingMethods||"",assessmentMethods:e.assessmentMethods||"",status:"Draft",approvalStatus:"Pending"};console.log("[Orchestrator] Creating in academic-service...");const s=(await Rs.post("".concat(er,"/syllabus"),n)).data.id;console.log("[Orchestrator] Academic syllabus created:",s);const a={syllabusCode:e.syllabusCode,subjectCode:e.subjectCode||"",subjectName:e.subjectName||"",summary:e.summary||"",content:{syllabusCode:e.syllabusCode,subjectCode:e.subjectCode,subjectId:e.subjectId,academicYear:e.academicYear,semester:e.semester,learningObjectives:e.learningObjectives||"",teachingMethods:e.teachingMethods||"",assessmentMethods:e.assessmentMethods||"",cloPairIds:e.cloPairIds||[],modules:e.modules||[]}};console.log("[Orchestrator] Creating in syllabus-service...");const r=await Rs.post(tr,a,{headers:{"X-User-Id":t}}),l=r.data.id;if(console.log("[Orchestrator] Syllabus-service created:",l),console.log("[Orchestrator] Step 3 - CLO info:",{syllabusServiceId:l,syllabusServiceIdType:typeof l,cloPairIds:e.cloPairIds,hasCloPairIds:e.cloPairIds&&e.cloPairIds.length>0}),!l)throw console.error("[Orchestrator] ERROR: syllabusServiceId is undefined!"),new Error("syllabusServiceId is undefined after step 2");if(e.cloPairIds&&e.cloPairIds.length>0){console.log("[Orchestrator] Linking CLOs:",e.cloPairIds,"to syllabus:",l);const t={cloIds:e.cloPairIds};console.log("[Orchestrator] Link payload:",t);const n="".concat(er,"/clo/syllabuses/").concat(l,"/link-clos");console.log("[Orchestrator] Link URL:",n);const s=await Rs.post(n,t);console.log("[Orchestrator] CLOs linked successfully, response:",s)}else console.warn("[Orchestrator] No CLOs to link");const o={id:l,academicId:s,rootId:r.data.rootId,status:r.data.status,createdAt:r.data.createdAt,cloPairIds:e.cloPairIds||[]};return console.log("[Orchestrator] Dual creation successful:",o),o}catch(r){var s,a;throw console.error("[Orchestrator] Error during dual creation:",r),new Error("Failed to create syllabus: ".concat((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||r.message))}},updateDualSyllabusVersion:async(e,t,n,s,a)=>{var r;console.log("[Orchestrator] Starting dual syllabus update",{rootId:e,syllabusServiceId:n,cloIds:(null===(r=s.cloPairIds)||void 0===r?void 0:r.length)||0,deprecatedAcademicId:t});try{console.log("[Orchestrator] Skipping academic-service update (deprecated)");const t={content:{syllabusCode:s.syllabusCode,subjectCode:s.subjectCode,subjectId:s.subjectId,academicYear:s.academicYear,semester:s.semester,learningObjectives:s.learningObjectives||"",teachingMethods:s.teachingMethods||"",assessmentMethods:s.assessmentMethods||"",cloPairIds:s.cloPairIds||[],modules:s.modules||[]},changes:s.changes||""};console.log("[Orchestrator] Creating new version in syllabus-service...");const r=await Rs.post("".concat(tr,"/").concat(e,"/versions"),t,{headers:{"X-User-Id":a}});console.log("[Orchestrator] New version created"),s.cloPairIds&&s.cloPairIds.length>0&&(console.log("[Orchestrator] Updating CLO links..."),await Rs.delete("".concat(er,"/clo/syllabuses/").concat(n)),await Rs.post("".concat(er,"/clo/syllabuses/").concat(n,"/link-clos"),{cloIds:s.cloPairIds}),console.log("[Orchestrator] CLO links updated"));const l={id:r.data.id,academicId:r.data.id,rootId:r.data.rootId,versionNo:r.data.versionNo,status:r.data.status};return console.log("[Orchestrator] Dual update successful:",l),l}catch(i){var l,o;throw console.error("[Orchestrator] Error during dual update:",i),new Error("Failed to update syllabus: ".concat((null===(l=i.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||i.message))}},updateDualSyllabusPartial:async(e,t,n)=>{var s;console.log("[Orchestrator] Starting partial syllabus update",{syllabusServiceId:e,hasModules:(null===(s=t.modules)||void 0===s?void 0:s.length)||0});try{const s={syllabusCode:t.syllabusCode,subjectCode:t.subjectCode,subjectId:t.subjectId,academicYear:t.academicYear,semester:t.semester,learningObjectives:t.learningObjectives||"",teachingMethods:t.teachingMethods||"",assessmentMethods:t.assessmentMethods||"",cloPairIds:t.cloPairIds||[],modules:t.modules||[]},a={summary:t.summary||"",content:JSON.stringify(s)};console.log("[Orchestrator] Updating in syllabus-service (no version change)..."),console.log("[Orchestrator] Payload:",a);const r=await Rs.put("".concat(tr,"/").concat(e),a,{headers:{"X-User-Id":n}});console.log("[Orchestrator] Partial update successful");const l={id:r.data.id,status:r.data.status,versionNo:r.data.versionNo};return console.log("[Orchestrator] Partial update result:",l),l}catch(d){var a,r,l,o,i,c;console.error("[Orchestrator] Error during partial update:",d),console.error("[Orchestrator] Error response:",null===(a=d.response)||void 0===a?void 0:a.data),console.error("[Orchestrator] Error status:",null===(r=d.response)||void 0===r?void 0:r.status);const e=(null===(l=d.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||(null===(i=d.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.error)||d.message||"Unexpected server error";throw new Error("Failed to update syllabus: ".concat(e))}}},sr={getSubjects:async()=>{try{return await Js.getSubjects()}catch(e){throw console.error("getSubjects failed:",e),e}},getClosBySubjectWithPloMapping:async e=>{try{var t;const n=await Rs.get("/api/v1/clo/subject/".concat(e)),s=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[],a=await Promise.all(s.map(async e=>{try{var t;const n=await Rs.get("/api/v1/mapping/clo/".concat(e.id)),s=((null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[]).map(e=>e.ploId||e.plo_id).filter(Boolean),a=await Promise.all(s.map(async e=>{try{var t;const n=await Rs.get("/api/v1/plo/".concat(e));return(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||null}catch(n){return console.warn("Failed to load PLO ".concat(e,":"),n),null}}));return He(He({},e),{},{mappedPlos:a.filter(Boolean),ploIds:s})}catch(n){return console.warn("Failed to load mappings for CLO ".concat(e.id,":"),n),He(He({},e),{},{mappedPlos:[],ploIds:[]})}}));return He(He({},n),{},{data:He(He({},n.data),{},{data:a})})}catch(n){throw console.error("getClosBySubjectWithPloMapping failed:",n),n}},getPlosByProgram:async e=>{try{return await Rs.get("/api/v1/plo/program/".concat(e))}catch(t){throw console.error("getPlosByProgram failed:",t),t}},getAllClos:async()=>{try{return await Js.getAllCLOs()}catch(e){throw console.error("getAllClos failed:",e),e}},getCloById:async e=>{try{return await Js.getCLOById(e)}catch(t){throw console.error("getCloById failed:",t),t}},getAllPlos:async()=>{try{return await Rs.get("/api/v1/plo")}catch(e){throw console.error("getAllPlos failed:",e),e}},getPloById:async e=>{try{return await Rs.get("/api/v1/plo/".concat(e))}catch(t){throw console.error("getPloById failed:",t),t}},getPrograms:async()=>{try{return await Rs.get("/api/v1/program")}catch(e){throw console.error("getPrograms failed:",e),e}},getProgramById:async e=>{try{return await Rs.get("/api/v1/program/".concat(e))}catch(t){throw console.error("getProgramById failed:",t),t}},getSubjectsByProgram:async e=>{try{return await Rs.get("/api/v1/program/".concat(e,"/subjects"))}catch(t){throw console.error("getSubjectsByProgram failed:",t),t}},getDepartments:async()=>{try{return await Rs.get("/api/v1/department")}catch(e){throw console.error("getDepartments failed:",e),e}},getSubjectById:async e=>{try{return await Rs.get("/api/v1/subject/".concat(e))}catch(t){throw console.error("getSubjectById failed:",t),t}},createClo:async e=>{try{return await Rs.post("/api/v1/clo",e)}catch(t){throw console.error("createClo failed:",t),t}},createCloMapping:async e=>{try{return await Rs.post("/api/v1/mapping",e)}catch(t){throw console.error("createCloMapping failed:",t),t}}},ar=e=>{var t;let{syllabusId:n,rootId:s,user:a,onBack:l}=e;console.log("[SyllabusEditorPage] Component initialized with:",{initialSyllabusId:n,rootId:s,hasUser:!!a});const[o,i]=(0,r.useState)(n),c=(0,r.useRef)(n),d=o?"edit":"create",u=(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id);(0,r.useEffect)(()=>{console.log("[SyllabusEditorPage] syllabusId state updated:",o),o&&(c.current=o,console.log("[SyllabusEditorPage] syllabusIdRef updated to:",c.current))},[o]),(0,r.useEffect)(()=>{console.log("[SyllabusEditorPage] Props changed - initialSyllabusId:",n),n&&n!==o&&(console.log("[SyllabusEditorPage] Updating syllabusId from prop:",n),i(n))},[n]);const[m,h]=(0,r.useState)(!0),[g,p]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)("basic"),[N,w]=(0,r.useState)([]),[S,k]=(0,r.useState)(!1),[C,E]=(0,r.useState)([]),[I,P]=(0,r.useState)(!1),[L,O]=(0,r.useState)([]),[T,D]=(0,r.useState)(!1),[A,R]=(0,r.useState)(null),[z,_]=(0,r.useState)(null),[M,U]=(0,r.useState)(null),[F,B]=(0,r.useState)(null),[V,H]=(0,r.useState)([]),[q,K]=(0,r.useState)({subjectId:"",summary:"",learningObjectives:"",teachingMethods:"",assessmentMethods:"",cloPairIds:[],modules:[]}),[J,G]=(0,r.useState)([]),[W,X]=(0,r.useState)(!1),[$,Q]=(0,r.useState)(!1),[Y,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)({week:"",topic:"",content:"",learning_objectives:""}),[ne,se]=(0,r.useState)({cloCode:"",description:"",selectedPloIds:[]}),[ae,re]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{await le(),"edit"===d&&o&&await oe(),h(!1)})()},[o,d]),(0,r.useEffect)(()=>{if(N.length>0&&F&&!q.subjectId){const e=N.find(e=>(e.subjectCode||"").toLowerCase()===F.toLowerCase());e&&(console.log("Matched subject:",e),K(t=>He(He({},t),{},{subjectId:e.id})))}},[N,F,q.subjectId]);const le=async()=>{k(!0);try{var e;const t=await Js.getSubjects(),n=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[],s=Array.isArray(n)?n.map(e=>He(He({},e),{},{subjectCode:(e.subjectCode||e.code||e.subject_code||e.subjectcode||"").trim(),subjectName:(e.subjectName||e.name||e.subject_name||e.subjectname||"").trim()})):[];w(s)}catch(t){console.error("Failed to load subjects",t),alert("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch m\xf4n h\u1ecdc")}finally{k(!1)}},oe=async()=>{try{var e;const t=await Js.getById(o),n=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||{};console.log("Loaded syllabus from API:",n),console.log("[SyllabusEditorPage] Checking rootId from API:",n.rootId||"NOT FOUND"),console.log("[SyllabusEditorPage] Current syllabusId:",o),console.log("[SyllabusEditorPage] Checking for academicId:",n.academicId||n.academicSyllabusId||"NOT FOUND"),n.rootId?(console.log("[SyllabusEditorPage] Setting loadedRootId from API:",n.rootId),U(n.rootId)):(console.log("[SyllabusEditorPage] No rootId in response - this IS the root version"),U(null)),n.academicId||n.academicSyllabusId?(_(n.academicId||n.academicSyllabusId),console.log("[SyllabusEditorPage] Set academicSyllabusId to:",n.academicId||n.academicSyllabusId)):(_(o),console.log("[SyllabusEditorPage] No academicId found, using syllabusId as fallback:",o)),re(n.status||null);let s=[],a={};if(n.content)try{a="string"===typeof n.content?JSON.parse(n.content):n.content,s=a.cloPairIds||[]}catch(Fr){console.warn("Failed to parse content JSON:",Fr)}const r=n.subjectCode||a.subjectCode||"",l=n.subjectId||a.subjectId||"";console.log("Parsed data:",{subjectId:l,subjectCode:r,cloPairIds:s,status:n.status}),B(r),H(s),K({subjectId:l,summary:a.summary||"",learningObjectives:a.learningObjectives||"",teachingMethods:a.teachingMethods||"",assessmentMethods:a.assessmentMethods||"",cloPairIds:s,modules:a.modules||[]})}catch(t){console.error("Failed to load syllabus",t),alert("Kh\xf4ng th\u1ec3 t\u1ea3i gi\xe1o tr\xecnh")}},ie=async e=>{if(e){P(!0);try{var t;const n=await sr.getClosBySubjectWithPloMapping(e),s=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[];E(Array.isArray(s)?s:[])}catch(n){console.error("Load CLOs failed:",n),E([])}finally{P(!1)}}else E([])};(0,r.useEffect)(()=>{if(q.subjectId){const e=N.find(e=>String(e.id)===String(q.subjectId));e&&(ie(q.subjectId),e.programId&&(async e=>{if(!e)return O([]),void R(null);D(!0);try{var t;const a=await sr.getPlosByProgram(e),r=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data||[];O(Array.isArray(r)?r:[]);try{var n;const t=await sr.getProgramById(e);R((null===(n=t.data)||void 0===n?void 0:n.data)||t.data||null)}catch(s){console.warn("Failed to load program details:",s),R(null)}}catch(a){console.error("Load PLOs failed:",a),O([]),R(null)}finally{D(!1)}})(e.programId))}},[q.subjectId,N]);const ce=e=>{K(t=>{const n=t.cloPairIds.includes(e)?t.cloPairIds.filter(t=>t!==e):[...t.cloPairIds,e];return He(He({},t),{},{cloPairIds:n})})},de=async e=>{if(e&&0!==J.length){y(!0);try{for(const t of J)await Js.uploadDocument(e,t,t.name,q.description,u);return!0}catch(t){return console.error("Upload documents failed",t),alert("T\u1ea3i t\u1ec7p th\u1ea5t b\u1ea1i cho m\u1ed9t s\u1ed1 t\xe0i li\u1ec7u"),!1}finally{y(!1)}}};return m?(0,tt.jsx)("div",{className:"p-8 text-center",children:"\u0110ang t\u1ea3i..."}):(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,tt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,tt.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-200 rounded-lg",children:(0,tt.jsx)(_s,{size:20})}),(0,tt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"create"===d?"T\u1ea1o gi\xe1o tr\xecnh m\u1edbi":"Ch\u1ec9nh s\u1eeda gi\xe1o tr\xecnh"})]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsxs)("button",{onClick:async()=>{if(!q.subjectId)return void alert("Vui l\xf2ng ch\u1ecdn m\xf4n h\u1ecdc");if(0===q.cloPairIds.length)return void alert("Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t 1 CLO");const e=N.find(e=>String(e.id)===String(q.subjectId));if(!e||!e.subjectCode)return void alert("M\xf4n h\u1ecdc thi\u1ebfu m\xe3 m\xf4n (subjectCode). Vui l\xf2ng ch\u1ecdn l\u1ea1i ho\u1eb7c t\u1ea3i l\u1ea1i danh s\xe1ch m\xf4n h\u1ecdc.");const t=e.subjectCode.trim(),a=(e.subjectName||e.name||"").trim(),r={syllabusCode:q.syllabusCode||"".concat(t,"-").concat((new Date).getFullYear()),subjectCode:t,subjectName:a,subjectId:Number(q.subjectId),academicYear:q.academicYear||(new Date).getFullYear().toString(),semester:q.semester||1,content:JSON.stringify({summary:q.summary||"",learningObjectives:q.learningObjectives||"",teachingMethods:q.teachingMethods||"",assessmentMethods:q.assessmentMethods||"",modules:q.modules||[],cloPairIds:q.cloPairIds||[],subjectId:Number(q.subjectId),subjectCode:t}),summary:q.summary||"",cloPairIds:q.cloPairIds,modules:q.modules,version:q.version||1};p(!0);try{let e=o,t=z;if("create"===d){console.log("[SyllabusEditorPage] Creating with dual orchestrator");const n=await nr.createDualSyllabus(r,u);e=n.id,t=n.academicId,console.log("[SyllabusEditorPage] Dual creation successful",{syllabusServiceId:e,academicId:t,cloPairIds:n.cloPairIds}),_(t),i(e),await de(e),alert("T\u1ea1o gi\xe1o tr\xecnh th\xe0nh c\xf4ng")}else{const a=c.current||o;if(console.log("[SyllabusEditorPage] Update mode DEBUG:",{syllabusId:o,syllabusIdRef:c.current,effectiveSyllabusId:a,initialSyllabusId:n,rootId:s,syllabusStatus:ae}),!a)throw console.error("[SyllabusEditorPage] CRITICAL ERROR: No syllabusId available for update!"),alert("L\u1ed7i: Kh\xf4ng c\xf3 ID gi\xe1o tr\xecnh \u0111\u1ec3 c\u1eadp nh\u1eadt. Vui l\xf2ng \u0111\xf3ng v\xe0 m\u1edf l\u1ea1i trang ch\u1ec9nh s\u1eeda."),new Error("Kh\xf4ng c\xf3 ID gi\xe1o tr\xecnh \u0111\u1ec3 c\u1eadp nh\u1eadt");console.log("[SyllabusEditorPage] Update mode - status:",ae,"syllabusId:",a);const l=M||a;if(console.log("[SyllabusEditorPage] Using rootId for version creation:",{loadedRootId:M,syllabusId:a,effectiveRootId:l}),"REJECTED"===ae){console.log("[SyllabusEditorPage] Creating new version from REJECTED syllabus"),console.log("[SyllabusEditorPage] academicSyllabusId:",z);const n=await nr.updateDualSyllabusVersion(l,z||a,a,He(He({},r),{},{changes:"T\u1ea1o version m\u1edbi t\u1eeb b\u1ea3n b\u1ecb t\u1eeb ch\u1ed1i"}),u);e=n.id,t=n.academicId,console.log("[SyllabusEditorPage] New version created from REJECTED",{syllabusServiceId:e,academicId:t})}else if("DRAFT"===ae){console.log("[SyllabusEditorPage] Creating new version for DRAFT (backend has no update API)");const n=await nr.updateDualSyllabusVersion(l,z||a,a,He(He({},r),{},{changes:"C\u1eadp nh\u1eadt gi\xe1o tr\xecnh"}),u);e=n.id,t=n.academicId,console.log("[SyllabusEditorPage] New DRAFT version created",{syllabusServiceId:e,academicId:t,versionNo:n.versionNo})}else{console.log("[SyllabusEditorPage] Partial update (documents only) for status:",ae);const e=await nr.updateDualSyllabusPartial(a,r,u);console.log("[SyllabusEditorPage] Partial update successful",{syllabusServiceId:e.id,status:e.status,versionNo:e.versionNo})}await de(e)}null===l||void 0===l||l()}catch(g){var m,h;console.error("[SyllabusEditorPage] Save failed:",g),alert("L\u01b0u th\u1ea5t b\u1ea1i: "+(g.message||(null===(m=g.response)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.message)||"Unknown error"))}finally{p(!1)}},disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium flex items-center gap-2",children:[(0,tt.jsx)(fa,{size:18}),g?"\u0110ang l\u01b0u...":"L\u01b0u b\u1ea3n nh\xe1p"]}),"edit"===d&&(0,tt.jsxs)("button",{onClick:async()=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n g\u1eedi gi\xe1o tr\xecnh n\xe0y \u0111\u1ec3 xem x\xe9t?")){f(!0);try{await Wa.submit(o,u),alert("G\u1eedi th\xe0nh c\xf4ng. Gi\xe1o tr\xecnh \u0111ang ch\u1edd ph\xf2ng \u0110\xe0o T\u1ea1o xem x\xe9t."),null===l||void 0===l||l()}catch(n){var e,t;console.error("Submit failed:",n),alert("G\u1eedi th\u1ea5t b\u1ea1i: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{f(!1)}}},disabled:x,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium flex items-center gap-2",children:[(0,tt.jsx)(Ja,{size:18}),x?"\u0110ang g\u1eedi...":"G\u1eedi duy\u1ec7t"]})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,tt.jsx)("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:[{id:"basic",label:"Th\xf4ng tin c\u01a1 b\u1ea3n"},{id:"clos",label:"Chu\u1ea9n \u0111\u1ea7u ra (CLO)"},..."edit"!==d?[{id:"files",label:"T\u1ec7p b\xe0i gi\u1ea3ng"}]:[]].map(e=>(0,tt.jsx)("button",{onClick:()=>j(e.id),className:"px-6 py-3 font-medium border-b-2 whitespace-nowrap ".concat(v===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:e.label},e.id))}),(0,tt.jsxs)("div",{className:"p-6",children:["basic"===v&&(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4n h\u1ecdc *"}),(0,tt.jsxs)("select",{value:q.subjectId,onChange:e=>{return t=e.target.value,void K(e=>He(He({},e),{},{subjectId:t}));var t},disabled:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,tt.jsx)("option",{value:"",children:"-- M\xf4n h\u1ecdc --"}),N.map(e=>(0,tt.jsxs)("option",{value:e.id,children:[e.subjectCode," - ",e.subjectName]},e.id))]}),S&&(0,tt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u0110ang t\u1ea3i danh s\xe1ch m\xf4n h\u1ecdc..."})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xf3m t\u1eaft gi\xe1o tr\xecnh"}),(0,tt.jsx)("textarea",{value:q.summary,onChange:e=>{return t="summary",n=e.target.value,void K(e=>He(He({},e),{},{[t]:n}));var t,n},placeholder:"T\xf3m t\u1eaft ng\u1eafn g\u1ecdn v\u1ec1 gi\xe1o tr\xecnh",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),q.subjectId&&(A||L.length>0)&&(0,tt.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[A&&(0,tt.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o: ",(0,tt.jsxs)("span",{className:"text-blue-600 font-semibold",children:[A.programCode," - ",A.programName]})]}),T&&(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:"\u0110ang t\u1ea3i PLO..."}),L.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chu\u1ea9n \u0111\u1ea7u ra ch\u01b0\u01a1ng tr\xecnh (PLO):"}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:L.map(e=>(0,tt.jsxs)("div",{className:"text-xs bg-white p-2 rounded border border-blue-100",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-700",children:e.ploCode||"N/A"}),(0,tt.jsx)("p",{className:"text-gray-600",children:e.description||"N/A"})]},e.id))})]})]})]}),"clos"===v&&(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,tt.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Chu\u1ea9n \u0111\u1ea7u ra h\u1ecdc ph\u1ea7n (CLO) - ",q.cloPairIds.length," / ",C.length," \u0111\u01b0\u1ee3c ch\u1ecdn"]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[C.length>0&&(0,tt.jsxs)("button",{onClick:()=>X(!W),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[(0,tt.jsx)(Xa,{size:14}),W?"\u1ea8n danh s\xe1ch":"Ch\u1ecdn CLO"]}),(0,tt.jsxs)("button",{onClick:()=>Q(!0),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1",children:[(0,tt.jsx)(Ka,{size:14}),"Th\xeam CLO"]})]})]}),!q.subjectId&&(0,tt.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-xs text-yellow-800 flex items-center gap-2",children:[(0,tt.jsx)(Na,{size:14}),"Vui l\xf2ng ch\u1ecdn m\xf4n h\u1ecdc tr\u01b0\u1edbc \u0111\u1ec3 xem danh s\xe1ch CLO"]}),I&&(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:"\u0110ang t\u1ea3i CLOs..."}),W&&q.subjectId&&C.length>0&&(0,tt.jsx)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:(0,tt.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:C.map(e=>(0,tt.jsx)("div",{className:"p-3 bg-white rounded border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:(0,tt.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,tt.jsx)("input",{type:"checkbox",checked:q.cloPairIds.includes(e.id),onChange:()=>ce(e.id),className:"mt-1"}),(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("p",{className:"font-medium text-sm text-gray-700",children:e.cloCode||"N/A"}),(0,tt.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:e.description||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"}),e.mappedPlos&&e.mappedPlos.length>0&&(0,tt.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,tt.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Mapping PLO:"}),(0,tt.jsx)("div",{className:"space-y-1",children:e.mappedPlos.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-purple-50 border border-purple-200 rounded p-1.5",children:[(0,tt.jsx)("p",{className:"font-medium text-purple-700",children:e.ploCode||"PLO"}),(0,tt.jsx)("p",{className:"text-purple-600",children:e.description||e.ploName||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]},t))})]})]})]})},e.id))})}),q.cloPairIds.length>0&&(0,tt.jsxs)("div",{className:"mt-4",children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"CLO \u0111\u01b0\u1ee3c ch\u1ecdn:"}),(0,tt.jsx)("div",{className:"space-y-2",children:C.filter(e=>q.cloPairIds.includes(e.id)).map(e=>(0,tt.jsxs)("div",{className:"flex items-start justify-between p-3 bg-green-50 border border-green-200 rounded",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsxs)("p",{className:"font-medium text-sm text-gray-700 flex items-center gap-2",children:[(0,tt.jsx)($a,{size:14,className:"text-green-600"}),e.cloCode]}),(0,tt.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.mappedPlos&&e.mappedPlos.length>0&&(0,tt.jsxs)("div",{className:"mt-2 pt-2 border-t border-green-200",children:[(0,tt.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Mapping PLO:"}),(0,tt.jsx)("div",{className:"space-y-1",children:e.mappedPlos.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-purple-50 border border-purple-200 rounded p-1.5",children:[(0,tt.jsx)("p",{className:"font-medium text-purple-700",children:e.ploCode||"PLO"}),(0,tt.jsx)("p",{className:"text-purple-600",children:e.description||e.ploName||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]},t))})]})]}),(0,tt.jsx)("button",{onClick:()=>ce(e.id),className:"text-red-600 hover:text-red-800 ml-2",children:(0,tt.jsx)(Ze,{size:16})})]},e.id))})]}),0===C.length&&q.subjectId&&!I&&(0,tt.jsx)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-xs text-gray-600",children:"Kh\xf4ng c\xf3 CLO n\xe0o cho m\xf4n h\u1ecdc n\xe0y. Vui l\xf2ng li\xean h\u1ec7 v\u1edbi Ph\xf2ng \u0110\xe0o T\u1ea1o \u0111\u1ec3 t\u1ea1o CLO."})]}),$&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6 space-y-4",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tt.jsx)("h3",{className:"text-base font-semibold text-gray-800",children:"T\u1ea1o CLO m\u1edbi"}),(0,tt.jsx)("button",{onClick:()=>Q(!1),className:"text-gray-500 hover:text-gray-700",children:(0,tt.jsx)(Ze,{size:18})})]}),(0,tt.jsxs)("div",{className:"space-y-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe3 CLO *"}),(0,tt.jsx)("input",{type:"text",value:ne.cloCode,onChange:e=>se(t=>He(He({},t),{},{cloCode:e.target.value})),placeholder:"VD: CLO1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,tt.jsx)("textarea",{value:ne.description,onChange:e=>se(t=>He(He({},t),{},{description:e.target.value})),placeholder:"M\xf4 t\u1ea3 ng\u1eafn cho CLO",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ch\u1ecdn PLO li\xean k\u1ebft *"}),T&&(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:"\u0110ang t\u1ea3i PLO..."}),!T&&0===L.length&&(0,tt.jsx)("p",{className:"text-xs text-gray-600",children:"Ch\u01b0a c\xf3 PLO cho ch\u01b0\u01a1ng tr\xecnh n\xe0y."}),!T&&L.length>0&&(0,tt.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded p-3 bg-gray-50",children:L.map(e=>(0,tt.jsxs)("label",{className:"flex items-start gap-2 text-sm cursor-pointer",children:[(0,tt.jsx)("input",{type:"checkbox",checked:ne.selectedPloIds.includes(e.id),onChange:()=>{return t=e.id,void se(e=>{const n=e.selectedPloIds.includes(t);return He(He({},e),{},{selectedPloIds:n?e.selectedPloIds.filter(e=>e!==t):[...e.selectedPloIds,t]})});var t},className:"mt-1"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-800",children:e.ploCode||"PLO"}),(0,tt.jsx)("p",{className:"text-xs text-gray-600",children:e.description||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]})]},e.id))})]})]}),(0,tt.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,tt.jsx)("button",{onClick:()=>Q(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",disabled:Y,children:"H\u1ee7y"}),(0,tt.jsx)("button",{onClick:async()=>{if(q.subjectId)if(ne.cloCode.trim())if(0!==ne.selectedPloIds.length){Z(!0);try{var e,t,n;const s={cloCode:ne.cloCode.trim(),cloName:ne.cloCode.trim(),description:ne.description||"",subjectId:Number(q.subjectId)},a=await sr.createClo(s),r=(null===(e=a.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)||(null===(n=a.data)||void 0===n?void 0:n.id);if(!r)throw new Error("Kh\xf4ng x\xe1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c ID CLO v\u1eeba t\u1ea1o");if(ne.selectedPloIds.length>0)for(const e of ne.selectedPloIds)await sr.createCloMapping({cloId:r,ploId:e});await ie(q.subjectId),Q(!1),se({cloCode:"",description:"",selectedPloIds:[]}),K(e=>He(He({},e),{},{cloPairIds:[...new Set([...e.cloPairIds||[],r])]})),alert("T\u1ea1o CLO th\xe0nh c\xf4ng")}catch(r){var s,a;console.error("Create CLO failed:",r),alert("T\u1ea1o CLO th\u1ea5t b\u1ea1i: "+((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||r.message))}finally{Z(!1)}}else alert("Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t 1 PLO \u0111\u1ec3 li\xean k\u1ebft v\u1edbi CLO");else alert("Vui l\xf2ng nh\u1eadp m\xe3 CLO");else alert("Vui l\xf2ng ch\u1ecdn m\xf4n h\u1ecdc tr\u01b0\u1edbc khi t\u1ea1o CLO")},disabled:Y,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:Y?"\u0110ang t\u1ea1o...":"T\u1ea1o CLO"})]})]})}),"files"===v&&(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\u1ea3i l\xean t\u1ec7p b\xe0i gi\u1ea3ng"}),(0,tt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50",children:[(0,tt.jsx)("input",{type:"file",multiple:!0,onChange:e=>{const t=e.target.files;if(!t||0===t.length)return;const n=Array.from(t);G(e=>[...e,...n])},disabled:b,className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.ppt,.pptx,.xlsx,.jpg,.png,.zip"}),(0,tt.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[(0,tt.jsx)(Qa,{size:32,className:"mx-auto mb-2 text-gray-400"}),(0,tt.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["K\xe9o th\u1ea3 t\u1ec7p ho\u1eb7c ",(0,tt.jsx)("span",{className:"text-blue-600",children:"ch\u1ecdn t\u1ec7p"})]}),(0,tt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, Word, PowerPoint, Excel, H\xecnh \u1ea3nh, ZIP (Max 50MB)"})]})]})]}),b&&(0,tt.jsx)("p",{className:"text-center text-gray-600",children:"\u0110ang t\u1ea3i l\xean..."}),J.length>0&&(0,tt.jsxs)("div",{className:"mt-4",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"T\u1ec7p \u0111\xe3 ch\u1ecdn"}),(0,tt.jsx)("ul",{className:"space-y-2",children:J.map((e,t)=>(0,tt.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)(Ya,{size:16,className:"text-gray-500"}),(0,tt.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{onClick:()=>(e=>{const t=URL.createObjectURL(e);window.open(t,"_blank")})(e),className:"text-blue-600 hover:text-blue-800",title:"Xem t\u1ec7p",children:(0,tt.jsx)($s,{size:16})}),(0,tt.jsx)("button",{onClick:()=>{return e=t,void G(t=>t.filter((t,n)=>n!==e));var e},className:"text-red-600 hover:text-red-800",children:(0,tt.jsx)(Za,{size:16})})]})]},t))})]})]})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"T\xf3m t\u1eaft"}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600",children:"M\xf4n h\u1ecdc:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=N.find(e=>String(e.id)===String(q.subjectId)))||void 0===t?void 0:t.subjectName)||"Ch\u01b0a ch\u1ecdn"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600",children:"CLO \u0111\u01b0\u1ee3c ch\u1ecdn:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:q.cloPairIds.length})]})]})]})]})})},rr=e=>{let{syllabusId:t,syllabusStatus:n,userId:s,onCommentAdded:a}=e;const[l,o]=(0,r.useState)([]),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!t||"PENDING_REVIEW"!==n&&"PENDING_APPROVAL"!==n||(async()=>{u(!0);try{o([{id:1,author:"TS. Nguy\u1ec5n V\u0103n A",role:"HoD",timestamp:new Date(Date.now()-72e5),content:"Vui l\xf2ng c\u1eadp nh\u1eadt l\u1ea1i ph\u1ea7n CLO sao cho kh\u1edbp v\u1edbi PLO c\u1ee7a ch\u01b0\u01a1ng tr\xecnh \u0111\xe0o t\u1ea1o. Hi\u1ec7n t\u1ea1i c\xf3 3 CLO ch\u01b0a \u0111\u01b0\u1ee3c \xe1nh x\u1ea1 t\u1edbi PLO n\xe0o.",isDraft:!1},{id:2,author:"Th\u1ea7y/C\xf4 Gi\u1ea3ng vi\xean",role:"Lecturer",timestamp:new Date(Date.now()-36e5),content:"V\xe2ng, em \u0111\xe3 c\u1eadp nh\u1eadt th\xeam c\xe1c CLO m\u1edbi v\xe0 \xe1nh x\u1ea1 l\u1ea1i theo y\xeau c\u1ea7u. Xin c\u1ea3m \u01a1n th\u1ea7y/c\xf4.",isDraft:!1}])}catch(e){console.error("Load comments failed:",e)}finally{u(!1)}})()},[t,n]);return!n||"PENDING_REVIEW"!==n&&"PENDING_APPROVAL"!==n?null:(0,tt.jsxs)("div",{className:"mt-8",children:[(0,tt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udcac B\xecnh lu\u1eadn & Ph\u1ea3n h\u1ed3i"}),d?(0,tt.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,tt.jsx)(Aa,{size:20,className:"inline mr-2 animate-spin"}),"\u0110ang t\u1ea3i b\xecnh lu\u1eadn..."]}):0===l.length?(0,tt.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o. Vui l\xf2ng ch\u1edd ph\xf2ng \u0110\xe0o T\u1ea1o ho\u1eb7c HoD ph\u1ea3n h\u1ed3i v\u1ec1 gi\xe1o tr\xecnh c\u1ee7a b\u1ea1n."}):(0,tt.jsx)("div",{className:"space-y-4 mb-6",children:l.map(e=>(0,tt.jsxs)("div",{className:"p-4 rounded-lg border ".concat("HoD"===e.role?"bg-yellow-50 border-yellow-200":"AA"===e.role?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:[(0,tt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:e.author}),(0,tt.jsxs)("p",{className:"text-xs text-gray-600",children:["HoD"===e.role&&"\ud83d\udc68\u200d\ud83d\udcbc Tr\u01b0\u1edfng b\u1ed9 m\xf4n","AA"===e.role&&"\ud83c\udfeb Ph\xf2ng \u0110\xe0o T\u1ea1o","Lecturer"===e.role&&"\ud83d\udc69\u200d\ud83c\udfeb Gi\u1ea3ng vi\xean"]})]}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleString("vi-VN")})]}),(0,tt.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:e.content})]},e.id))}),(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Th\xeam b\xecnh lu\u1eadn / Ph\u1ea3n h\u1ed3i"}),(0,tt.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),placeholder:"Nh\u1eadp ph\u1ea3n h\u1ed3i, c\u1ea3m \u01a1n ho\u1eb7c c\xe2u h\u1ecfi c\u1ee7a b\u1ea1n...",rows:3,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mb-3"}),(0,tt.jsxs)("button",{onClick:async()=>{if(i.trim()){h(!0);try{const e={id:Date.now(),author:"B\u1ea1n",role:"Lecturer",timestamp:new Date,content:i,isDraft:!1};o(t=>[...t,e]),c(""),a&&a(),alert("B\xecnh lu\u1eadn \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam")}catch(n){var e,t;console.error("Add comment failed:",n),alert("Th\xeam b\xecnh lu\u1eadn th\u1ea5t b\u1ea1i: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{h(!1)}}else alert("Vui l\xf2ng nh\u1eadp b\xecnh lu\u1eadn")},disabled:m||!i.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(Ja,{size:16}),m?"\u0110ang g\u1eedi...":"G\u1eedi b\xecnh lu\u1eadn"]})]}),(0,tt.jsx)("p",{className:"text-xs text-gray-500 mt-3 italic",children:"\ud83d\udca1 Tip: S\u1eed d\u1ee5ng ph\u1ea7n n\xe0y \u0111\u1ec3 giao ti\u1ebfp v\u1edbi HoD ho\u1eb7c Ph\xf2ng \u0110\xe0o T\u1ea1o v\u1ec1 c\xe1c y\xeau c\u1ea7u ch\u1ec9nh s\u1eeda."})]})},lr=e=>{let{syllabusId:t,userId:n}=e;const[s,a]=(0,r.useState)(null),[l,o]=(0,r.useState)(""),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),g=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"];return(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[(0,tt.jsxs)("h5",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,tt.jsx)(Qa,{size:18}),"T\u1ea3i l\xean t\xe0i li\u1ec7u m\u1edbi"]}),(0,tt.jsxs)("div",{className:"space-y-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\u1ec7p *"}),(0,tt.jsx)("input",{type:"file",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(u(""),h(""),g.includes(n.type)?n.size>52428800?u("T\u1ec7p qu\xe1 l\u1edbn. T\u1ed1i \u0111a ".concat(50,"MB")):a(n):u("\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ed7 tr\u1ee3. Cho ph\xe9p: PDF, DOC, DOCX, TXT"))},accept:".pdf,.doc,.docx,.txt",className:"block w-full text-sm text-gray-500 file:px-3 file:py-1 file:border file:border-gray-300 file:rounded file:bg-white file:hover:bg-gray-50"}),(0,tt.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["PDF, DOC, DOCX, TXT \u2022 T\u1ed1i \u0111a ",50,"MB"]})]}),s&&(0,tt.jsxs)("div",{className:"p-2 bg-white border border-gray-200 rounded text-sm",children:["\ud83d\udcce ",s.name," (",(s.size/1024/1024).toFixed(2),"MB)"]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4 t\u1ea3 (tu\u1ef3 ch\u1ecdn)"}),(0,tt.jsx)("textarea",{value:l,onChange:e=>o(e.target.value),placeholder:"M\xf4 t\u1ea3 n\u1ed9i dung t\xe0i li\u1ec7u...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d&&(0,tt.jsxs)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded text-sm flex gap-2",children:[(0,tt.jsx)(Na,{size:16,className:"flex-shrink-0 mt-0.5"}),d]}),m&&(0,tt.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:m}),(0,tt.jsx)("button",{onClick:async()=>{if(t)if(s){c(!0),u(""),h("");try{await Js.uploadDocument(t,s,"",l,n),h("\u2705 T\u1ea3i l\xean th\xe0nh c\xf4ng"),a(null),o(""),setTimeout(()=>h(""),3e3)}catch(i){var e,r;console.error("Upload failed:",i);const t=(null===(e=i.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.error)||i.message||"T\u1ea3i l\xean th\u1ea5t b\u1ea1i";u("\u274c ".concat(t))}finally{c(!1)}}else u("Vui l\xf2ng ch\u1ecdn t\u1ec7p");else u("Vui l\xf2ng ch\u1ecdn gi\xe1o tr\xecnh")},disabled:i||!s,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm",children:i?"\u23f3 \u0110ang t\u1ea3i...":"\u2b06\ufe0f T\u1ea3i l\xean"})]})]})},or=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ir=e=>{let{syllabusId:t,userId:n,onRefresh:s}=e;const[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(t){i(!0),d("");try{const e=await Js.getDocumentsBySyllabus(t);l(e.data||[])}catch(e){console.error("Failed to fetch documents:",e),d("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch t\xe0i li\u1ec7u"),l([])}finally{i(!1)}}})()},[t]);return(0,tt.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 mt-4",children:[(0,tt.jsxs)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 flex items-center justify-between",onClick:()=>m(!u),children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900",children:["\ud83d\udcce T\xe0i li\u1ec7u (",a.length,")"]}),u?(0,tt.jsx)(or,{size:20}):(0,tt.jsx)(Xa,{size:20})]}),u&&(0,tt.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[c&&(0,tt.jsx)("div",{className:"text-red-600 text-sm mb-3",children:c}),o?(0,tt.jsx)("div",{className:"text-gray-500 text-sm",children:"\u0110ang t\u1ea3i..."}):0===a.length?(0,tt.jsx)("div",{className:"text-gray-500 text-sm",children:"Ch\u01b0a c\xf3 t\xe0i li\u1ec7u n\xe0o"}):(0,tt.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,tt.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded hover:bg-gray-100",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.originalName}),(0,tt.jsxs)("p",{className:"text-xs text-gray-600",children:[new Date(e.uploadedAt).toLocaleString("vi-VN")," \u2022 ",(e.fileSize/1024/1024).toFixed(2),"MB"]})]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=await Js.downloadDocument(e),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t||"document",a.click()}catch(n){console.error("Download failed:",n),alert("T\u1ea3i xu\u1ed1ng th\u1ea5t b\u1ea1i")}})(e.id,e.originalName),className:"p-1 hover:bg-blue-100 text-blue-600 rounded",title:"T\u1ea3i xu\u1ed1ng",children:(0,tt.jsx)(ia,{size:16})}),(0,tt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 t\xe0i li\u1ec7u n\xe0y?"))try{await Js.deleteDocument(e,n),l(a.filter(t=>t.id!==e)),alert("Xo\xe1 th\xe0nh c\xf4ng")}catch(t){console.error("Delete failed:",t),alert("Xo\xe1 th\u1ea5t b\u1ea1i")}})(e.id),className:"p-1 hover:bg-red-100 text-red-600 rounded",title:"Xo\xe1",children:(0,tt.jsx)(Za,{size:16})})]})]},e.id))})]})]})},cr=e=>{let{user:t}=e;const[n,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("ALL"),[h,g]=(0,r.useState)(0),[p,x]=(0,r.useState)(0),[f,b]=(0,r.useState)(0),[y,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)({total:0,draft:0,pending:0,approved:0,published:0,rejected:0}),E={DRAFT:"bg-gray-100 text-gray-800",PENDING_REVIEW:"bg-yellow-100 text-yellow-800",PENDING_APPROVAL:"bg-blue-100 text-blue-800",APPROVED:"bg-green-100 text-green-800",PUBLISHED:"bg-purple-100 text-purple-800",REJECTED:"bg-red-100 text-red-800"},I={DRAFT:"\ud83d\udcdd",PENDING_REVIEW:"\ud83d\udc40",PENDING_APPROVAL:"\u23f3",APPROVED:"\u2705",PUBLISHED:"\ud83d\udce2",REJECTED:"\u274c"},P=async()=>{l(!0);try{const e=(await Js.list({q:c,status:u,page:h,size:10})).data;s(e.content||[]),x(e.totalPages||0),b(e.totalElements||0);const t=e.content||[];C({total:t.length,draft:t.filter(e=>"DRAFT"===e.status).length,pending:t.filter(e=>"PENDING_REVIEW"===e.status||"PENDING_APPROVAL"===e.status).length,approved:t.filter(e=>"APPROVED"===e.status).length,published:t.filter(e=>"PUBLISHED"===e.status).length,rejected:t.filter(e=>"REJECTED"===e.status).length})}catch(e){console.error("Failed to load syllabi:",e),alert("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh")}finally{l(!1)}};(0,r.useEffect)(()=>{P()},[h,u,c]);return(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,tt.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,tt.jsxs)("div",{className:"mb-8",children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83d\udcda Danh s\xe1ch gi\xe1o tr\xecnh"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Qu\u1ea3n l\xfd v\xe0 x\xe2y d\u1ef1ng c\xe1c phi\xean b\u1ea3n gi\xe1o tr\xecnh"})]}),(0,tt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 mb-6",children:[{label:"T\u1ed5ng",value:k.total,color:"blue"},{label:"Nh\xe1p",value:k.draft,color:"gray"},{label:"Ch\u1edd",value:k.pending,color:"yellow"},{label:"Duy\u1ec7t",value:k.approved,color:"green"},{label:"Xu\u1ea5t b\u1ea3n",value:k.published,color:"purple"},{label:"T\u1eeb ch\u1ed1i",value:k.rejected,color:"red"}].map(e=>(0,tt.jsxs)("div",{className:"bg-".concat(e.color,"-50 border border-").concat(e.color,"-200 rounded-lg p-3"),children:[(0,tt.jsx)("p",{className:"text-".concat(e.color,"-600 text-xs font-medium"),children:e.label}),(0,tt.jsx)("p",{className:"text-".concat(e.color,"-900 text-2xl font-bold"),children:e.value})]},e.label))}),(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xecm ki\u1ebfm"}),(0,tt.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),g(0)},placeholder:"M\xe3 ho\u1eb7c t\xean m\xf4n h\u1ecdc...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsxs)("select",{value:u,onChange:e=>{m(e.target.value),g(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,tt.jsx)("option",{value:"ALL",children:"T\u1ea5t c\u1ea3"}),(0,tt.jsx)("option",{value:"DRAFT",children:"Nh\xe1p"}),(0,tt.jsx)("option",{value:"PENDING_REVIEW",children:"Ch\u1edd xem x\xe9t"}),(0,tt.jsx)("option",{value:"PENDING_APPROVAL",children:"Ch\u1edd ph\xea duy\u1ec7t"}),(0,tt.jsx)("option",{value:"APPROVED",children:"\u0110\xe3 duy\u1ec7t"}),(0,tt.jsx)("option",{value:"PUBLISHED",children:"\u0110\xe3 xu\u1ea5t b\u1ea3n"}),(0,tt.jsx)("option",{value:"REJECTED",children:"B\u1ecb t\u1eeb ch\u1ed1i"})]})]}),(0,tt.jsx)("div",{className:"flex items-end",children:(0,tt.jsx)("button",{onClick:()=>P(),className:"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"\u27f3 L\xe0m m\u1edbi"})}),(0,tt.jsx)("div",{className:"flex items-end",children:(0,tt.jsxs)("button",{onClick:()=>S(!0),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(Ka,{size:18}),"T\u1ea1o m\u1edbi"]})})]})}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a?(0,tt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"\u0110ang t\u1ea3i..."}):0===n.length?(0,tt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh n\xe0o"}):(0,tt.jsx)("div",{className:"overflow-x-auto",children:(0,tt.jsxs)("table",{className:"w-full",children:[(0,tt.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"M\xf4n h\u1ecdc"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Phi\xean b\u1ea3n"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"C\u1eadp nh\u1eadt"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,tt.jsx)("tbody",{className:"divide-y divide-gray-200",children:n.map(e=>(0,tt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,tt.jsx)("td",{className:"px-6 py-4",children:(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:e.subjectCode}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:e.subjectName})]})}),(0,tt.jsx)("td",{className:"px-6 py-4",children:(0,tt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["v",e.version||1]})}),(0,tt.jsx)("td",{className:"px-6 py-4",children:(0,tt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat(E[e.status]||"bg-gray-100"),children:[I[e.status]," ",e.status]})}),(0,tt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(e.updatedAt).toLocaleDateString("vi-VN")}),(0,tt.jsx)("td",{className:"px-6 py-4 text-center",children:(0,tt.jsxs)("div",{className:"flex gap-2 justify-center",children:["DRAFT"===y.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)("button",{onClick:()=>{N(!1),S(!0)},className:"text-blue-600 hover:text-blue-900 font-medium text-sm",children:"S\u1eeda"}),(0,tt.jsx)("span",{className:"text-gray-300",children:"|"})]}),"REJECTED"===y.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)("button",{onClick:()=>{N(!1),S(!0)},className:"text-orange-600 hover:text-orange-900 font-medium text-sm",children:"S\u1eeda l\u1ea1i"}),(0,tt.jsx)("span",{className:"text-gray-300",children:"|"})]}),(0,tt.jsx)("button",{onClick:()=>{v(e),N(!0)},className:"text-blue-600 hover:text-blue-900 font-medium text-sm",children:"Chi ti\u1ebft"})]})})]},e.id))})]})}),p>1&&(0,tt.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"text-sm text-gray-600",children:["Trang ",h+1,"/",p," \u2022 T\u1ed5ng: ",f]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{onClick:()=>g(Math.max(0,h-1)),disabled:0===h,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50",children:"\u2190 Tr\u01b0\u1edbc"}),(0,tt.jsx)("button",{onClick:()=>g(Math.min(p-1,h+1)),disabled:h===p-1,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50",children:"Sau \u2192"})]})]})]})]}),j&&y&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsx)("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white",children:(0,tt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:y.subjectName}),(0,tt.jsxs)("p",{className:"text-gray-600",children:[y.subjectCode," \u2022 v",y.version]})]}),(0,tt.jsx)("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]})}),(0,tt.jsxs)("div",{className:"p-6",children:[(0,tt.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(E[y.status]),children:[I[y.status]," ",y.status]})]}),(0,tt.jsxs)("div",{className:"text-right",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"C\u1eadp nh\u1eadt"}),(0,tt.jsx)("p",{className:"font-medium",children:new Date(y.updatedAt).toLocaleString("vi-VN")})]})]}),"REJECTED"===y.status&&y.rejectionReason&&(0,tt.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded",children:(0,tt.jsxs)("div",{className:"flex gap-2 text-red-800 text-sm",children:[(0,tt.jsx)(Na,{size:16,className:"flex-shrink-0 mt-0.5"}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium",children:"L\xfd do t\u1eeb ch\u1ed1i:"}),(0,tt.jsx)("p",{className:"mt-1",children:y.rejectionReason})]})]})})]}),(0,tt.jsxs)("div",{className:"mb-6 flex gap-3 flex-wrap",children:["DRAFT"===y.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n g\u1eedi gi\xe1o tr\xecnh n\xe0y \u0111\u1ec3 xem x\xe9t?")){i(!0);try{await Wa.submit(e,(null===t||void 0===t?void 0:t.userId)||(null===t||void 0===t?void 0:t.id)),alert("G\u1eedi th\xe0nh c\xf4ng. Gi\xe1o tr\xecnh \u0111ang ch\u1edd ph\xf2ng \u0110\xe0o T\u1ea1o xem x\xe9t."),P(),N(!1)}catch(a){var n,s;console.error("Submit failed:",a),alert("G\u1eedi th\u1ea5t b\u1ea1i: "+((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||a.message))}finally{i(!1)}}})(y.id),disabled:o,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(Ja,{size:18}),o?"\u0110ang g\u1eedi...":"G\u1eedi \u0111\u1ec3 xem x\xe9t"]}),(0,tt.jsxs)("button",{onClick:()=>{N(!1),S(!0)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(Ga,{size:18}),"Ch\u1ec9nh s\u1eeda"]})]}),"REJECTED"===y.status&&(0,tt.jsx)(tt.Fragment,{children:(0,tt.jsxs)("button",{onClick:()=>{N(!1),S(!0)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(Ga,{size:18}),"Ch\u1ec9nh s\u1eeda"]})}),("PENDING_REVIEW"===y.status||"PENDING_APPROVAL"===y.status||"APPROVED"===y.status||"PUBLISHED"===y.status)&&(0,tt.jsxs)("button",{disabled:!0,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-600 rounded-lg font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)($s,{size:18}),"\u0110ang trong quy tr\xecnh duy\u1ec7t"]})]}),(0,tt.jsx)(ir,{syllabusId:y.id,userId:(null===t||void 0===t?void 0:t.userId)||(null===t||void 0===t?void 0:t.id)}),(0,tt.jsx)(lr,{syllabusId:y.id,userId:(null===t||void 0===t?void 0:t.userId)||(null===t||void 0===t?void 0:t.id)}),(0,tt.jsx)(rr,{syllabusId:y.id,syllabusStatus:y.status,userId:(null===t||void 0===t?void 0:t.userId)||(null===t||void 0===t?void 0:t.id),onCommentAdded:()=>P()})]}),(0,tt.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex gap-3",children:(0,tt.jsx)("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"\u0110\xf3ng"})})]})}),w&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,tt.jsx)("div",{className:"p-4 border-b flex justify-end",children:(0,tt.jsx)("button",{onClick:()=>{S(!1),v(null)},className:"px-3 py-1 bg-gray-200 rounded",children:"\u0110\xf3ng"})}),(0,tt.jsx)("div",{className:"p-4",children:(0,tt.jsx)(ar,{syllabusId:null===y||void 0===y?void 0:y.id,rootId:(null===y||void 0===y?void 0:y.rootSyllabusId)||(null===y||void 0===y?void 0:y.id),user:t,onBack:()=>{S(!1),P()}})})]})})]})},dr=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ur=e=>{let{rootId:t,user:n,onBack:s}=e;const[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[p,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[t]);const f=async()=>{g(!0);try{var e;const n=await Js.getVersions(t);l(n.data||[]),(null===(e=n.data)||void 0===e?void 0:e.length)>=2&&(i(n.data[n.data.length-2].version),d(n.data[n.data.length-1].version))}catch(n){console.error("Failed to load versions:",n),alert("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch phi\xean b\u1ea3n")}finally{g(!1)}};return h?(0,tt.jsx)("div",{className:"p-8 text-center",children:"\u0110ang t\u1ea3i..."}):(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,tt.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,tt.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,tt.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-200 rounded-lg",children:(0,tt.jsx)(_s,{size:20})}),(0,tt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"So s\xe1nh phi\xean b\u1ea3n"})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,tt.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-end",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phi\xean b\u1ea3n 1"}),(0,tt.jsxs)("select",{value:o||"",onChange:e=>i(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn --"}),a.map(e=>(0,tt.jsxs)("option",{value:e.version,children:["v",e.version]},e.version))]})]}),(0,tt.jsx)("div",{className:"text-center",children:(0,tt.jsx)(dr,{size:24,className:"mx-auto text-gray-400"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phi\xean b\u1ea3n 2"}),(0,tt.jsxs)("select",{value:c||"",onChange:e=>d(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn --"}),a.map(e=>(0,tt.jsxs)("option",{value:e.version,children:["v",e.version]},e.version))]})]})]}),(0,tt.jsx)("button",{onClick:async()=>{if(o&&c){x(!0);try{const e=await Js.compare(t,o,c);m(e.data)}catch(e){console.error("Compare failed:",e),alert("So s\xe1nh th\u1ea5t b\u1ea1i")}finally{x(!1)}}else alert("Vui l\xf2ng ch\u1ecdn 2 phi\xean b\u1ea3n")},disabled:p||!o||!c,className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium",children:p?"\u23f3 \u0110ang so s\xe1nh...":"So s\xe1nh"})]}),u&&(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"K\u1ebft qu\u1ea3 so s\xe1nh"}),(0,tt.jsx)("div",{className:"space-y-4",children:0===u.length?(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 s\u1ef1 thay \u0111\u1ed5i gi\u1eefa hai phi\xean b\u1ea3n"}):u.map((e,t)=>(0,tt.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:e.field}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-red-600 mb-1",children:"Tr\u01b0\u1edbc:"}),(0,tt.jsx)("p",{className:"text-sm text-gray-700",children:e.oldValue})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs text-green-600 mb-1",children:"Sau:"}),(0,tt.jsx)("p",{className:"text-sm text-gray-700",children:e.newValue})]})]})]},t))})]})]})})},mr=()=>(0,tt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,tt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,tt.jsxs)("div",{className:"text-center mb-12",children:[(0,tt.jsx)(at,{size:48,className:"mx-auto text-blue-600 mb-4"}),(0,tt.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"C\u1ed5ng Gi\u1ea3ng vi\xean"}),(0,tt.jsx)("p",{className:"text-gray-600 text-lg",children:"X\xe2y d\u1ef1ng, qu\u1ea3n l\xfd v\xe0 ph\xea duy\u1ec7t gi\xe1o tr\xecnh"})]}),(0,tt.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)(rt,{size:32,className:"text-blue-600 mb-3"}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"\ud83d\udccb Qu\u1ea3n l\xfd Gi\xe1o tr\xecnh"}),(0,tt.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,tt.jsx)("li",{children:"\u2713 T\u1ea1o gi\xe1o tr\xecnh m\u1edbi (b\u1ea3n nh\xe1p)"}),(0,tt.jsx)("li",{children:"\u2713 Ch\u1ec9nh s\u1eeda v\xe0 c\u1eadp nh\u1eadt phi\xean b\u1ea3n"}),(0,tt.jsx)("li",{children:"\u2713 G\u1eedi \u0111\u1ec3 xem x\xe9t v\xe0 ph\xea duy\u1ec7t"}),(0,tt.jsx)("li",{children:"\u2713 Theo d\xf5i tr\u1ea1ng th\xe1i xu\u1ea5t b\u1ea3n"})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)(rt,{size:32,className:"text-green-600 mb-3"}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"\ud83d\udcce T\xe0i li\u1ec7u Gi\u1ea3ng d\u1ea1y"}),(0,tt.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,tt.jsx)("li",{children:"\u2713 T\u1ea3i l\xean PDF, Word, TXT (t\u1ed1i \u0111a 50MB)"}),(0,tt.jsx)("li",{children:"\u2713 G\u1eafn t\xe0i li\u1ec7u v\u1edbi gi\xe1o tr\xecnh"}),(0,tt.jsx)("li",{children:"\u2713 T\u1ea3i xu\u1ed1ng t\xe0i li\u1ec7u c\u1ee7a b\u1ea1n"}),(0,tt.jsx)("li",{children:"\u2713 Qu\u1ea3n l\xfd phi\xean b\u1ea3n t\xe0i li\u1ec7u"})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)(za,{size:32,className:"text-orange-600 mb-3"}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"\ud83d\udd04 Workflow Ph\xea duy\u1ec7t"}),(0,tt.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,tt.jsx)("li",{children:"\u2713 Nh\xe1p \u2192 Xem x\xe9t \u2192 Ph\xea duy\u1ec7t"}),(0,tt.jsx)("li",{children:"\u2713 Nh\u1eadn ph\u1ea3n h\u1ed3i t\u1eeb reviewer"}),(0,tt.jsx)("li",{children:"\u2713 S\u1eeda ch\u1eefa theo g\u1ee3i \xfd"}),(0,tt.jsx)("li",{children:"\u2713 Xu\u1ea5t b\u1ea3n cu\u1ed1i c\xf9ng"})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,tt.jsx)(wa,{size:32,className:"text-purple-600 mb-3"}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"\ud83d\udcac B\xecnh lu\u1eadn & Ph\u1ea3n h\u1ed3i"}),(0,tt.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,tt.jsx)("li",{children:"\u2713 B\xecnh lu\u1eadn chi ti\u1ebft t\u1eebng ph\u1ea7n"}),(0,tt.jsx)("li",{children:"\u2713 Theo d\xf5i c\xe1c v\u1ea5n \u0111\u1ec1 (issues)"}),(0,tt.jsx)("li",{children:"\u2713 Trao \u0111\u1ed5i v\u1edbi reviewer"}),(0,tt.jsx)("li",{children:"\u2713 L\u1ecbch s\u1eed thay \u0111\u1ed5i"})]})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-12",children:[(0,tt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\ud83d\udcca Tr\u1ea1ng th\xe1i Gi\xe1o tr\xecnh"}),(0,tt.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,tt.jsxs)("div",{className:"border-l-4 border-gray-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\ud83d\udcdd Nh\xe1p (DRAFT)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110ang so\u1ea1n th\u1ea3o, ch\u01b0a g\u1eedi"})]}),(0,tt.jsxs)("div",{className:"border-l-4 border-yellow-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\ud83d\udc40 Ch\u1edd Xem x\xe9t (PENDING_REVIEW)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110ang \u0111\u01b0\u1ee3c reviewer xem"})]}),(0,tt.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\u23f3 Ch\u1edd Ph\xea duy\u1ec7t (PENDING_APPROVAL)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Reviewer ho\xe0n t\u1ea5t, ch\u1edd approver"})]}),(0,tt.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\u2705 \u0110\xe3 Duy\u1ec7t (APPROVED)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110\u01b0\u1ee3c ph\xea duy\u1ec7t, s\u1eb5n s\xe0ng xu\u1ea5t b\u1ea3n"})]}),(0,tt.jsxs)("div",{className:"border-l-4 border-purple-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\ud83d\udce2 \u0110\xe3 Xu\u1ea5t b\u1ea3n (PUBLISHED)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"C\xf4ng khai tr\xean portal"})]}),(0,tt.jsxs)("div",{className:"border-l-4 border-red-400 pl-4",children:[(0,tt.jsx)("p",{className:"font-semibold text-gray-900",children:"\u274c B\u1ecb T\u1eeb ch\u1ed1i (REJECTED)"}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"C\u1ea7n s\u1eeda ch\u1eefa l\u1ea1i"})]})]})]}),(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,tt.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"\ud83d\ude80 B\u1eaft \u0111\u1ea7u nhanh"}),(0,tt.jsxs)("ol",{className:"text-gray-700 space-y-2",children:[(0,tt.jsx)("li",{children:'1. Nh\u1ea5p "T\u1ea1o m\u1edbi" \u0111\u1ec3 t\u1ea1o gi\xe1o tr\xecnh b\u1ea3n nh\xe1p'}),(0,tt.jsx)("li",{children:"2. \u0110i\u1ec1n th\xf4ng tin c\u01a1 b\u1ea3n (m\xe3 m\xf4n, t\xean m\xf4n)"}),(0,tt.jsx)("li",{children:"3. T\u1ea3i l\xean t\xe0i li\u1ec7u gi\u1ea3ng d\u1ea1y (tu\u1ef3 ch\u1ecdn)"}),(0,tt.jsx)("li",{children:'4. Nh\u1ea5p "G\u1eedi \u0111\u1ec3 xem x\xe9t" khi ho\xe0n t\u1ea5t'}),(0,tt.jsx)("li",{children:"5. Ch\u1edd ph\u1ea3n h\u1ed3i t\u1eeb reviewer, s\u1eeda ch\u1eefa n\u1ebfu c\u1ea7n"}),(0,tt.jsx)("li",{children:"6. Sau khi \u0111\u01b0\u1ee3c duy\u1ec7t, gi\xe1o tr\xecnh s\u1ebd xu\u1ea5t b\u1ea3n"})]})]})]})}),hr={getPending:()=>Rs.get("/api/workflows",{params:{state:"REVIEW"}}),getAll:()=>Rs.get("/api/workflows"),getReview:e=>Rs.get("/api/workflows/".concat(e,"/review")),approve:(e,t)=>Rs.post("/api/workflows/".concat(e,"/approve"),null,{params:t}),reject:(e,t,n)=>Rs.post("/api/workflows/".concat(e,"/reject"),n,{params:t}),requireEdit:(e,t,n)=>Rs.post("/api/workflows/".concat(e,"/require-edit"),n,{params:t}),getHistory:e=>Rs.get("/api/workflows/".concat(e,"/history"))},gr="ROLE_HOD",pr=e=>{let{cloIds:t}=e;const[n,s]=(0,r.useState)({}),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if((t?t.sort().join(","):"")===o.sort().join(",")&&Object.keys(n).length>0)return void l(!1);t&&t.length>0?(async()=>{l(!0);const e={};for(const s of t||[])try{var n;const t=await Js.getCLOById(s),l=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||t;console.log("CLO ".concat(s," fetched:"),l);let o=[];try{var a;const e=((null===(a=(await Rs.get("/api/v1/mapping/clo/".concat(s))).data)||void 0===a?void 0:a.data)||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);o=await Promise.all(e.map(e=>Rs.get("/api/v1/plo/".concat(e)).then(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)||e.data}).catch(()=>null))),o=o.filter(Boolean)}catch(r){console.warn("Failed to fetch PLO mappings for CLO ".concat(s,":"),r)}e[s]=He(He({},l),{},{mappedPlos:o})}catch(o){console.error("Failed to fetch CLO ".concat(s,":"),o),e[s]={id:s,cloCode:"CLO-".concat(s),description:"Kh\xf4ng th\u1ec3 t\u1ea3i",mappedPlos:[]}}s(e),i(t||[]),l(!1)})():l(!1)},[t,o,n]),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["CLO li\xean k\u1ebft (",(null===t||void 0===t?void 0:t.length)||0,")"]}),a?(0,tt.jsx)("div",{className:"text-gray-600 text-sm py-2",children:"\u0110ang t\u1ea3i th\xf4ng tin CLO..."}):(0,tt.jsx)("div",{className:"space-y-3",children:(t||[]).map(e=>{const t=n[e],s=(null===t||void 0===t?void 0:t.cloCode)||(null===t||void 0===t?void 0:t.name)||"CLO-".concat(e),a=(null===t||void 0===t?void 0:t.description)||"",r=(null===t||void 0===t?void 0:t.mappedPlos)||[];return(0,tt.jsxs)("div",{className:"bg-white border border-indigo-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("div",{className:"font-semibold text-indigo-900",children:s}),a&&(0,tt.jsx)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:a}),(null===t||void 0===t?void 0:t.level)&&(0,tt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Level: ",t.level]})]}),(0,tt.jsxs)("span",{className:"ml-2 bg-indigo-100 text-indigo-800 px-3 py-1 rounded text-xs font-medium whitespace-nowrap flex-shrink-0",children:["#",e]})]}),r&&r.length>0&&(0,tt.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-100",children:[(0,tt.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"PLO li\xean k\u1ebft:"}),(0,tt.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-purple-50 border border-purple-200 rounded p-2",children:[(0,tt.jsx)("p",{className:"font-medium text-purple-700",children:e.ploCode||e.code||"PLO"}),(0,tt.jsx)("p",{className:"text-purple-600 mt-0.5",children:e.description||e.ploName||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]},t))})]})]},e)})})]})},xr=e=>{let{user:t,onLogout:n}=e;const s=(()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(Fr){return null}})(),a=t||s,[l,o]=(0,r.useState)([]),[i,c]=(0,r.useState)({total:0,draft:0,pending:0,approved:0,published:0,rejected:0}),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)("ALL"),[g,p]=(0,r.useState)(""),[x,f]=(0,r.useState)("syllabi"),[b,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,k]=(0,r.useState)([]),[C,E]=(0,r.useState)({visible:!1,message:"",type:"info"}),I=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3500;E({visible:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout(()=>E({visible:!1,message:"",type:"info"}),t)},[P,L]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1),[D,A]=(0,r.useState)(!1),[R,z]=(0,r.useState)(!1),[_,M]=(0,r.useState)(null),[U,F]=(0,r.useState)(!1),[B,V]=(0,r.useState)([]),[H,q]=(0,r.useState)(!1),[K,J]=(0,r.useState)(""),G=(0,r.useRef)(0),W=(0,r.useRef)(!1),[X,$]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)([]),[se,ae]=(0,r.useState)(!1),[re,le]=(0,r.useState)(null),[oe,ie]=(0,r.useState)(!1),[ce,de]=(0,r.useState)(null),[ue,me]=(0,r.useState)({}),[he,ge]=(0,r.useState)(null),[pe,xe]=(0,r.useState)(!1),[fe,be]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(!1),[je,Ne]=(0,r.useState)(null),[we,Se]=(0,r.useState)(null),[ke,Ce]=(0,r.useState)(""),[Ee,Ie]=(0,r.useState)(""),[Pe,Le]=(0,r.useState)(!1),[Oe,Te]=(0,r.useState)(!1),[De,Ae]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=localStorage.getItem("cloCheckHistory");if(e)try{Ae(JSON.parse(e))}catch(Fr){console.warn("Failed to load CLO check history:",Fr)}const t=localStorage.getItem("documentSummaries");if(t)try{me(JSON.parse(t))}catch(Fr){console.warn("Failed to load document summaries:",Fr)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("cloCheckHistory",JSON.stringify(De))},[De]),(0,r.useEffect)(()=>{localStorage.setItem("documentSummaries",JSON.stringify(ue))},[ue]);const[Re,ze]=(0,r.useState)({subjectCode:"",subjectName:"",summary:""}),_e=(0,r.useRef)(null),Me=(0,r.useRef)(!1),Ue=(0,r.useRef)(0),Fe=(null===a||void 0===a?void 0:a.role)===gr,Be=(0,r.useCallback)(async()=>{const e=Date.now();if(!(Me.current&&e-Ue.current<3e3)&&!(e-Ue.current<1e3)){Me.current=!0,Ue.current=e;try{var t;if(u(!0),!a)return console.warn("No user available"),Me.current=!1,void u(!1);const e=(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.lecturerId);console.log("Loading syllabi for lecturer:",e);const n=await Rs.get("/api/syllabuses",{params:{page:0,size:200},timeout:3e4});let s=(null===(t=n.data)||void 0===t?void 0:t.content)||n.data||[];const r=[null===a||void 0===a?void 0:a.userId,null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.lecturerId,null===a||void 0===a?void 0:a.username,null===a||void 0===a?void 0:a.userName,null===a||void 0===a?void 0:a.name,null===a||void 0===a?void 0:a.email].filter(Boolean);console.debug("lecturerId candidates:",r,"server sample createdBy:",s.length?s[0].createdBy:null),r.length>0?s=s.filter(e=>r.some(t=>String(t)===String(e.createdBy))):console.warn("No lecturerId candidate found in currentUser, skipping client-side filter"),o(s);const l=s.length,i=s.filter(e=>"DRAFT"===e.status).length,d=s.filter(e=>"PENDING_REVIEW"===e.status||"PENDING_APPROVAL"===e.status).length,m=s.filter(e=>"APPROVED"===e.status).length,h=s.filter(e=>"PUBLISHED"===e.status).length,g=s.filter(e=>"REJECTED"===e.status).length;c({total:l,draft:i,pending:d,approved:m,published:h,rejected:g}),console.log("Syllabi loaded successfully:",{total:l,draft:i,pending:d,approved:m,published:h,rejected:g})}catch(r){var n,s;console.error("Failed to load syllabi:",r);const e=(null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||r.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh";I("L\u1ed7i: ".concat(e),"error"),o([]),c({total:0,draft:0,pending:0,approved:0,published:0,rejected:0})}finally{u(!1),Me.current=!1}}},[a]),Ve=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Fe)return;const t=Date.now();if(!e){if(W.current)return;if(t-G.current<8e3)return}W.current=!0,G.current=t;try{q(!0),J("");const e=(await hr.getPending()).data||[],t=await Promise.all(e.map(async e=>{try{if(e.entityId){const t=await Rs.get("/api/syllabuses/".concat(e.entityId));return He(He({},e),{},{syllabusData:t.data})}return e}catch(t){return console.warn("Failed to fetch syllabus for workflow:",e.id,t),e}}));V(t)}catch(a){var n,s;console.error("Failed to load HOD review queue:",a);const e=(null===a||void 0===a||null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||a.message||"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c danh s\xe1ch c\u1ea7n duy\u1ec7t";J(e),V([])}finally{q(!1),W.current=!1}},[Fe]);(0,r.useEffect)(()=>{_e.current||(_e.current=((e,t)=>{let n;return function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];clearTimeout(n),n=setTimeout(()=>e(...a),t)}})(Be,1e3)),a&&_e.current(),Fe&&Ve()},[a,Be,Fe,Ve]),(0,r.useEffect)(()=>{Fe&&"review"===x&&Ve()},[x,Fe,Ve]);const qe=()=>{let e=(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.lecturerId);if(!e)try{const t=localStorage.getItem("token");if(t){const n=t.split(".");if(3===n.length){const t=JSON.parse(atob(n[1]));e=t.userId||t.sub}}}catch(Fr){console.warn("Failed to decode JWT token for userId:",Fr)}return e||(null===a||void 0===a?void 0:a.username)||(null===a||void 0===a?void 0:a.email)||"unknown"},Ke=async e=>{try{ee(!0),$(!0),Y(null),ne([]);let i=e.entityId||e.id||e.syllabusId;if(!i)return void I("Kh\xf4ng t\xecm th\u1ea5y ID gi\xe1o tr\xecnh","error");const c=(await Rs.get("/api/syllabuses/".concat(i))).data;let d=null,u=null;if(c.subjectCode)try{var t;if(d=(await Rs.get("/api/academic/subjects/code/".concat(c.subjectCode))).data,null!==(t=d)&&void 0!==t&&t.programId)try{u=(await Rs.get("/api/academic/programs/".concat(d.programId))).data}catch(a){console.warn("Failed to fetch program info:",a)}}catch(r){console.warn("Failed to fetch subject info:",r)}ae(!0);try{var n;const e=await Js.getDocumentsBySyllabus(i),t=(null===(n=e.data)||void 0===n?void 0:n.data)||e.data||[];ne(Array.isArray(t)?t:[]);const a={};for(const n of t)if(n.aiIngestionJobId)try{var s;console.log("[Phase 6] Loading cached summary for doc ".concat(n.id,", jobId=").concat(n.aiIngestionJobId));const e=await Ta.getJobStatus(n.aiIngestionJobId),t=(null===(s=e.data)||void 0===s?void 0:s.data)||e.data;let r=null;"SUCCEEDED"===(null===t||void 0===t?void 0:t.status)&&null!==t&&void 0!==t&&t.result?(r=t.result,"string"===typeof r&&(r=JSON.parse(r))):null!==t&&void 0!==t&&t.summary&&(r=t),r&&(a[n.id]={summary:r.summary||"",bullets:Array.isArray(r.bullets)?r.bullets:[],keywords:Array.isArray(r.keywords)?r.keywords:[],targetAudience:r.targetAudience||"",prerequisites:r.prerequisites||"",ragUsed:r.ragUsed||!1,ragContext:r.ragContext||"",tokens:r.tokens||0,model:r.model||""},console.log("[Phase 6] Loaded cached summary for doc ".concat(n.id)))}catch(l){console.warn("[Phase 6] Failed to load cached summary for doc ".concat(n.id,":"),l)}Object.keys(a).length>0&&(me(a),console.log("[Phase 6] Loaded all cached summaries:",a))}catch(o){console.warn("Failed to fetch documents:",o),ne([])}finally{ae(!1)}le(null),de(null),Y(He(He({},c),{},{subjectInfo:d,programInfo:u}))}catch(i){console.error("Failed to load syllabus detail:",i),I("Kh\xf4ng th\u1ec3 t\u1ea3i chi ti\u1ebft gi\xe1o tr\xecnh","error"),$(!1)}finally{ee(!1)}},Je=async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n xo\xe1 gi\xe1o tr\xecnh n\xe0y?"))try{await Rs.delete("/api/syllabuses/".concat(e)),Be()}catch(t){console.error("Delete error:",t),I("Xo\xe1 gi\xe1o tr\xecnh th\u1ea5t b\u1ea1i","error")}},Ge=async e=>{if(window.confirm("G\u1eedi gi\xe1o tr\xecnh n\xe0y \u0111\u1ec3 ph\xea duy\u1ec7t?"))try{const t=(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.username)||(null===a||void 0===a?void 0:a.email)||"unknown";await Rs.post("/api/syllabuses/".concat(e,"/submit"),null,{headers:{"X-User-Id":t}}),Be(),I("\u0110\xe3 g\u1eedi gi\xe1o tr\xecnh \u0111\u1ec3 ph\xea duy\u1ec7t","success")}catch(t){console.error("Submit error:",t),I("G\u1eedi ph\xea duy\u1ec7t th\u1ea5t b\u1ea1i","error")}},We=async e=>{M(e),ze({subjectCode:e.subjectCode||e.courseCode||"",subjectName:e.subjectName||e.courseName||"",summary:e.summary||""});try{const n=(await Rs.get("/api/syllabuses/".concat(e.id))).data;console.log("[LecturerDashboard] openEditModal - Loaded full data:",n),console.log("[LecturerDashboard] openEditModal - Full data ID:",n.id),ze({subjectCode:n.subjectCode||e.subjectCode||"",subjectName:n.subjectName||e.subjectName||"",summary:n.summary||""});try{const e=await Js.getDocumentsBySyllabus(n.id);k(e.data||e||[])}catch(t){console.warn("Failed to load documents:",t),k([])}M(n),F(!0),A(!1)}catch(n){console.error("Failed to load full syllabus data:",n),k([])}},Xe=async e=>{try{var t;const n=await Js.downloadDocument(e),s=n.data instanceof Blob?n.data:new Blob([n.data],{type:(null===(t=n.headers)||void 0===t?void 0:t["content-type"])||"application/octet-stream"}),a=window.URL.createObjectURL(s);window.open(a,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(a),6e4)}catch(n){console.error("View error:",n),I("Kh\xf4ng th\u1ec3 xem t\xe0i li\u1ec7u","error")}},$e=()=>{ze({subjectCode:"",subjectName:"",summary:""}),M(null)},Qe=()=>{y(null),j(""),w("")},Ye=()=>{ve(!1),Ne(null),Se(null),Ce(""),Ie(""),Le(!1)},Ze=l.filter(e=>{var t,n;const s="ALL"===m||e.status===m,a=!g||(null===(t=e.subjectCode)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(n=e.subjectName)||void 0===n?void 0:n.toLowerCase().includes(g.toLowerCase()));return s&&a}),et=e=>{const t={DRAFT:{color:"bg-gray-100 text-gray-800",icon:(0,tt.jsx)(rt,{size:14}),text:"Nh\xe1p"},PENDING_REVIEW:{color:"bg-yellow-100 text-yellow-800",icon:(0,tt.jsx)(ot,{size:14}),text:"Ch\u1edd duy\u1ec7t"},PENDING_APPROVAL:{color:"bg-blue-100 text-blue-800",icon:(0,tt.jsx)(ot,{size:14}),text:"Ch\u1edd ph\xea duy\u1ec7t"},APPROVED:{color:"bg-green-100 text-green-800",icon:(0,tt.jsx)(Sa,{size:14}),text:"\u0110\xe3 duy\u1ec7t"},PUBLISHED:{color:"bg-purple-100 text-purple-800",icon:(0,tt.jsx)(Sa,{size:14}),text:"\u0110\xe3 xu\u1ea5t b\u1ea3n"},REJECTED:{color:"bg-red-100 text-red-800",icon:(0,tt.jsx)(Fa,{size:14}),text:"B\u1ecb t\u1eeb ch\u1ed1i"}},n=t[e]||t.DRAFT;return(0,tt.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ".concat(n.color),children:[n.icon,n.text]})};return(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-white",children:[C.visible&&(0,tt.jsx)("div",{className:"fixed top-6 right-6 z-50",children:(0,tt.jsx)("div",{className:"max-w-sm px-4 py-3 rounded-lg shadow-lg text-white ".concat("error"===C.type?"bg-red-600":"success"===C.type?"bg-green-600":"warning"===C.type?"bg-yellow-600 text-black":"bg-indigo-600"),children:C.message})}),(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,tt.jsx)("div",{className:"mb-8",children:(0,tt.jsxs)("p",{className:"text-gray-600 text-lg",children:["Xin ch\xe0o, ",(0,tt.jsx)("span",{className:"font-semibold text-indigo-600",children:(null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.fullName)||"Gi\u1ea3ng vi\xean"})]})}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-indigo-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"T\u1ed5ng gi\xe1o tr\xecnh"}),(0,tt.jsx)(at,{size:24,className:"text-indigo-500"})]}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:i.total})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-yellow-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"Nh\xe1p"}),(0,tt.jsx)(rt,{size:24,className:"text-yellow-500"})]}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:i.draft})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-blue-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"Ch\u1edd duy\u1ec7t"}),(0,tt.jsx)(ot,{size:24,className:"text-blue-500"})]}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.pending})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border-l-4 border-green-500",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"\u0110\xe3 duy\u1ec7t"}),(0,tt.jsx)(Sa,{size:24,className:"text-green-500"})]}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:i.approved+i.published})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg mb-6",children:[(0,tt.jsxs)("div",{className:"flex border-b",children:[(0,tt.jsx)("button",{onClick:()=>f("syllabi"),className:"px-6 py-4 font-semibold ".concat("syllabi"===x?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600"),children:"Gi\xe1o tr\xecnh c\u1ee7a t\xf4i"}),Fe&&(0,tt.jsx)("button",{onClick:()=>f("review"),className:"px-6 py-4 font-semibold ".concat("review"===x?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600"),children:"Duy\u1ec7t gi\xe1o tr\xecnh"})]}),"syllabi"===x&&(0,tt.jsxs)("div",{className:"p-8",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,tt.jsxs)("button",{onClick:()=>{M(null),F(!0)},className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold",children:[(0,tt.jsx)(Ka,{size:20}),"T\u1ea1o gi\xe1o tr\xecnh m\u1edbi"]}),(0,tt.jsxs)("div",{className:"flex gap-4",children:[(0,tt.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm...",value:g,onChange:e=>p(e.target.value),className:"border rounded-lg px-4 py-2"}),(0,tt.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"border rounded-lg px-4 py-2",children:[(0,tt.jsx)("option",{value:"ALL",children:"T\u1ea5t c\u1ea3"}),(0,tt.jsx)("option",{value:"DRAFT",children:"Nh\xe1p"}),(0,tt.jsx)("option",{value:"PENDING_REVIEW",children:"Ch\u1edd duy\u1ec7t"}),(0,tt.jsx)("option",{value:"PENDING_APPROVAL",children:"Ch\u1edd ph\xea duy\u1ec7t"}),(0,tt.jsx)("option",{value:"APPROVED",children:"\u0110\xe3 duy\u1ec7t"}),(0,tt.jsx)("option",{value:"PUBLISHED",children:"\u0110\xe3 xu\u1ea5t b\u1ea3n"}),(0,tt.jsx)("option",{value:"REJECTED",children:"B\u1ecb t\u1eeb ch\u1ed1i"})]})]})]}),(0,tt.jsx)("div",{className:"overflow-x-auto",children:(0,tt.jsxs)("div",{className:"relative",children:[0===Ze.length?(0,tt.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,tt.jsx)("div",{className:"mb-2 font-semibold",children:"B\u1ea1n ch\u01b0a c\xf3 gi\xe1o tr\xecnh n\xe0o"}),(0,tt.jsx)("div",{className:"mb-4 text-sm",children:"B\u1eaft \u0111\u1ea7u t\u1ea1o gi\xe1o tr\xecnh m\u1edbi \u0111\u1ec3 qu\u1ea3n l\xfd t\xe0i li\u1ec7u v\xe0 phi\xean b\u1ea3n."})]}):(0,tt.jsxs)("table",{className:"w-full",children:[(0,tt.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"M\xe3 m\xf4n"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"T\xean gi\xe1o tr\xecnh"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Phi\xean b\u1ea3n"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"C\u1eadp nh\u1eadt"}),(0,tt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,tt.jsx)("tbody",{className:"divide-y divide-gray-200",children:Ze.map(e=>(0,tt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,tt.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.subjectCode}),(0,tt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.subjectName}),(0,tt.jsx)("td",{className:"px-6 py-4",children:et(e.status)}),(0,tt.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:["v",e.versionNo||e.version]}),(0,tt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.updatedAt?new Date(e.updatedAt).toLocaleDateString("vi-VN"):"-"}),(0,tt.jsx)("td",{className:"px-6 py-4",children:(0,tt.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,tt.jsx)("button",{onClick:()=>Ke(e),className:"text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",title:"Xem chi ti\u1ebft",children:(0,tt.jsx)($s,{size:16})}),(0,tt.jsx)("button",{onClick:()=>(async e=>{Ne(e),Se(null),Ce(""),Ie("");try{var t;console.log("[LecturerDashboard] Loading documents for syllabus:",e.id);const n=await Js.getDocumentsBySyllabus(e.id);console.log("[LecturerDashboard] Documents response:",n);const s=(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data)||(null===n||void 0===n?void 0:n.data)||n||[],a=Array.isArray(s)?s:[];console.log("[LecturerDashboard] Documents loaded:",a.length,a),ne(a)}catch(n){console.warn("Failed to load documents:",n),ne([])}ve(!0)})(e),className:"text-green-600 hover:text-green-700 font-medium flex items-center gap-1",title:"Th\xeam b\xe0i gi\u1ea3ng",children:(0,tt.jsx)(Qa,{size:16})}),"DRAFT"===e.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)("button",{onClick:()=>{console.log("[LecturerDashboard] Opening editor for syllabus:",e.id,e),We(e)},className:"text-green-600 hover:text-green-700 font-medium flex items-center gap-1",title:"Ch\u1ec9nh s\u1eeda",children:(0,tt.jsx)(xa,{size:16})}),(0,tt.jsx)("button",{onClick:()=>Ge(e.id),className:"text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1",title:"G\u1eedi ph\xea duy\u1ec7t",children:(0,tt.jsx)(Qa,{size:16})}),(0,tt.jsx)("button",{onClick:()=>Je(e.id),className:"text-red-600 hover:text-red-700 font-medium flex items-center gap-1",title:"Xo\xe1",children:(0,tt.jsx)(Za,{size:16})})]}),"REJECTED"===e.status&&(0,tt.jsx)("button",{onClick:()=>{console.log("[LecturerDashboard] Opening editor for REJECTED syllabus:",e.id,e),We(e)},className:"text-gray-600 hover:text-gray-700 font-medium flex items-center gap-1",title:"Ch\u1ec9nh s\u1eeda",children:(0,tt.jsx)(xa,{size:16})})]})})]},e.id))})]}),d&&(0,tt.jsx)("div",{className:"absolute top-2 right-2",children:(0,tt.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-indigo-600 rounded-full","aria-hidden":"true"})})]})})]}),"review"===x&&Fe&&(0,tt.jsxs)("div",{className:"p-8",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tt.jsx)("div",{children:(0,tt.jsx)("h3",{className:"text-lg font-semibold",children:"Danh s\xe1ch c\u1ea7n duy\u1ec7t "})}),(0,tt.jsx)("button",{onClick:()=>Ve(!0),className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",disabled:H,children:"L\xe0m m\u1edbi"})]}),K&&(0,tt.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded mb-4",children:K}),H?(0,tt.jsx)("div",{className:"text-gray-600",children:"\u0110ang t\u1ea3i danh s\xe1ch c\u1ea7n duy\u1ec7t..."}):0===B.length?(0,tt.jsx)("div",{className:"text-gray-500",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh n\xe0o \u0111ang ch\u1edd duy\u1ec7t."}):(0,tt.jsx)("div",{className:"overflow-x-auto",children:(0,tt.jsxs)("table",{className:"w-full table-fixed",children:[(0,tt.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"w-1/4 px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"M\xf4n h\u1ecdc"}),(0,tt.jsx)("th",{className:"w-1/4 px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Ng\u01b0\u1eddi t\u1ea1o"}),(0,tt.jsx)("th",{className:"w-1/6 px-6 py-3 text-center text-sm font-semibold text-gray-900",children:"Chi ti\u1ebft"}),(0,tt.jsx)("th",{className:"w-1/3 px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,tt.jsx)("tbody",{className:"divide-y divide-gray-200",children:B.map(e=>(0,tt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,tt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.syllabusData?(0,tt.jsxs)("div",{children:[(0,tt.jsx)("div",{className:"font-medium text-gray-900",children:e.syllabusData.subjectCode}),(0,tt.jsx)("div",{className:"text-xs text-gray-500",children:e.syllabusData.subjectName})]}):(0,tt.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,tt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.syllabusData?(0,tt.jsx)("div",{children:(0,tt.jsx)("div",{className:"font-medium text-gray-900",children:e.syllabusData.createdBy})}):(0,tt.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,tt.jsx)("td",{className:"px-6 py-4 text-center",children:(0,tt.jsx)("button",{onClick:()=>Ke(e),className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Xem"})}),(0,tt.jsx)("td",{className:"px-6 py-4",children:(0,tt.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,tt.jsx)("button",{onClick:()=>(async e=>{try{q(!0);const t=qe();await hr.approve(e,{actionBy:t,role:gr});const n=B.find(t=>t.id===e);if(n&&n.syllabusData)try{await Rs.patch("/api/syllabi/".concat(n.syllabusData.id),{status:"APPROVED"}),console.log("Syllabus status updated to APPROVED")}catch(s){console.warn("Failed to update syllabus status:",s)}await Ve(!0),I("\u0110\xe3 duy\u1ec7t gi\xe1o tr\xecnh","success")}catch(a){var t,n;console.error("Approve failed:",a),I((null===a||void 0===a||null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Duy\u1ec7t th\u1ea5t b\u1ea1i","error"),q(!1)}})(e.id),className:"px-3 py-1 rounded bg-green-600 text-white text-sm hover:bg-green-700 disabled:opacity-60",disabled:H,children:"Duy\u1ec7t"}),(0,tt.jsx)("button",{onClick:()=>(async e=>{const t=window.prompt("Nh\u1eadp l\xfd do t\u1eeb ch\u1ed1i");if(t)try{q(!0),await hr.reject(e,{actionBy:qe(),role:gr},{comment:t});const n=B.find(t=>t.id===e);if(n&&n.syllabusData){const e=n.syllabusData.id;try{await Rs.put("/api/syllabuses/".concat(e),{status:"REJECTED",rejectionReason:t}),console.log("[LecturerDashboard] Syllabus rejected with reason:",t)}catch(a){console.error("[LecturerDashboard] Failed to update syllabus rejection reason:",a)}}await Ve(!0),I("\u0110\xe3 t\u1eeb ch\u1ed1i gi\xe1o tr\xecnh","success")}catch(r){var n,s;console.error("Reject failed:",r),I((null===r||void 0===r||null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"T\u1eeb ch\u1ed1i th\u1ea5t b\u1ea1i","error"),q(!1)}})(e.id),className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-60",disabled:H,children:"T\u1eeb ch\u1ed1i"})]})})]},e.id))})]})})]})]})]}),P&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"T\u1ea1o gi\xe1o tr\xecnh m\u1edbi"}),(0,tt.jsx)("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,tt.jsxs)("div",{className:"p-8 space-y-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe3 m\xf4n h\u1ecdc *"}),(0,tt.jsx)("input",{type:"text",value:Re.subjectCode,onChange:e=>ze(He(He({},Re),{},{subjectCode:e.target.value})),className:"w-full border rounded-lg px-4 py-2",placeholder:"VD: CS-101"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xean m\xf4n h\u1ecdc *"}),(0,tt.jsx)("input",{type:"text",value:Re.subjectName,onChange:e=>ze(He(He({},Re),{},{subjectName:e.target.value})),className:"w-full border rounded-lg px-4 py-2",placeholder:"VD: L\u1eadp tr\xecnh C++"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xf3m t\u1eaft (summary)"}),(0,tt.jsx)("textarea",{value:Re.summary,onChange:e=>ze(He(He({},Re),{},{summary:e.target.value})),className:"w-full border rounded-lg px-4 py-2",rows:2,placeholder:"T\xf3m t\u1eaft ng\u1eafn v\u1ec1 gi\xe1o tr\xecnh (tu\u1ef3 ch\u1ecdn)"})]}),(0,tt.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[(0,tt.jsx)("strong",{children:"Ghi ch\xfa:"})," N\u1ed9i dung gi\xe1o tr\xecnh (modules, m\u1ee5c ti\xeau, \u0111\xe1nh gi\xe1) s\u1ebd \u0111\u01b0\u1ee3c ph\xe1t tri\u1ec3n trong phi\xean ti\u1ebfp theo. Hi\u1ec7n t\u1ea1i b\u1ea1n c\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda th\xf4ng tin c\u01a1 b\u1ea3n v\u1ec1 m\xf4n h\u1ecdc."]})]}),(0,tt.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-end gap-4 border-t",children:[(0,tt.jsx)("button",{onClick:()=>L(!1),className:"px-6 py-2 border rounded-lg hover:bg-gray-100",children:"H\u1ee7y"}),(0,tt.jsx)("button",{onClick:async()=>{try{if(!Re.subjectCode.trim()||!Re.subjectName.trim())return void I("Vui l\xf2ng nh\u1eadp m\xe3 m\xf4n v\xe0 t\xean m\xf4n","warning");const e=Re.subjectCode.trim().toUpperCase();if(l.some(t=>{var n;return(null===(n=t.subjectCode)||void 0===n?void 0:n.toUpperCase())===e}))return void I("M\xe3 m\xf4n '".concat(Re.subjectCode,"' \u0111\xe3 t\u1ed3n t\u1ea1i. Vui l\xf2ng s\u1eed d\u1ee5ng m\xe3 kh\xe1c."),"warning");const t={subjectCode:Re.subjectCode,subjectName:Re.subjectName,summary:Re.summary,content:"{}"},n=await Rs.post("/api/syllabuses",t,{headers:{"X-User-Id":(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id)}});console.log("Created syllabus:",n.data),L(!1),$e(),Be(),I("T\u1ea1o gi\xe1o tr\xecnh th\xe0nh c\xf4ng","success")}catch(n){var e,t;console.error("Create error:",n),I((null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"T\u1ea1o gi\xe1o tr\xecnh th\u1ea5t b\u1ea1i","error")}},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"T\u1ea1o gi\xe1o tr\xecnh"})]})]})}),U&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,tt.jsx)("div",{className:"p-4 border-b flex justify-end",children:(0,tt.jsx)("button",{onClick:()=>{F(!1),M(null)},className:"px-3 py-1 bg-gray-200 rounded",children:"\u0110\xf3ng"})}),(0,tt.jsx)("div",{className:"p-4",children:(0,tt.jsx)(ar,{syllabusId:null===_||void 0===_?void 0:_.id,rootId:(null===_||void 0===_?void 0:_.rootSyllabusId)||(null===_||void 0===_?void 0:_.id),user:a,onBack:()=>{F(!1),setTimeout(()=>{Be(),M(null)},500)}})})]})}),O&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Ch\u1ec9nh s\u1eeda gi\xe1o tr\xecnh (T\u1ea1o phi\xean b\u1ea3n m\u1edbi)"}),(0,tt.jsx)("button",{onClick:()=>{T(!1),M(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,tt.jsxs)("div",{className:"p-8 space-y-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe3 m\xf4n h\u1ecdc *"}),(0,tt.jsx)("input",{type:"text",value:Re.subjectCode,onChange:e=>ze(He(He({},Re),{},{subjectCode:e.target.value})),className:"w-full border rounded-lg px-4 py-2"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xean m\xf4n h\u1ecdc *"}),(0,tt.jsx)("input",{type:"text",value:Re.subjectName,onChange:e=>ze(He(He({},Re),{},{subjectName:e.target.value})),className:"w-full border rounded-lg px-4 py-2"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xf3m t\u1eaft (summary)"}),(0,tt.jsx)("textarea",{value:Re.summary,onChange:e=>ze(He(He({},Re),{},{summary:e.target.value})),className:"w-full border rounded-lg px-4 py-2",rows:2})]}),(null===_||void 0===_?void 0:_.content)&&"{}"!==(null===_||void 0===_?void 0:_.content)&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:[(0,tt.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"N\u1ed9i dung hi\u1ec7n t\u1ea1i"}),(0,tt.jsx)("div",{className:"text-xs text-gray-700 space-y-2",children:(()=>{try{const e="string"===typeof _.content?JSON.parse(_.content):_.content;return(0,tt.jsxs)("div",{className:"space-y-2",children:[e.modules&&e.modules.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("p",{className:"font-medium text-gray-700",children:["C\xe1c module (",e.modules.length,"):"]}),(0,tt.jsx)("ul",{className:"ml-3 text-gray-600",children:e.modules.map((e,t)=>(0,tt.jsxs)("li",{children:["\u2022 ",e.title||e.name]},t))})]}),e.learningObjectives&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-700",children:"M\u1ee5c ti\xeau h\u1ecdc t\u1eadp:"}),(0,tt.jsx)("p",{className:"ml-3 text-gray-600 whitespace-pre-wrap line-clamp-3",children:e.learningObjectives})]}),e.teachingMethods&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-700",children:"Ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y:"}),(0,tt.jsx)("p",{className:"ml-3 text-gray-600 line-clamp-2",children:e.teachingMethods})]}),e.assessmentMethods&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-700",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1:"}),(0,tt.jsx)("p",{className:"ml-3 text-gray-600 line-clamp-2",children:e.assessmentMethods})]})]})}catch(e){return(0,tt.jsx)("p",{className:"text-red-600",children:"Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb n\u1ed9i dung"})}})()})]}),(null===_||void 0===_?void 0:_.content)&&(()=>{try{const e="string"===typeof _.content?JSON.parse(_.content):_.content;if(null!==e&&void 0!==e&&e.cloPairIds&&e.cloPairIds.length>0)return(0,tt.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,tt.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:["CLO \u0111\xe3 li\xean k\u1ebft (",e.cloPairIds.length,")"]}),(0,tt.jsx)("div",{className:"text-xs text-gray-700",children:(0,tt.jsxs)("p",{children:["IDs: ",e.cloPairIds.join(", ")]})})]})}catch(Fr){return null}})(),S&&S.length>0&&(0,tt.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,tt.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:["T\xe0i li\u1ec7u gi\u1ea3ng d\u1ea1y (",S.length,")"]}),(0,tt.jsx)("div",{className:"space-y-2",children:S.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-white p-2 rounded border border-orange-100",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-700",children:e.title||e.originalName||e.fileName}),e.description&&(0,tt.jsx)("p",{className:"text-gray-600 mt-1",children:e.description})]},t))})]}),(0,tt.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[(0,tt.jsx)("strong",{children:"Ghi ch\xfa:"})," Ch\u1ec9nh s\u1eeda th\xf4ng tin c\u01a1 b\u1ea3n (m\xe3 m\xf4n, t\xean m\xf4n, t\xf3m t\u1eaft) s\u1ebd t\u1ea1o phi\xean b\u1ea3n m\u1edbi. \u0110\u1ec3 ch\u1ec9nh s\u1eeda chi ti\u1ebft n\u1ed9i dung, modules, CLO v\xe0 t\xe0i li\u1ec7u, vui l\xf2ng s\u1eed d\u1ee5ng c\xf4ng c\u1ee5 bi\xean t\u1eadp gi\xe1o tr\xecnh."]})]}),(0,tt.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-end gap-4 border-t",children:[(0,tt.jsx)("button",{onClick:()=>{T(!1),M(null),k([])},className:"px-6 py-2 border rounded-lg hover:bg-gray-100",children:"H\u1ee7y"}),(0,tt.jsx)("button",{onClick:async()=>{try{if(!Re.subjectName.trim())return void I("Vui l\xf2ng nh\u1eadp t\xean m\xf4n","warning");const e=(null===_||void 0===_?void 0:_.rootSyllabusId)||(null===_||void 0===_?void 0:_.id),t={subjectName:Re.subjectName,summary:Re.summary},n=await Rs.post("/api/syllabuses/".concat(e,"/versions"),t,{headers:{"X-User-Id":(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id)}});console.log("Updated syllabus:",n.data),T(!1),$e(),Be(),I("C\u1eadp nh\u1eadt gi\xe1o tr\xecnh th\xe0nh c\xf4ng","success")}catch(n){var e,t;console.error("Update error:",n),I((null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"C\u1eadp nh\u1eadt gi\xe1o tr\xecnh th\u1ea5t b\u1ea1i","error")}},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"L\u01b0u phi\xean b\u1ea3n m\u1edbi"})]})]})}),D&&_&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:_.subjectName||_.courseName}),(0,tt.jsxs)("p",{className:"text-sm text-gray-600",children:[_.subjectCode||_.courseCode," \u2022 v",_.versionNo||_.version||1]})]}),(0,tt.jsx)("button",{onClick:()=>{A(!1),M(null),k([])},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,tt.jsxs)("div",{className:"p-8 space-y-6",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("span",{className:"font-semibold",children:"Tr\u1ea1ng th\xe1i:"}),et(_.status)]}),(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 m\xf4n h\u1ecdc:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900 mt-1",children:_.subjectCode||_.courseCode||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"T\xean m\xf4n h\u1ecdc:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900 mt-1",children:_.subjectName||_.courseName||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi t\u1ea1o:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900 mt-1",children:_.createdBy||"-"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Phi\xean b\u1ea3n:"}),(0,tt.jsxs)("div",{className:"font-semibold text-gray-900 mt-1",children:["v",_.versionNo||_.version||1]})]}),(0,tt.jsxs)("div",{className:"col-span-2",children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Ng\xe0y t\u1ea1o:"}),(0,tt.jsx)("div",{className:"font-semibold text-gray-900 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString("vi-VN"):"-"})]})]})]}),_.summary&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"T\xf3m t\u1eaft"}),(0,tt.jsx)("p",{className:"text-gray-700",children:_.summary})]}),_.content&&"{}"!==_.content&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"N\u1ed9i dung gi\xe1o tr\xecnh"}),(0,tt.jsx)("div",{className:"text-sm text-gray-700",children:(()=>{try{const e="string"===typeof _.content?JSON.parse(_.content):_.content;return"object"===typeof e?(0,tt.jsxs)("div",{className:"space-y-4",children:[(e.subjectCode||e.academicYear||e.semester)&&(0,tt.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Th\xf4ng tin"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.subjectCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 m\xf4n:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.subjectCode})]}),e.syllabusCode&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 gi\xe1o tr\xecnh:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.syllabusCode})]}),e.academicYear&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"N\u0103m h\u1ecdc:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.academicYear})]}),e.semester&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"H\u1ecdc k\u1ef3:"})," ",(0,tt.jsx)("span",{className:"font-medium",children:e.semester})]})]})]}),e.modules&&e.modules.length>0&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["C\xe1c module (",e.modules.length,")"]}),(0,tt.jsx)("ul",{className:"space-y-1 ml-4",children:e.modules.map((e,t)=>(0,tt.jsxs)("li",{className:"text-gray-700",children:["\u2022 ",e.title||e.name||"Module ".concat(t+1),e.description&&" - ".concat(e.description)]},t))})]}),e.learningObjectives&&e.learningObjectives.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"M\u1ee5c ti\xeau h\u1ecdc t\u1eadp"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.learningObjectives})]}),e.teachingMethods&&e.teachingMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.teachingMethods})]}),e.assessmentMethods&&e.assessmentMethods.trim()&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Ph\u01b0\u01a1ng ph\xe1p \u0111\xe1nh gi\xe1"}),(0,tt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.assessmentMethods})]}),e.cloPairIds&&e.cloPairIds.length>0&&(0,tt.jsx)(pr,{cloIds:e.cloPairIds}),(!e.modules||0===e.modules.length)&&(!e.learningObjectives||!e.learningObjectives.trim())&&(!e.teachingMethods||!e.teachingMethods.trim())&&(!e.assessmentMethods||!e.assessmentMethods.trim())&&(!e.cloPairIds||0===e.cloPairIds.length)&&(0,tt.jsx)("div",{className:"text-gray-500 italic",children:"Ch\u01b0a c\xf3 n\u1ed9i dung chi ti\u1ebft. H\xe3y th\xeam modules, m\u1ee5c ti\xeau, ph\u01b0\u01a1ng ph\xe1p gi\u1ea3ng d\u1ea1y v\xe0 \u0111\xe1nh gi\xe1."})]}):(0,tt.jsx)("pre",{className:"whitespace-pre-wrap overflow-x-auto",children:e})}catch(e){return(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-red-600 text-xs mb-2",children:"\u26a0\ufe0f Kh\xf4ng th\u1ec3 parse JSON, hi\u1ec3n th\u1ecb th\xf4:"}),(0,tt.jsx)("pre",{className:"bg-white p-3 rounded border border-gray-300 text-xs overflow-x-auto max-h-48",children:_.content})]})}})()})]}),S&&S.length>0&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"T\xe0i li\u1ec7u gi\u1ea3ng d\u1ea1y"}),(0,tt.jsx)("ul",{className:"space-y-3",children:S.map(e=>(0,tt.jsxs)("li",{className:"p-3 bg-white border border-gray-200 rounded flex items-start justify-between",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("div",{className:"font-medium text-gray-900",children:e.title||e.originalName||e.fileName||"Kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"}),e.description&&(0,tt.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,tt.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["T\u1ea3i l\xean b\u1edfi ",e.uploadedBy||e.createdBy||e.createdByName||"N/A"," \u2022 ",e.uploadedAt?new Date(e.uploadedAt).toLocaleString("vi-VN"):e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):""]})]}),(0,tt.jsxs)("div",{className:"flex-shrink-0 ml-4 flex flex-col gap-2",children:[(0,tt.jsx)("button",{onClick:()=>Xe(e.id),className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Xem"}),(0,tt.jsx)("button",{onClick:()=>(async(e,t)=>{try{var n;const s=await Js.downloadDocument(e),a=s.data instanceof Blob?s.data:new Blob([s.data],{type:(null===(n=s.headers)||void 0===n?void 0:n["content-type"])||"application/octet-stream"}),r=window.URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=t||"document-".concat(e),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(r)}catch(s){console.error("Download error:",s),I("T\u1ea3i t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i","error")}})(e.id,e.originalName||e.fileName||e.title),className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"T\u1ea3i"})]})]},e.id))})]}),(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Th\xf4ng tin kh\xe1c"}),(0,tt.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i:"}),(0,tt.jsx)("div",{className:"text-gray-900 mt-1",children:_.updatedAt?new Date(_.updatedAt).toLocaleString("vi-VN"):"-"})]})})]})]}),(0,tt.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-end gap-4 border-t",children:[(0,tt.jsx)("button",{onClick:()=>{A(!1),M(null),k([])},className:"px-6 py-2 border rounded-lg hover:bg-gray-100",children:"\u0110\xf3ng"}),"DRAFT"===_.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)("button",{onClick:()=>Je(_.id),className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Xo\xe1"}),(0,tt.jsx)("button",{onClick:()=>Ge(_.id),className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:"G\u1eedi ph\xea duy\u1ec7t"}),(0,tt.jsx)("button",{onClick:()=>{A(!1),We(_)},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Ch\u1ec9nh s\u1eeda"})]}),"REJECTED"===_.status&&(0,tt.jsx)("button",{onClick:()=>{A(!1),We(_)},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Ch\u1ec9nh s\u1eeda"})]})]})}),R&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"sticky top-0 bg-white border-b px-8 py-6 flex justify-between items-center",children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Th\xeam t\xe0i li\u1ec7u gi\u1ea3ng d\u1ea1y"}),(0,tt.jsx)("button",{onClick:()=>{z(!1),Qe()},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,tt.jsxs)("div",{className:"p-8 space-y-4",children:[_&&(0,tt.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,tt.jsx)("div",{className:"text-sm text-gray-600",children:"Gi\xe1o tr\xecnh \u0111\u01b0\u1ee3c ch\u1ecdn"}),(0,tt.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[_.subjectCode," - ",_.subjectName]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ti\xeau \u0111\u1ec1 t\xe0i li\u1ec7u *"}),(0,tt.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full border rounded-lg px-4 py-2",placeholder:"VD: B\xe0i gi\u1ea3ng 1 - Gi\u1edbi thi\u1ec7u"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3 (tu\u1ef3 ch\u1ecdn)"}),(0,tt.jsx)("textarea",{value:N,onChange:e=>w(e.target.value),className:"w-full border rounded-lg px-4 py-2",rows:3,placeholder:"M\xf4 t\u1ea3 n\u1ed9i dung t\xe0i li\u1ec7u"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\u1ec7p t\xe0i li\u1ec7u *"}),(0,tt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition",children:[(0,tt.jsx)("input",{type:"file",onChange:e=>{var t;return y((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden",id:"document-file",accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt"}),(0,tt.jsx)("label",{htmlFor:"document-file",className:"cursor-pointer block",children:(0,tt.jsxs)("div",{className:"text-gray-600",children:[(0,tt.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcc4"}),(0,tt.jsx)("div",{className:"font-semibold",children:"Ch\u1ecdn t\u1ec7p ho\u1eb7c k\xe9o th\u1ea3"}),(0,tt.jsx)("div",{className:"text-sm text-gray-500",children:"PDF, Word, PowerPoint, Excel (t\u1ed1i \u0111a 50MB)"}),b&&(0,tt.jsxs)("div",{className:"text-sm text-green-600 mt-2",children:["\u2713 ",b.name]})]})})]})]})]}),(0,tt.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 flex justify-end gap-4 border-t",children:[(0,tt.jsx)("button",{onClick:()=>{z(!1),M(null),Qe()},className:"px-6 py-2 border rounded-lg hover:bg-gray-100",children:"H\u1ee7y"}),(0,tt.jsx)("button",{onClick:async()=>{try{if(!_)return void I("Vui l\xf2ng ch\u1ecdn gi\xe1o tr\xecnh","warning");if(!v.trim())return void I("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 t\xe0i li\u1ec7u","warning");if(!b)return void I("Vui l\xf2ng ch\u1ecdn t\u1ec7p t\xe0i li\u1ec7u","warning");const e=new FormData;e.append("file",b),e.append("title",v),e.append("description",N),e.append("syllabusId",_.id);const t=await Js.uploadDocument(_.id,b,v,N,(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id));console.log("Upload document response:",null===t||void 0===t?void 0:t.data);try{await Ta.ingestDocument(b,_.id,_.subjectName||""),console.log("Document ingested into AI service")}catch(n){console.warn("Failed to ingest document into AI service:",n)}I("Th\xeam t\xe0i li\u1ec7u th\xe0nh c\xf4ng","success"),z(!1),Qe(),Be()}catch(s){var e,t;console.error("Add document error:",s),I((null===s||void 0===s||null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Th\xeam t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i","error")}},className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Th\xeam t\xe0i li\u1ec7u"})]})]})}),(0,tt.jsx)(Ma,{isOpen:X,onClose:()=>{$(!1),Y(null)},syllabusDetailData:Q,syllabusDetailLoading:Z,syllabusDetailDocuments:te,syllabusDetailDocumentsLoading:se,documentSummaries:ue,documentSummarizingId:he,cloCheckLoading:Oe,cloCheckHistory:De,handleViewSyllabusDetail:Ke,handleCheckCLOPLOConsistency:async()=>{if(Q&&Q.id){Te(!0);try{var e;const i="string"===typeof Q.content?JSON.parse(Q.content):Q.content,c=(null===i||void 0===i?void 0:i.cloPairIds)||(null===i||void 0===i?void 0:i.cloIds)||[];if(0===c.length)return I("Gi\xe1o tr\xecnh n\xe0y ch\u01b0a c\xf3 CLO li\xean k\u1ebft","warning"),void Te(!1);console.log("[LecturerDashboard] Fetching details for ".concat(c.length," CLOs..."));const d={},u={},m=new Set;for(const e of c)try{var t;const s=await Js.getCLOById(e),a=(null===(t=s.data)||void 0===t?void 0:t.data)||s.data||{};d[e]={code:a.cloCode||a.code||"CLO-".concat(e),description:a.description||""};try{var n;const t=await Rs.get("/api/v1/mapping/clo/".concat(e)),s=((null===(n=t.data)||void 0===n?void 0:n.data)||t.data||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);u[e]=s,s.forEach(e=>m.add(e))}catch(r){console.warn("[LecturerDashboard] Failed to fetch PLO mappings for CLO ".concat(e,":"),r),u[e]=[]}}catch(l){console.warn("[LecturerDashboard] Failed to fetch CLO ".concat(e,":"),l),d[e]={code:"CLO-".concat(e),description:"Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c m\xf4 t\u1ea3"},u[e]=[]}const h={},g={};for(const e of m)try{var s;const t=await Rs.get("/api/v1/plo/".concat(e)),n=(null===(s=t.data)||void 0===s?void 0:s.data)||t.data||{},a=n.ploCode||n.code||"PLO-".concat(e);h[e]=a,g[a]={code:a,description:n.description||""}}catch(o){console.warn("[LecturerDashboard] Failed to fetch PLO ".concat(e,":"),o)}const p=Object.values(d).map(e=>({id:e.code,description:e.description})),x=Object.values(g).map(e=>({id:e.code,description:e.description})),f={};for(const e of c){var a;const t=null===(a=d[e])||void 0===a?void 0:a.code,n=(u[e]||[]).map(e=>h[e]).filter(Boolean);n.length>0&&(f[t]=n)}if(0===x.length)return I("Kh\xf4ng t\xecm th\u1ea5y PLO n\xe0o \u0111\u1ec3 ki\u1ec3m tra","warning"),void Te(!1);console.log("[LecturerDashboard] Calling AI service...");const b=await Ta.checkCLOPLOConsistency(Q.id,p,x,f),y=(null===(e=b.data)||void 0===e?void 0:e.jobId)||b.jobId;if(!y)return I("Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c Job ID t\u1eeb AI service","error"),void Te(!1);console.log("[LecturerDashboard] Job ID: ".concat(y,", polling for result..."));const v=3e5,j=Date.now();let N=1e3,w=0;let S=await new Promise((e,t)=>{const n=async()=>{try{w++;const s=await Ta.getJobStatus(y),a=s.data||s;if(console.log("[CLO Check] Poll #".concat(w," - Status: ").concat(a.status)),"succeeded"===a.status||"SUCCEEDED"===a.status)console.log("[CLO Check] \u2705 Job succeeded!",a.result),e(a.result);else if("failed"===a.status||"FAILED"===a.status||"canceled"===a.status||"CANCELED"===a.status)t(new Error("Job failed with status: ".concat(a.status)));else if("running"===a.status||"RUNNING"===a.status){Date.now()-j>v?t(new Error("Timeout waiting for CLO check result")):(N=Math.min(5e3,N+500),setTimeout(n,N))}else{Date.now()-j>v?t(new Error("Timeout waiting for CLO check result")):setTimeout(n,N)}}catch(s){console.error("[CLO Check] Poll error:",s),t(s)}};n()});"string"===typeof S&&(S=JSON.parse(S)),Ae(e=>He(He({},e),{},{[Q.id]:{jobId:y,result:S,syllabusName:"".concat(Q.subjectCode," - ").concat(Q.subjectName),timestamp:(new Date).toLocaleString("vi-VN")}})),I("Ki\u1ec3m tra CLO-PLO th\xe0nh c\xf4ng! Xem k\u1ebft qu\u1ea3 trong chi ti\u1ebft gi\xe1o tr\xecnh.","success")}catch(i){console.error("Error checking CLO-PLO consistency:",i),I("L\u1ed7i: ".concat(i.message),"error")}finally{Te(!1)}}else I("Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh","error")},handleClearCLOCheckHistory:e=>{Ae(t=>{const n=He({},t);return delete n[e],n}),I("\u2705 \u0110\xe3 xo\xe1 k\u1ebft qu\u1ea3 ki\u1ec3m tra","success")},handleViewDocument:Xe,generateDocumentSummary:async(e,t)=>{if(null!==Q&&void 0!==Q&&Q.id){ge(e);try{var n,s,a,r,l,o;console.log("[Summary] Step 1: Downloading document:",e);const y=await(async(e,t)=>{try{const n=await Rs.get("/api/syllabus/documents/".concat(e,"/download"),{responseType:"blob"});return new File([n.data],t,{type:n.data.type})}catch(n){throw console.error("Download document failed:",n),n}})(e,t);console.log("[Summary] Document downloaded successfully"),console.log("[Summary] Step 2: Ingesting document to AI service");const v=await Ta.ingestDocument(y,Q.id,Q.subjectName||"",e);if(console.log("[Summary] Ingest response:",v),null===(n=v.data)||void 0===n||!n.success){var i,c,d;const e=(null===(i=v.data)||void 0===i||null===(c=i.error)||void 0===c?void 0:c.message)||(null===(d=v.data)||void 0===d?void 0:d.message)||"L\u1ed7i t\u1ea3i t\xe0i li\u1ec7u v\xe0o AI service";return console.error("[Summary] \u274c Ingest failed:",e,"Full response:",v.data),I(e,"error"),void ge(null)}let j;console.log("[Summary] \u2705 Document ingested successfully, chunks created:",null===(s=v.data)||void 0===s?void 0:s.chunks_created),console.log("[Summary] Step 3: Generating summary using POST /ai/summary");try{j=await Ta.generateDocumentSummary(Q.id,e,"MEDIUM"),console.log("[Summary] Summary API response:",j)}catch(f){var u,m,h,g,p;console.error("[Summary] \u274c Summary API call failed:",f);const e=(null===(u=f.response)||void 0===u||null===(m=u.data)||void 0===m||null===(h=m.error)||void 0===h?void 0:h.message)||(null===(g=f.response)||void 0===g||null===(p=g.data)||void 0===p?void 0:p.message)||f.message||"L\u1ed7i t\u1ea1o t\xf3m t\u1eaft";return I(e,"error"),void ge(null)}const N=(null===(a=j.data)||void 0===a?void 0:a.jobId)||(null===(r=j)||void 0===r?void 0:r.jobId),w=(null===(l=j.data)||void 0===l?void 0:l.status)||(null===(o=j)||void 0===o?void 0:o.status);if(!N)return console.error("[Summary] \u274c No jobId in response:",j),I("Kh\xf4ng th\u1ec3 t\u1ea1o job t\xf3m t\u1eaft (kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c jobId)","error"),void ge(null);console.log("[Summary] \u2705 Summary job created - jobId:",N,"status:",w),console.log("[Summary] Step 4: Saving jobId to ai_ingestion_job_id");try{var x;await Ta.saveDocumentJobIdImmediately(e,N),console.log("[Summary] \u2705 jobId saved to database successfully"),console.log("[Summary] Step 5: Reloading documents from server");const t=await Js.getDocumentsBySyllabus(Q.id),n=(null===(x=t.data)||void 0===x?void 0:x.data)||t.data||[];ne(n),console.log('[Summary] \u2705 Documents reloaded - "Xem t\xf3m t\u1eaft" button should now be visible'),I("\u2705 T\xe0i li\u1ec7u \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ec3 t\xf3m t\u1eaft. T\xf3m t\u1eaft s\u1ebd c\xf3 s\u1eb5n trong v\xe0i gi\xe2y.","success"),ge(null)}catch(b){console.error("[Summary] \u274c Failed to save jobId:",b),I("\u26a0\ufe0f L\u01b0u jobId th\u1ea5t b\u1ea1i (job v\u1eabn \u0111ang ch\u1ea1y): "+b.message,"warning"),ge(null)}}catch(y){console.error("[Summary] \u274c Unexpected error:",y),I("L\u1ed7i khi t\u1ea1o t\xf3m t\u1eaft: "+y.message,"error"),ge(null)}}else I("Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh","error")},handleQuickAddDocument:async(e,t,n)=>{if(Q)try{const s=await Js.uploadDocument(Q.id,e,t,n,(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id));console.log("Upload document response:",null===s||void 0===s?void 0:s.data);try{await Ta.ingestDocument(e,Q.id,Q.subjectName||""),console.log("Document ingested into AI service")}catch(l){console.warn("Failed to ingest document into AI service:",l)}return I("\u2705 Th\xeam t\xe0i li\u1ec7u th\xe0nh c\xf4ng (kh\xf4ng thay \u0111\u1ed5i phi\xean b\u1ea3n)","success"),await Ke(Q),!0}catch(o){var s,r;return console.error("Quick add document error:",o),I((null===o||void 0===o||null===(s=o.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Th\xeam t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i","error"),!1}else I("Vui l\xf2ng ch\u1ecdn gi\xe1o tr\xecnh","warning")},setShowDocumentSummaryModal:xe,setSelectedDocumentForSummary:be,showToast:I}),pe&&fe&&(0,tt.jsx)(Ra,{document:fe,onClose:()=>{xe(!1),be(null)}}),ye&&je&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,tt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Th\xeam b\xe0i gi\u1ea3ng"}),(0,tt.jsx)("button",{onClick:Ye,className:"text-gray-400 hover:text-gray-600 transition",children:"\u2715"})]}),(0,tt.jsxs)("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sticky top-0",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Gi\xe1o tr\xecnh:"}),(0,tt.jsxs)("p",{className:"font-medium text-gray-900",children:[je.subjectCode," - ",je.subjectName]})]}),te&&te.length>0&&(0,tt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,tt.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:["T\xe0i li\u1ec7u hi\u1ec7n c\xf3 (",te.length,")"]}),(0,tt.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:te.map(e=>(0,tt.jsxs)("div",{className:"flex items-start justify-between bg-white p-3 rounded border border-gray-200 hover:bg-gray-50 transition",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title||e.originalName||e.fileName}),e.description&&(0,tt.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.description}),(0,tt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["T\u1ea3i l\xean ",e.uploadedAt?new Date(e.uploadedAt).toLocaleDateString("vi-VN"):"N/A"]})]}),(0,tt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 t\xe0i li\u1ec7u n\xe0y?"))try{const n=(null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.userId);if(await Js.deleteDocument(e,n),I("\u2705 Xo\xe1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng","success"),je){var t;const e=await Js.getDocumentsBySyllabus(je.id);ne((null===(t=e.data)||void 0===t?void 0:t.data)||e.data||[])}}catch(r){var n,s;console.error("Delete document error:",r),I((null===r||void 0===r||null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"Xo\xe1 t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i","error")}})(e.id),className:"ml-2 text-red-600 hover:text-red-700 font-medium text-xs whitespace-nowrap flex-shrink-0",title:"Xo\xe1 t\xe0i li\u1ec7u",children:"\ud83d\uddd1\ufe0f Xo\xe1"})]},e.id))})]}),(0,tt.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,tt.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Th\xeam t\xe0i li\u1ec7u m\u1edbi"})}),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ch\u1ecdn t\u1ec7p ",(0,tt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,tt.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition cursor-pointer",onClick:()=>{const e=document.getElementById("file-upload-input");e&&e.click()},children:we?(0,tt.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,tt.jsxs)("p",{className:"font-medium",children:["\ud83d\udcce ",we.name]}),(0,tt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(we.size/1024/1024).toFixed(2)," MB"]})]}):(0,tt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,tt.jsx)("p",{className:"font-medium",children:"K\xe9o th\u1ea3 ho\u1eb7c nh\u1ea5n \u0111\u1ec3 ch\u1ecdn t\u1ec7p"}),(0,tt.jsx)("p",{className:"text-xs mt-1",children:"H\u1ed7 tr\u1ee3 PDF, Word, PowerPoint, etc."})]})}),(0,tt.jsx)("input",{id:"file-upload-input",type:"file",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&Se(n)},className:"hidden",disabled:Pe})]})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[(0,tt.jsx)("button",{onClick:Ye,disabled:Pe,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition disabled:opacity-50",children:"Hu\u1ef7"}),(0,tt.jsxs)("button",{onClick:async()=>{if(we)if(je){Le(!0);try{const t=ke.trim()||we.name,n=await Js.uploadDocument(je.id,we,t,Ee,(null===a||void 0===a?void 0:a.userId)||(null===a||void 0===a?void 0:a.id));if(console.log("Upload document response:",null===n||void 0===n?void 0:n.data),I("\u2705 Th\xeam t\xe0i li\u1ec7u th\xe0nh c\xf4ng (kh\xf4ng thay \u0111\u1ed5i phi\xean b\u1ea3n)","success"),Se(null),Ce(""),Ie(""),je)try{var e;const t=await Js.getDocumentsBySyllabus(je.id);ne((null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[])}catch(s){console.warn("Failed to reload documents:",s),ne([])}try{await Be()}catch(r){console.warn("Failed to reload syllabus list:",r)}}catch(l){var t,n;console.error("Upload document error:",l),I((null===l||void 0===l||null===(t=l.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Th\xeam t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i","error")}finally{Le(!1)}}else I("Vui l\xf2ng ch\u1ecdn gi\xe1o tr\xecnh","warning");else I("Vui l\xf2ng ch\u1ecdn t\u1ec7p","warning")},disabled:Pe||!we,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:[Pe&&(0,tt.jsx)(Aa,{size:16,className:"animate-spin"}),Pe?"\u0110ang t\u1ea3i...":"Th\xeam"]})]})]})})]})};function fr(){var e,t;const n=le(),[s,a]=(0,r.useState)(!0),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t)return console.log("[LecturerPortalLayout] No token/user, redirecting to login"),void n("/login");try{const e=JSON.parse(t);if("ROLE_LECTURER"!==e.role&&"ROLE_HOD"!==e.role)return console.log("[LecturerPortalLayout] User not lecturer, redirecting"),void n("/login");c(e)}catch(Fr){console.error("[LecturerPortalLayout] Invalid user data:",Fr),n("/login")}},[n]);const d=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),n("/login")},u=[{id:"dashboard",label:"Dashboard",icon:Ge,onClick:()=>n("/lecturer/dashboard")}];return i?(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,tt.jsxs)("aside",{className:"bg-gradient-to-b from-indigo-900 to-purple-900 text-white transition-all duration-300 ".concat(s?"w-64":"w-20"," flex flex-col border-r border-indigo-800"),children:[(0,tt.jsx)("div",{className:"p-4 border-b border-indigo-800",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 ".concat(!s&&"justify-center w-full"),children:[(0,tt.jsx)("div",{className:"bg-indigo-400 p-2 rounded-lg",children:(0,tt.jsx)(at,{size:24})}),s&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-bold text-sm",children:"Lecturer"}),(0,tt.jsx)("p",{className:"text-xs text-indigo-200",children:"Gi\u1ea3ng vi\xean"})]})]}),s&&(0,tt.jsx)("button",{onClick:()=>a(!1),className:"hover:bg-indigo-800 p-1 rounded",children:(0,tt.jsx)(Xa,{size:18})})]})}),!s&&(0,tt.jsx)("button",{onClick:()=>a(!0),className:"p-3 hover:bg-indigo-800 m-2 rounded-lg",children:(0,tt.jsx)(et,{size:20})}),(0,tt.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:u.map(e=>{const t=e.icon;return(0,tt.jsxs)("button",{onClick:e.onClick,className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all text-indigo-100 hover:bg-indigo-800",title:e.label,children:[(0,tt.jsx)(t,{size:20}),s&&(0,tt.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.id)})}),(0,tt.jsxs)("div",{className:"border-t border-indigo-800 p-4 space-y-2",children:[(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsxs)("button",{onClick:()=>o(!l),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-indigo-800 transition-all",children:[(0,tt.jsx)("div",{className:"w-8 h-8 bg-indigo-400 rounded-full flex items-center justify-center text-sm font-bold",children:(null===i||void 0===i||null===(e=i.fullName)||void 0===e?void 0:e.charAt(0).toUpperCase())||"L"}),s&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{className:"text-left flex-1",children:[(0,tt.jsx)("p",{className:"text-sm font-medium",children:(null===i||void 0===i?void 0:i.fullName)||"Lecturer"}),(0,tt.jsx)("p",{className:"text-xs text-indigo-200",children:(null===i||void 0===i?void 0:i.email)||"lecturer@smd.edu.vn"})]}),(0,tt.jsx)(Xa,{size:16})]})]}),l&&s&&(0,tt.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg text-gray-900 py-2 z-50",children:(0,tt.jsxs)("button",{onClick:d,className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[(0,tt.jsx)(Qe,{size:16}),"\u0110\u0103ng xu\u1ea5t"]})})]}),s&&(0,tt.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors text-sm font-medium",children:[(0,tt.jsx)(Qe,{size:16}),"\u0110\u0103ng xu\u1ea5t"]})]})]}),(0,tt.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,tt.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:(0,tt.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("button",{onClick:()=>a(!s),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:s?(0,tt.jsx)(Ze,{size:20}):(0,tt.jsx)(et,{size:20})}),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Dashboard Gi\u1ea3ng Vi\xean ",null!==i&&void 0!==i&&i.fullName?"- ".concat(i.fullName):""]}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Qu\u1ea3n l\xfd v\xe0 c\xf4ng b\u1ed1 gi\xe1o tr\xecnh"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsxs)("div",{className:"text-right hidden md:block",children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===i||void 0===i?void 0:i.fullName)||"Lecturer"}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:(null===i||void 0===i?void 0:i.email)||"lecturer@smd.edu.vn"})]}),(0,tt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-600 rounded-full flex items-center justify-center text-white font-bold cursor-pointer hover:shadow-lg transition-shadow",children:(null===i||void 0===i||null===(t=i.fullName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"L"})]})]})}),(0,tt.jsx)("main",{className:"flex-1 overflow-auto",children:(0,tt.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,tt.jsx)(xr,{})})})]})]}):(0,tt.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}function br(){const e=le();(0,r.useEffect)(()=>{const t=localStorage.getItem("token"),n=localStorage.getItem("user");if(!t||!n)return console.log("[AdminPortalGuide] No token/user, redirecting to login"),void e("/login");try{"ROLE_ADMIN"!==JSON.parse(n).role&&(console.log("[AdminPortalGuide] User not admin, redirecting"),e("/login"))}catch(Fr){console.error("[AdminPortalGuide] Invalid user data:",Fr),e("/login")}},[e]);const t=[{id:"users",title:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",icon:lt,description:"T\u1ea1o t\xe0i kho\u1ea3n, g\xe1n quy\u1ec1n, qu\u1ea3n l\xfd kh\xf3a",features:["T\u1ea1o t\xe0i kho\u1ea3n m\u1edbi (Gi\xe1o vi\xean, Tr\u01b0\u1edfng b\u1ed9 m\xf4n, Ph\xf2ng \u0110\xe0o t\u1ea1o, Sinh vi\xean)","Import ng\u01b0\u1eddi d\xf9ng t\u1eeb Excel/CSV","G\xe1n vai tr\xf2 & quy\u1ec1n (RBAC)","Kh\xf3a/m\u1edf t\xe0i kho\u1ea3n","Reset m\u1eadt kh\u1ea9u"]},{id:"system",title:"C\u1ea5u h\xecnh h\u1ec7 th\u1ed1ng",icon:wa,description:"Thi\u1ebft l\u1eadp n\u0103m h\u1ecdc, h\u1ecdc k\u1ef3, workflow",features:["C\u1ea5u h\xecnh n\u0103m h\u1ecdc & h\u1ecdc k\u1ef3","Qu\u1ea3n l\xfd khoa & b\u1ed9 m\xf4n","Thi\u1ebft l\u1eadp quy tr\xecnh workflow","T\u1ea1o template CLO, Rubric","\u0110\u1ecbnh ngh\u0129a form m\u1eabu syllabus"]},{id:"publishing",title:"Qu\u1ea3n l\xfd c\xf4ng b\u1ed1",icon:rt,description:"C\xf4ng b\u1ed1/H\u1ee7y c\xf4ng b\u1ed1 syllabus",features:["Xem danh s\xe1ch syllabus \u0111\xe3 duy\u1ec7t","C\xf4ng b\u1ed1 & h\u1ee7y c\xf4ng b\u1ed1","L\u01b0u tr\u1eef (Archive)","Thi\u1ebft l\u1eadp ng\xe0y hi\u1ec7u l\u1ef1c","Qu\u1ea3n l\xfd phi\xean b\u1ea3n c\xf4ng b\u1ed1"]},{id:"audit",title:"Ki\u1ec3m tra & gi\xe1m s\xe1t",icon:ka,description:"Log h\u1ec7 th\u1ed1ng & b\xe1o c\xe1o",features:["Xem log \u0111\u0103ng nh\u1eadp","Log ch\u1ec9nh s\u1eeda syllabus","L\u1ecbch s\u1eed duy\u1ec7t","Xu\u1ea5t b\xe1o c\xe1o (PDF/CSV)","Ph\u1ee5c v\u1ee5 ki\u1ec3m \u0111\u1ecbnh"]}];return(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,tt.jsx)("header",{className:"bg-white border-b border-blue-200 shadow-sm",children:(0,tt.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-blue-900",children:"C\u1ed5ng qu\u1ea3n tr\u1ecb vi\xean"}),(0,tt.jsx)("p",{className:"text-gray-600 mt-1",children:"Qu\u1ea3n l\xfd h\u1ec7 th\u1ed1ng SMD Microservices"})]}),(0,tt.jsxs)("button",{onClick:()=>window.location.href="/login",className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:[(0,tt.jsx)(Qe,{size:18}),"\u0110\u0103ng xu\u1ea5t"]})]})}),(0,tt.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-12",children:[(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(t=>{const n=t.icon;return(0,tt.jsxs)("button",{onClick:()=>e("/admin/portal/".concat(t.id)),className:"group relative bg-white rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-all p-6 text-left border-l-4 border-blue-500",children:[(0,tt.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-100 rounded-bl-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-indigo-100 w-14 h-14 rounded-lg flex items-center justify-center mb-4",children:(0,tt.jsx)(n,{size:28,className:"text-blue-600"})}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.title}),(0,tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),(0,tt.jsx)("ul",{className:"space-y-1 mb-4",children:t.features.slice(0,3).map((e,t)=>(0,tt.jsxs)("li",{className:"text-xs text-gray-500 flex items-start",children:[(0,tt.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"}),e]},t))}),(0,tt.jsx)("div",{className:"text-blue-600 font-semibold group-hover:translate-x-1 transition-transform",children:"Truy c\u1eadp \u2192"})]})]},t.id)})}),(0,tt.jsx)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"T\u1ed5ng ng\u01b0\u1eddi d\xf9ng",value:"256"},{label:"Syllabus \u0111\xe3 c\xf4ng b\u1ed1",value:"48"},{label:"\u0110ang ch\u1edd duy\u1ec7t",value:"12"},{label:"Log h\xf4m nay",value:"1,240"}].map((e,t)=>(0,tt.jsxs)("div",{className:"bg-white rounded-lg p-4 border-b-4 border-blue-500 shadow",children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:e.label}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:e.value})]},t))})]})]})}const yr=Je("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),vr=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function jr(){const[e,t]=(0,r.useState)("create"),[n,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)({RECTOR:{email:"",name:"",phone:"",password:"",confirmPassword:""},LECTURER:{email:"",name:"",phone:"",password:"",confirmPassword:""},HOD:{email:"",name:"",phone:"",password:"",confirmPassword:""},ACADEMIC:{email:"",name:"",phone:"",password:"",confirmPassword:""},STUDENT:{email:"",name:"",phone:"",password:"",confirmPassword:"",major:""}}),[h,g]=(0,r.useState)({RECTOR:!1,LECTURER:!1,HOD:!1,ACADEMIC:!1,STUDENT:!1}),[p,x]=(0,r.useState)(""),[f,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)({email:"",fullName:"",phoneNumber:"",roles:[],password:"",confirmPassword:""}),[E,I]=(0,r.useState)(!1),[P,L]=(0,r.useState)(!1),[O,T]=(0,r.useState)(null),[D,A]=(0,r.useState)(!1),[R,z]=(0,r.useState)(null);(0,r.useEffect)(()=>{M(),_()},[]);const _=async()=>{try{const e=localStorage.getItem("token");let t=await fetch("/api/academic/programs",{headers:e?{Authorization:"Bearer ".concat(e)}:{}});if(t.ok||(t=await fetch("/api/programs",{headers:e?{Authorization:"Bearer ".concat(e)}:{}})),t.ok){const e=await t.json(),n=Array.isArray(e)?e:e.content||[];console.log("[UserManagement] Programs loaded:",n),d(n)}else console.warn("[UserManagement] Failed to load programs:",t.status),d([{id:1,programName:"C\xf4ng ngh\u1ec7 Th\xf4ng tin",programCode:"IT2024"},{id:2,programName:"K\u1ef9 thu\u1eadt Ph\u1ea7n m\u1ec1m",programCode:"SE2024"},{id:3,programName:"Khoa h\u1ecdc D\u1eef li\u1ec7u",programCode:"DS2024"},{id:4,programName:"Khoa h\u1ecdc M\xe1y t\xednh",programCode:"CS2024"},{id:5,programName:"H\u1ec7 th\u1ed1ng Th\xf4ng tin",programCode:"IS2024"}])}catch(e){console.warn("[UserManagement] Error loading programs:",e),d([{id:1,programName:"C\xf4ng ngh\u1ec7 Th\xf4ng tin",programCode:"IT2024"},{id:2,programName:"K\u1ef9 thu\u1eadt Ph\u1ea7n m\u1ec1m",programCode:"SE2024"},{id:3,programName:"Khoa h\u1ecdc D\u1eef li\u1ec7u",programCode:"DS2024"},{id:4,programName:"Khoa h\u1ecdc M\xe1y t\xednh",programCode:"CS2024"},{id:5,programName:"H\u1ec7 th\u1ed1ng Th\xf4ng tin",programCode:"IS2024"}])}},M=async()=>{try{l(!0);const e=localStorage.getItem("token");if(console.log("[UserManagement] Fetching users..."),console.log("[UserManagement] Token:",e?"".concat(e.substring(0,20),"..."):"NOT FOUND"),!e)throw new Error("Ch\u01b0a \u0111\u0103ng nh\u1eadp. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");const t=await fetch("/api/users",{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("[UserManagement] Response status:",t.status),401===t.status)throw new Error("Token h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");if(!t.ok)throw new Error("API Error: ".concat(t.status));const n=await t.json();console.log("[UserManagement] Data received:",n);let a=Array.isArray(n)?n:n.content||[];a.length>0&&(console.log("[UserManagement] First user sample:",a[0]),console.log("[UserManagement] All properties:",Object.keys(a[0])),console.log("[UserManagement] First user roles:",a[0].roles,"type:",typeof a[0].roles),a.forEach((e,t)=>{console.log("[UserManagement] User ".concat(t,": ").concat(e.email," - roles:"),e.roles)})),s(a),b(a),i(null)}catch(e){console.error("L\u1ed7i:",e),i(e.message);const t=[{id:1,email:"teacher1@smd.edu.vn",name:"Nguy\u1ec5n V\u0103n A",role:"Gi\xe1o vi\xean",status:"Ho\u1ea1t \u0111\u1ed9ng"},{id:2,email:"hod@smd.edu.vn",name:"Tr\u1ea7n Th\u1ecb B",role:"Tr\u01b0\u1edfng b\u1ed9 m\xf4n",status:"Ho\u1ea1t \u0111\u1ed9ng"}];s(t),b(t)}finally{l(!1)}},U=e=>{const t={ROLE_ADMIN:"Qu\u1ea3n tr\u1ecb vi\xean",ROLE_RECTOR:"Hi\u1ec7u tr\u01b0\u1edfng",ROLE_ACADEMIC_AFFAIRS:"Ph\xf2ng \u0110\xe0o t\u1ea1o",ROLE_HOD:"Tr\u01b0\u1edfng b\u1ed9 m\xf4n",ROLE_LECTURER:"Gi\xe1o vi\xean",ROLE_STUDENT:"Sinh vi\xean",ROLE_COUNCIL_MEMBER:"Th\xe0nh vi\xean h\u1ed9i \u0111\u1ed3ng",1:"Qu\u1ea3n tr\u1ecb vi\xean",2:"Hi\u1ec7u tr\u01b0\u1edfng",3:"Ph\xf2ng \u0110\xe0o t\u1ea1o",4:"Tr\u01b0\u1edfng b\u1ed9 m\xf4n",5:"Gi\xe1o vi\xean",6:"Sinh vi\xean",7:"Th\xe0nh vi\xean h\u1ed9i \u0111\u1ed3ng"};if(Array.isArray(e)){if(0===e.length)return console.warn("[getRoleLabel] Empty roles array - roles not loaded from backend"),"Ch\u01b0a \u0111\u01b0\u1ee3c g\xe1n";const n=e[0];if("object"===typeof n&&null!==n&&n.roleName){const e=t[n.roleName]||t[n.roleName.toUpperCase()]||n.roleName;return console.log("[getRoleLabel] Object with roleName:",n.roleName,"-> Label:",e),e}let s=t[n];return s||"string"!==typeof n||(s=t[n.toUpperCase()]),s||"number"!==typeof n||(s=t[n.toString()]),s=s||(null===n||void 0===n?void 0:n.toString())||"N/A",console.log("[getRoleLabel] Array role:",e,"-> Label:",s),s}if(!e)return"Ch\u01b0a \u0111\u01b0\u1ee3c g\xe1n";let n=t[e];return n||"string"!==typeof e||(n=t[e.toUpperCase()]),n||"number"!==typeof e||(n=t[e.toString()]),n=n||(null===e||void 0===e?void 0:e.toString())||"Ch\u01b0a \u0111\u01b0\u1ee3c g\xe1n",console.log("[getRoleLabel] Single role:",e,"-> Label:",n),n},F=[{id:"create",label:"T\u1ea1o t\xe0i kho\u1ea3n",icon:Ka},{id:"import",label:"Import t\u1eeb CSV",icon:Qa},{id:"manage",label:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n",icon:lt}];return(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow border-b border-gray-200",children:(0,tt.jsx)("div",{className:"flex overflow-x-auto",children:F.map(n=>{const s=n.icon;return(0,tt.jsxs)("button",{onClick:()=>t(n.id),className:"flex items-center gap-2 px-6 py-4 font-medium transition-all border-b-2 whitespace-nowrap ".concat(e===n.id?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-900"),children:[(0,tt.jsx)(s,{size:18}),n.label]},n.id)})})}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o&&(0,tt.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("div",{className:"flex-1",children:(0,tt.jsxs)("div",{className:"flex items-center",children:[(0,tt.jsx)("div",{className:"flex-shrink-0",children:"\u26a0\ufe0f"}),(0,tt.jsxs)("div",{className:"ml-3",children:[(0,tt.jsx)("p",{className:"text-sm font-medium",children:"L\u1ed7i k\u1ebft n\u1ed1i API"}),(0,tt.jsx)("p",{className:"text-sm mt-1",children:o}),o.includes("401")||o.includes("Token")?(0,tt.jsx)("p",{className:"text-sm mt-2 font-semibold",children:"Hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u m\u1eabu. H\xe3y \u0111\u0103ng nh\u1eadp l\u1ea1i \u0111\u1ec3 truy c\u1eadp d\u1eef li\u1ec7u th\u1ef1c."}):(0,tt.jsx)("p",{className:"text-sm mt-2",children:"\u0110ang hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u m\u1eabu."})]})]})}),(0,tt.jsx)("button",{onClick:()=>window.location.href="/login",className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap",children:"\u0110\u0103ng nh\u1eadp l\u1ea1i"})]})}),a&&"manage"===e&&(0,tt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."}),"create"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-lg font-bold mb-4 text-gray-900",children:"T\u1ea1o t\xe0i kho\u1ea3n m\u1edbi"}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{value:"RECTOR",label:"Hi\u1ec7u tr\u01b0\u1edfng"},{value:"LECTURER",label:"Gi\xe1o vi\xean"},{value:"HOD",label:"Tr\u01b0\u1edfng b\u1ed9 m\xf4n"},{value:"ACADEMIC",label:"Ph\xf2ng \u0110\xe0o t\u1ea1o"},{value:"STUDENT",label:"Sinh vi\xean"}].map(e=>(0,tt.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-5 hover:border-blue-300 transition-colors",children:[(0,tt.jsx)("h4",{className:"font-bold text-blue-600 mb-4",children:e.label}),(0,tt.jsxs)("div",{className:"space-y-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,tt.jsx)("input",{type:"email",placeholder:"user@smd.edu.vn",value:u[e.value].email,onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{email:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"H\u1ecd v\xe0 t\xean"}),(0,tt.jsx)("input",{type:"text",placeholder:"Nguy\u1ec5n V\u0103n A",value:u[e.value].name,onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{name:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,tt.jsx)("input",{type:"tel",placeholder:"0912345678",value:u[e.value].phone,onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{phone:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\u1eadt kh\u1ea9u"}),(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsx)("input",{type:h[e.value]?"text":"password",placeholder:"M\u1eadt kh\u1ea9u",value:u[e.value].password,onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{password:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),(0,tt.jsx)("button",{type:"button",onClick:()=>g(He(He({},h),{},{[e.value]:!h[e.value]})),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700",children:(0,tt.jsx)($s,{size:18})})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u"}),(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsx)("input",{type:h[e.value]?"text":"password",placeholder:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u",value:u[e.value].confirmPassword,onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{confirmPassword:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),(0,tt.jsx)("button",{type:"button",onClick:()=>g(He(He({},h),{},{[e.value]:!h[e.value]})),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700",children:(0,tt.jsx)($s,{size:18})})]})]}),"STUDENT"===e.value&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0nh"}),(0,tt.jsxs)("select",{value:u[e.value].major||"",onChange:t=>m(He(He({},u),{},{[e.value]:He(He({},u[e.value]),{},{major:t.target.value})})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn ng\xe0nh --"}),c.map(e=>(0,tt.jsx)("option",{value:e.programName,children:e.programName},e.id||e.programName))]})]}),(0,tt.jsxs)("button",{onClick:()=>(async e=>{const t=u[e];if(t.email&&t.name&&t.password&&t.confirmPassword)if(!t.phone||/^[0-9]{10,11}$/.test(t.phone))if(t.email.includes("@"))if(t.password.length<6)alert("M\u1eadt kh\u1ea9u ph\u1ea3i t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1");else if(t.password===t.confirmPassword)if(e)try{const s=localStorage.getItem("token");console.log("[UserManagement] Creating user:",{email:t.email,fullName:t.name,role:e});const a={RECTOR:"ROLE_RECTOR",LECTURER:"ROLE_LECTURER",HOD:"ROLE_HOD",ACADEMIC:"ROLE_ACADEMIC_AFFAIRS",STUDENT:"ROLE_STUDENT"}[e];if(!a)return void alert("Vai tr\xf2 kh\xf4ng h\u1ee3p l\u1ec7");const r={username:t.email.split("@")[0]+(t.email.split("@")[0].length<3?Math.random().toString(36).substring(2,5):""),email:t.email,fullName:t.name,password:t.password,phoneNumber:t.phone||"",roles:[a]};"STUDENT"===e&&t.major&&(r.major=t.major),console.log("[UserManagement] API Payload:",r);const l=await fetch("/api/users",{method:"POST",headers:He({"Content-Type":"application/json"},s?{Authorization:"Bearer ".concat(s)}:{}),body:JSON.stringify(r)});if(console.log("[UserManagement] Response status:",l.status),!l.ok){let e="HTTP ".concat(l.status);try{const t=await l.text();if(console.error("[UserManagement] Full response text:",t),t&&t.trim().startsWith("{")){const n=JSON.parse(t);e=n.message||n.error||n.detail||JSON.stringify(n)}else e=t.substring(0,200)||"HTTP ".concat(l.status," - Bad Request")}catch(n){console.error("[UserManagement] Could not parse error response:",n),e="HTTP ".concat(l.status," - Bad Request")}throw new Error(e)}const o=await l.json();console.log("[UserManagement] User created successfully:",o),alert("\u2705 T\u1ea1o t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!\nEmail: ".concat(t.email,"\nT\xean: ").concat(t.name,"\nVai tr\xf2: ").concat(e)),m(He(He({},u),{},{[e]:He({email:"",name:"",phone:"",password:"",confirmPassword:""},"STUDENT"===e&&{major:""})})),M()}catch(s){console.error("[UserManagement] Create user error:",s),alert("\u274c L\u1ed7i t\u1ea1o t\xe0i kho\u1ea3n: ".concat(s.message))}else alert("Vui l\xf2ng ch\u1ecdn vai tr\xf2");else alert("M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng kh\u1edbp");else alert("Email kh\xf4ng h\u1ee3p l\u1ec7");else alert("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7 (ph\u1ea3i l\xe0 10-11 ch\u1eef s\u1ed1)");else alert("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7: Email, T\xean, M\u1eadt kh\u1ea9u, X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u")})(e.value),type:"button",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 rounded-lg font-medium hover:shadow-lg transition-shadow",children:["T\u1ea1o t\xe0i kho\u1ea3n ",e.label]})]})]},e.value))})]}),"import"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-lg font-bold mb-4 text-gray-900",children:"Import ng\u01b0\u1eddi d\xf9ng t\u1eeb file"}),(0,tt.jsxs)("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",children:[(0,tt.jsx)(Qa,{size:40,className:"mx-auto text-blue-600 mb-2"}),(0,tt.jsx)("p",{className:"text-gray-700 mb-2",children:"K\xe9o th\u1ea3 file ho\u1eb7c nh\u1ea5n \u0111\u1ec3 ch\u1ecdn"}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"H\u1ed7 tr\u1ee3: CSV"}),(0,tt.jsx)("input",{type:"file",accept:".csv",id:"csvInput",onChange:e=>{const t=e.target.files[0];t&&T(t)},className:"hidden"}),(0,tt.jsxs)("button",{type:"button",onClick:()=>document.getElementById("csvInput").click(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:["Ch\u1ecdn file ",O&&"(".concat(O.name,")")]})]}),(0,tt.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,tt.jsx)("button",{type:"button",onClick:()=>{const e=new Blob(["email,fullName,phoneNumber,role,password,confirmPassword\nnguyenvana@smd.edu.vn,Nguy\u1ec5n V\u0103n A,0987654321,LECTURER,Lecturer@123,Lecturer@123\ntranthib@smd.edu.vn,Tr\u1ea7n Th\u1ecb B,0976543210,LECTURER,Lecturer@123,Lecturer@123"],{type:"text/csv"}),t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="sample_users.csv",n.click(),window.URL.revokeObjectURL(t)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 rounded-lg font-medium transition-colors",children:"T\u1ea3i m\u1eabu CSV"}),(0,tt.jsx)("button",{type:"button",onClick:async()=>{if(O){A(!0);try{const e=new FileReader;e.onload=async e=>{const t=e.target.result.split("\n").filter(e=>e.trim()),n=t[0].split(",").map(e=>e.trim().toLowerCase()),s={success:0,failed:0,errors:[]},a=localStorage.getItem("token");for(let l=1;l<t.length;l++){const e=t[l].split(",").map(e=>e.trim());if(e.length<4)continue;const o={};n.forEach((t,n)=>{o[t]=e[n]});try{const e={RECTOR:[2],LECTURER:[5],HOD:[4],ACADEMIC:[3],STUDENT:[6]},t={username:o.email.split("@")[0],email:o.email,fullName:o.fullname||o.fullName,password:o.password,phoneNumber:o.phonenumber||o.phoneNumber||"",roleIds:e[o.role]||[6]},n=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});if(n.ok)s.success++;else{s.failed++;const e=await n.text();s.errors.push("D\xf2ng ".concat(l+1,": ").concat(o.email," - ").concat(e))}}catch(r){s.failed++,s.errors.push("D\xf2ng ".concat(l+1,": ").concat(o.email," - ").concat(r.message))}}z(s),M(),A(!1)},e.readAsText(O)}catch(e){alert("L\u1ed7i \u0111\u1ecdc file: "+e.message),A(!1)}}else alert("Vui l\xf2ng ch\u1ecdn file CSV")},disabled:D,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white py-2 rounded-lg font-medium transition-colors",children:D?"\u0110ang x\u1eed l\xfd...":"Upload"})]}),R&&(0,tt.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-white",children:[(0,tt.jsx)("h4",{className:"font-bold mb-3",children:"K\u1ebft qu\u1ea3 Import:"}),(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,tt.jsx)("div",{className:"p-3 bg-green-50 rounded",children:(0,tt.jsxs)("p",{className:"text-green-700 font-semibold",children:["\u2713 Th\xe0nh c\xf4ng: ",R.success]})}),(0,tt.jsx)("div",{className:"p-3 bg-red-50 rounded",children:(0,tt.jsxs)("p",{className:"text-red-700 font-semibold",children:["\u2717 Th\u1ea5t b\u1ea1i: ",R.failed]})})]}),R.errors.length>0&&(0,tt.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-300 rounded max-h-48 overflow-y-auto",children:[(0,tt.jsx)("p",{className:"font-semibold text-red-700 mb-2",children:"L\u1ed7i:"}),R.errors.map((e,t)=>(0,tt.jsx)("p",{className:"text-sm text-red-600",children:e},t))]})]})]}),"manage"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h3",{className:"text-lg font-bold mb-4 text-gray-900",children:["Danh s\xe1ch ng\u01b0\u1eddi d\xf9ng (",f.length,")"]}),(0,tt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[(0,tt.jsx)("input",{type:"text",value:p,onChange:e=>{const t=e.target.value.toLowerCase();x(e.target.value);const s=n.filter(e=>e.email.toLowerCase().includes(t)||e.name.toLowerCase().includes(t));b(s)},placeholder:"T\xecm ki\u1ebfm theo email ho\u1eb7c t\xean...",className:"w-full md:w-1/2 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,tt.jsx)("button",{type:"button",onClick:M,className:"self-start md:self-auto px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg font-medium",children:"L\xe0m m\u1edbi"})]}),a?(0,tt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."}):0===f.length?(0,tt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng"}):(0,tt.jsx)("div",{className:"overflow-x-auto",children:(0,tt.jsxs)("table",{className:"w-full",children:[(0,tt.jsx)("thead",{className:"bg-gray-100 border-b-2 border-gray-300",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Email"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"T\xean"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Vai tr\xf2"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"\u0110i\u1ec7n tho\u1ea1i"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-gray-700",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,tt.jsx)("tbody",{children:f.map(e=>(0,tt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,tt.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.email}),(0,tt.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.fullName||"N/A"}),(0,tt.jsx)("td",{className:"px-4 py-3",children:(0,tt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:U(e.roles)})}),(0,tt.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.phoneNumber||"N/A"}),(0,tt.jsx)("td",{className:"px-4 py-3",children:(0,tt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(!0===e.isLocked?"bg-red-100 text-red-700":!1===e.isActive?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:!0===e.isLocked?"\u0110\xe3 kh\xf3a":!1===e.isActive?"V\xf4 hi\u1ec7u":"Ho\u1ea1t \u0111\u1ed9ng"})}),(0,tt.jsxs)("td",{className:"px-4 py-3 text-center space-x-2 flex justify-center",children:[(0,tt.jsx)("button",{onClick:()=>(e=>{v(e),N(!0),L(!1)})(e),className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Xem chi ti\u1ebft",children:(0,tt.jsx)($s,{size:16,className:"text-blue-600"})}),(0,tt.jsx)("button",{onClick:()=>(e=>{v(e),C({email:e.email||"",fullName:e.fullName||"",phoneNumber:e.phoneNumber||"",roles:e.roles||[],major:e.major||"",password:"",confirmPassword:""}),I(!1),S(!0)})(e),className:"p-2 hover:bg-purple-100 rounded-lg transition-colors",title:"Ch\u1ec9nh s\u1eeda",children:(0,tt.jsx)(yr,{size:16,className:"text-purple-600"})}),(0,tt.jsx)("button",{onClick:()=>(async(e,t)=>{const n=t?"unlock":"lock",s=t?"m\u1edf kh\xf3a":"kh\xf3a";if(window.confirm("X\xe1c nh\u1eadn ".concat(s," ng\u01b0\u1eddi d\xf9ng n\xe0y?")))try{const t=localStorage.getItem("token");if(!(await fetch("/api/users/".concat(e,"/").concat(n),{method:"PUT",headers:t?{Authorization:"Bearer ".concat(t)}:{}})).ok)throw new Error("L\u1ed7i ".concat(s," ng\u01b0\u1eddi d\xf9ng"));alert("".concat(s.charAt(0).toUpperCase()+s.slice(1)," ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng")),M()}catch(a){alert("L\u1ed7i: "+a.message)}})(e.userId,e.isLocked),className:"p-2 rounded-lg transition-colors ".concat(e.isLocked?"hover:bg-green-100":"hover:bg-yellow-100"),title:e.isLocked?"M\u1edf kh\xf3a":"Kh\xf3a",children:(0,tt.jsx)(vr,{size:16,className:e.isLocked?"text-green-600":"text-yellow-600"})}),(0,tt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("X\xe1c nh\u1eadn x\xf3a ng\u01b0\u1eddi d\xf9ng n\xe0y?"))try{const t=localStorage.getItem("token");if(!(await fetch("/api/users/".concat(e),{method:"DELETE",headers:t?{Authorization:"Bearer ".concat(t)}:{}})).ok)throw new Error("L\u1ed7i x\xf3a ng\u01b0\u1eddi d\xf9ng");alert("X\xf3a th\xe0nh c\xf4ng"),M()}catch(t){alert("L\u1ed7i: "+t.message)}})(e.userId),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"X\xf3a",children:(0,tt.jsx)(Za,{size:16,className:"text-red-600"})})]})]},e.userId))})]})})]})]}),j&&y&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>N(!1),children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,tt.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:"Chi ti\u1ebft ng\u01b0\u1eddi d\xf9ng"}),(0,tt.jsx)("div",{className:"space-y-3",children:(0,tt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Email:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.email})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"T\xean \u0111\u1ea7y \u0111\u1ee7:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.fullName||"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Username:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.username||"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.phoneNumber||"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Vai tr\xf2:"}),(0,tt.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:U(y.roles)})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Tr\u1ea1ng th\xe1i:"}),(0,tt.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat(!0===y.isLocked?"bg-red-100 text-red-700":!1===y.isActive?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:!0===y.isLocked?"\u0110\xe3 kh\xf3a":!1===y.isActive?"V\xf4 hi\u1ec7u":"Ho\u1ea1t \u0111\u1ed9ng"})]}),y.major&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Ng\xe0nh:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.major})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"Ng\xe0y t\u1ea1o:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.createdAt?new Date(y.createdAt).toLocaleDateString("vi-VN"):"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110\u0103ng nh\u1eadp l\u1ea7n cu\u1ed1i:"}),(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:y.lastLogin?new Date(y.lastLogin).toLocaleString("vi-VN"):"Ch\u01b0a \u0111\u0103ng nh\u1eadp"})]}),(0,tt.jsxs)("div",{className:"col-span-2",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:"M\u1eadt kh\u1ea9u:"}),(0,tt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:P&&y.password||"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,tt.jsx)("button",{onClick:()=>L(!P),className:"text-gray-600 hover:text-gray-900 transition-colors",title:P?"\u1ea8n m\u1eadt kh\u1ea9u":"Hi\u1ec3n th\u1ecb m\u1eadt kh\u1ea9u",children:(0,tt.jsx)($s,{size:18})})]}),(0,tt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"(M\u1eadt kh\u1ea9u \u0111\u01b0\u1ee3c m\xe3 h\xf3a trong c\u01a1 s\u1edf d\u1eef li\u1ec7u)"})]})]})}),(0,tt.jsx)("div",{className:"mt-6 flex justify-end gap-3",children:(0,tt.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-900 rounded-lg font-medium transition-colors",children:"\u0110\xf3ng"})})]})}),w&&y&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>S(!1),children:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,tt.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:"Ch\u1ec9nh s\u1eeda t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng"}),(0,tt.jsxs)("div",{className:"space-y-4",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,tt.jsx)("input",{type:"email",value:k.email,onChange:e=>C(He(He({},k),{},{email:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"H\u1ecd v\xe0 t\xean"}),(0,tt.jsx)("input",{type:"text",value:k.fullName,onChange:e=>C(He(He({},k),{},{fullName:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,tt.jsx)("input",{type:"tel",value:k.phoneNumber,onChange:e=>C(He(He({},k),{},{phoneNumber:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vai tr\xf2"}),(0,tt.jsxs)("p",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-700",children:[U(k.roles)," (Kh\xf4ng th\u1ec3 thay \u0111\u1ed5i vai tr\xf2)"]})]}),Array.isArray(k.roles)&&k.roles.some(e=>"string"===typeof e&&e.toUpperCase().includes("STUDENT")||"object"===typeof e&&e.roleName&&e.roleName.includes("STUDENT"))&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0nh"}),(0,tt.jsxs)("select",{value:k.major||"",onChange:e=>C(He(He({},k),{},{major:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn ng\xe0nh --"}),c.map(e=>(0,tt.jsx)("option",{value:e.programName,children:e.programName},e.id||e.programName))]})]}),(0,tt.jsx)("div",{className:"border-t pt-4",children:(0,tt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,tt.jsx)("input",{type:"checkbox",checked:E,onChange:e=>I(e.target.checked),className:"mr-2"}),"\u0110\u1ed5i m\u1eadt kh\u1ea9u"]})}),E&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\u1eadt kh\u1ea9u m\u1edbi"}),(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsx)("input",{type:E?"text":"password",value:k.password,onChange:e=>C(He(He({},k),{},{password:e.target.value})),placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,tt.jsx)("button",{type:"button",onClick:()=>I(!E),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700",children:(0,tt.jsx)($s,{size:18})})]})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u"}),(0,tt.jsx)("input",{type:E?"text":"password",value:k.confirmPassword,onChange:e=>C(He(He({},k),{},{confirmPassword:e.target.value})),placeholder:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,tt.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,tt.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-900 rounded-lg font-medium transition-colors",children:"H\u1ee7y"}),(0,tt.jsx)("button",{onClick:async()=>{if(k.email&&k.fullName)if(/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(k.email))if(!k.phoneNumber||/^[0-9]{10,11}$/.test(k.phoneNumber)){if(k.password||k.confirmPassword){if(k.password.length<6)return void alert("M\u1eadt kh\u1ea9u ph\u1ea3i t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1");if(k.password!==k.confirmPassword)return void alert("M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng kh\u1edbp")}try{const e=localStorage.getItem("token"),t={email:k.email,fullName:k.fullName,phoneNumber:k.phoneNumber||""};Array.isArray(y.roles)&&y.roles.some(e=>"string"===typeof e&&e.toUpperCase().includes("STUDENT")||"object"===typeof e&&e.roleName&&e.roleName.includes("STUDENT"))&&k.major&&(t.major=k.major),k.password&&(t.password=k.password),console.log("[UserManagement] Updating user:",y.userId,t);const n=await fetch("/api/users/".concat(y.userId),{method:"PUT",headers:He({"Content-Type":"application/json"},e?{Authorization:"Bearer ".concat(e)}:{}),body:JSON.stringify(t)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"L\u1ed7i: ".concat(n.status))}alert("\u2705 C\u1eadp nh\u1eadt t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!"),S(!1),M()}catch(e){console.error("[UserManagement] Update user error:",e),alert("\u274c L\u1ed7i c\u1eadp nh\u1eadt: ".concat(e.message))}}else alert("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7 (ph\u1ea3i l\xe0 10-11 ch\u1eef s\u1ed1)");else alert("Email kh\xf4ng h\u1ee3p l\u1ec7");else alert("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7: Email, T\xean")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"L\u01b0u thay \u0111\u1ed5i"})]})]})})]})}function Nr(){const[e,t]=(0,r.useState)("academic"),[n]=(0,r.useState)([{id:1,year:"2023-2024",status:"Ho\xe0n t\u1ea5t"},{id:2,year:"2024-2025",status:"\u0110ang di\u1ec5n ra"},{id:3,year:"2025-2026",status:"S\u1eafp t\u1edbi"}]);return(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow border-b border-gray-200",children:(0,tt.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"academic",label:"N\u0103m h\u1ecdc & H\u1ecdc k\u1ef3"},{id:"organization",label:"Khoa & B\u1ed9 m\xf4n"},{id:"templates",label:"Template CLO/Rubric"},{id:"workflow",label:"Quy tr\xecnh Workflow"}].map(n=>(0,tt.jsx)("button",{onClick:()=>t(n.id),className:"px-6 py-4 font-medium transition-all border-b-2 whitespace-nowrap ".concat(e===n.id?"border-green-600 text-green-600 bg-green-50":"border-transparent text-gray-600 hover:text-gray-900"),children:n.label},n.id))})}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:["academic"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"N\u0103m h\u1ecdc v\xe0 H\u1ecdc k\u1ef3"}),(0,tt.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors",children:[(0,tt.jsx)(Ka,{size:18}),"Th\xeam n\u0103m h\u1ecdc"]})]}),(0,tt.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,tt.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors",children:(0,tt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,tt.jsx)(Ms,{size:18,className:"text-green-600"}),"N\u0103m h\u1ecdc ",e.year]}),(0,tt.jsx)("div",{className:"mt-3 space-y-2",children:(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"H\u1ecdc k\u1ef3 1",start:"01/09/2024",end:"15/12/2024"},{label:"H\u1ecdc k\u1ef3 2",start:"02/01/2025",end:"30/04/2025"},{label:"H\u1ecdc k\u1ef3 3",start:"01/06/2025",end:"31/08/2025"}].map((e,t)=>(0,tt.jsxs)("div",{className:"border border-gray-100 rounded p-3 bg-gray-50",children:[(0,tt.jsx)("p",{className:"font-medium text-sm text-gray-700",children:e.label}),(0,tt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.start," \u2192 ",e.end]})]},t))})})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("\u0110ang di\u1ec5n ra"===e.status?"bg-blue-100 text-blue-700":"Ho\xe0n t\u1ea5t"===e.status?"bg-gray-100 text-gray-700":"bg-green-100 text-green-700"),children:e.status}),(0,tt.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,tt.jsx)(xa,{size:16,className:"text-blue-600"})}),(0,tt.jsx)("button",{className:"p-2 hover:bg-red-100 rounded-lg transition-colors",children:(0,tt.jsx)(Za,{size:16,className:"text-red-600"})})]})]})},e.id))})]}),"organization"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Khoa & B\u1ed9 m\xf4n"}),(0,tt.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors",children:[(0,tt.jsx)(Ka,{size:18}),"Th\xeam khoa"]})]}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Khoa C\xf4ng ngh\u1ec7 Th\xf4ng tin",code:"IT",depts:5},{name:"Khoa K\u1ef9 thu\u1eadt",code:"ENG",depts:4},{name:"Khoa Kinh t\u1ebf",code:"ECON",depts:3}].map((e,t)=>(0,tt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h4",{className:"font-bold text-gray-900",children:e.name}),(0,tt.jsxs)("p",{className:"text-sm text-gray-500",children:["M\xe3: ",e.code]})]}),(0,tt.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,tt.jsx)(xa,{size:16,className:"text-blue-600"})})]}),(0,tt.jsx)("div",{className:"bg-green-50 p-3 rounded border border-green-100",children:(0,tt.jsxs)("p",{className:"text-sm font-medium text-green-700",children:[e.depts," b\u1ed9 m\xf4n"]})})]},t))})]}),"templates"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Template CLO/Rubric"}),(0,tt.jsx)("div",{className:"space-y-4",children:["CLO Template","Rubric Ti\xeau ch\xed","Thang \u0111\xe1nh gi\xe1"].map((e,t)=>(0,tt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tt.jsx)("h4",{className:"font-bold text-gray-900",children:e}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{className:"px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors text-sm font-medium",children:"Xem"}),(0,tt.jsx)("button",{className:"px-3 py-1 bg-yellow-100 text-yellow-600 rounded hover:bg-yellow-200 transition-colors text-sm font-medium",children:"S\u1eeda"}),(0,tt.jsx)("button",{className:"px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors text-sm font-medium",children:"X\xf3a"})]})]}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: 15/11/2024"})]},t))})]}),"workflow"===e&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Quy tr\xecnh Workflow"}),(0,tt.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border border-green-200",children:[(0,tt.jsx)("div",{className:"flex items-center justify-between mb-6",children:[{status:"Nh\xe1p",color:"gray"},{status:"G\u1eedi duy\u1ec7t",color:"blue"},{status:"\u0110ang duy\u1ec7t",color:"yellow"},{status:"\u0110\xe3 duy\u1ec7t",color:"green"}].map((e,t,n)=>(0,tt.jsxs)("div",{className:"flex items-center flex-1",children:[(0,tt.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-white bg-".concat(e.color,"-500"),children:t+1}),(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-700 ml-2",children:e.status}),t<n.length-1&&(0,tt.jsx)("div",{className:"flex-1 h-1 bg-gray-300 mx-2"})]},t))}),(0,tt.jsxs)("div",{className:"bg-white p-4 rounded border border-gray-200",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:"Quy t\u1eafc chuy\u1ec3n tr\u1ea1ng th\xe1i:"}),(0,tt.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,tt.jsx)("li",{children:"\u2022 Gi\xe1o vi\xean: Nh\xe1p \u2192 G\u1eedi duy\u1ec7t"}),(0,tt.jsx)("li",{children:"\u2022 Tr\u01b0\u1edfng b\u1ed9 m\xf4n: G\u1eedi duy\u1ec7t \u2192 \u0110ang duy\u1ec7t"}),(0,tt.jsx)("li",{children:"\u2022 Ph\xf2ng \u0110\xe0o t\u1ea1o: \u0110ang duy\u1ec7t \u2192 \u0110\xe3 duy\u1ec7t"}),(0,tt.jsx)("li",{children:"\u2022 Admin: C\xf4ng b\u1ed1 ho\u1eb7c h\u1ee7y c\xf4ng b\u1ed1"})]})]})]})]})]})]})}const wr=Je("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Sr=Je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);function kr(){const[e]=(0,r.useState)([{id:1,title:"L\u1eadp tr\xecnh Java c\u01a1 b\u1ea3n",code:"IT101",faculty:"Khoa CNTT",lecturer:"Nguy\u1ec5n V\u0103n A",status:"C\xf4ng b\u1ed1",publishDate:"01/11/2024",effectiveDate:"15/11/2024",version:"v1.0"},{id:2,title:"C\u01a1 s\u1edf d\u1eef li\u1ec7u",code:"IT102",faculty:"Khoa CNTT",lecturer:"Tr\u1ea7n Th\u1ecb B",status:"Ch\u1edd c\xf4ng b\u1ed1",publishDate:null,effectiveDate:"01/12/2024",version:"v1.0"},{id:3,title:"Ph\xe2n t\xedch v\xe0 thi\u1ebft k\u1ebf h\u1ec7 th\u1ed1ng",code:"IT201",faculty:"Khoa CNTT",lecturer:"L\xea V\u0103n C",status:"L\u01b0u tr\u1eef",publishDate:"15/08/2023",effectiveDate:"15/09/2023",version:"v2.1"}]),t=e=>{switch(e){case"C\xf4ng b\u1ed1":return"green";case"Ch\u1edd c\xf4ng b\u1ed1":return"yellow";case"L\u01b0u tr\u1eef":return"gray";default:return"blue"}},n=e=>{switch(e){case"C\xf4ng b\u1ed1":return(0,tt.jsx)(Sa,{size:16});case"Ch\u1edd c\xf4ng b\u1ed1":return(0,tt.jsx)(Na,{size:16});case"L\u01b0u tr\u1eef":return(0,tt.jsx)(wr,{size:16});default:return(0,tt.jsx)(rt,{size:16})}};return(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Th\u1ed1ng k\xea c\xf4ng b\u1ed1"}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"T\u1ed5ng syllabus",value:"156",color:"blue"},{label:"\u0110\xe3 c\xf4ng b\u1ed1",value:"132",color:"green"},{label:"Ch\u1edd c\xf4ng b\u1ed1",value:"18",color:"yellow"},{label:"L\u01b0u tr\u1eef",value:"6",color:"gray"}].map((e,t)=>(0,tt.jsxs)("div",{className:"border-l-4 border-".concat(e.color,"-500 bg-").concat(e.color,"-50 p-4 rounded"),children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-".concat(e.color,"-700"),children:e.label}),(0,tt.jsx)("p",{className:"text-2xl font-bold text-".concat(e.color,"-900 mt-1"),children:e.value})]},t))})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"T\xecm ki\u1ebfm v\xe0 l\u1ecdc"}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,tt.jsx)("input",{type:"text",placeholder:"T\xecm theo t\xean ho\u1eb7c m\xe3 m\xf4n h\u1ecdc",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,tt.jsxs)("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,tt.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("option",{value:"published",children:"C\xf4ng b\u1ed1"}),(0,tt.jsx)("option",{value:"pending",children:"Ch\u1edd c\xf4ng b\u1ed1"}),(0,tt.jsx)("option",{value:"archived",children:"L\u01b0u tr\u1eef"})]}),(0,tt.jsxs)("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,tt.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 khoa"}),(0,tt.jsx)("option",{value:"it",children:"Khoa CNTT"}),(0,tt.jsx)("option",{value:"eng",children:"Khoa K\u1ef9 thu\u1eadt"})]}),(0,tt.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"T\xecm ki\u1ebfm"})]})]}),(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,tt.jsx)("div",{className:"overflow-x-auto",children:(0,tt.jsxs)("table",{className:"w-full",children:[(0,tt.jsx)("thead",{className:"bg-gradient-to-r from-green-50 to-blue-50 border-b-2 border-green-300",children:(0,tt.jsxs)("tr",{children:[(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"T\xean m\xf4n h\u1ecdc"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"M\xe3"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Khoa"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Gi\xe1o vi\xean"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Tr\u1ea1ng th\xe1i"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Ng\xe0y c\xf4ng b\u1ed1"}),(0,tt.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Ng\xe0y hi\u1ec7u l\u1ef1c"}),(0,tt.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-gray-700",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,tt.jsx)("tbody",{children:e.map((e,s)=>(0,tt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,tt.jsxs)("td",{className:"px-4 py-3",children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:e.version})]}),(0,tt.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-700",children:e.code}),(0,tt.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.faculty}),(0,tt.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.lecturer}),(0,tt.jsx)("td",{className:"px-4 py-3",children:(0,tt.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 w-fit bg-".concat(t(e.status),"-100 text-").concat(t(e.status),"-700"),children:[n(e.status),e.status]})}),(0,tt.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.publishDate||"-"}),(0,tt.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.effectiveDate}),(0,tt.jsx)("td",{className:"px-4 py-3 text-center",children:(0,tt.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,tt.jsx)("button",{className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Xem chi ti\u1ebft",children:(0,tt.jsx)($s,{size:16,className:"text-blue-600"})}),"Ch\u1edd c\xf4ng b\u1ed1"===e.status&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)("button",{className:"p-2 hover:bg-green-100 rounded-lg transition-colors",title:"C\xf4ng b\u1ed1",children:(0,tt.jsx)(Sr,{size:16,className:"text-green-600"})}),(0,tt.jsx)("button",{className:"p-2 hover:bg-yellow-100 rounded-lg transition-colors",title:"L\u01b0u tr\u1eef",children:(0,tt.jsx)(wr,{size:16,className:"text-yellow-600"})})]}),"C\xf4ng b\u1ed1"===e.status&&(0,tt.jsx)("button",{className:"p-2 hover:bg-yellow-100 rounded-lg transition-colors",title:"H\u1ee7y c\xf4ng b\u1ed1",children:(0,tt.jsx)(wr,{size:16,className:"text-yellow-600"})}),(0,tt.jsx)("button",{className:"p-2 hover:bg-purple-100 rounded-lg transition-colors",title:"T\u1ea3i xu\u1ed1ng",children:(0,tt.jsx)(ia,{size:16,className:"text-purple-600"})})]})})]},s))})]})})}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"H\xe0nh \u0111\u1ed9ng lo\u1ea1t"}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"C\xf4ng b\u1ed1 t\u1ea5t c\u1ea3 \u0111\u01b0\u1ee3c ch\u1ecdn"}),(0,tt.jsx)("button",{className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors",children:"L\u01b0u tr\u1eef t\u1ea5t c\u1ea3 \u0111\u01b0\u1ee3c ch\u1ecdn"}),(0,tt.jsx)("button",{className:"px-4 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg font-medium transition-colors",children:"H\u1ee7y c\xf4ng b\u1ed1 t\u1ea5t c\u1ea3 \u0111\u01b0\u1ee3c ch\u1ecdn"})]})]})]})}const Cr=Je("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Er="http://localhost:9090/prometheus",Ir={async queryInstant(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new URL("".concat(Er,"/api/v1/query"));n.searchParams.append("query",e),t&&n.searchParams.append("time",t);const s=await fetch(n.toString());if(!s.ok)throw new Error("HTTP ".concat(s.status));return await s.json()}catch(n){throw console.error("[PrometheusService] Query error:",n),n}},async queryRange(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"15s";try{const a=new URL("".concat(Er,"/api/v1/query_range"));a.searchParams.append("query",e),a.searchParams.append("start",t),a.searchParams.append("end",n),a.searchParams.append("step",s);const r=await fetch(a.toString());if(!r.ok)throw new Error("HTTP ".concat(r.status));return await r.json()}catch(a){throw console.error("[PrometheusService] Range query error:",a),a}},async getTargets(){try{const e=await fetch("".concat(Er,"/api/v1/targets"));if(!e.ok)throw new Error("HTTP ".concat(e.status));return await e.json()}catch(e){throw console.error("[PrometheusService] Targets error:",e),e}},async getServiceHealth(){try{const e=await this.queryInstant("up"),t={};return e.data&&e.data.result&&e.data.result.forEach(e=>{const n=e.metric.application||e.metric.instance||"unknown";t[n]={status:"1"===e.value[1]?"UP":"DOWN",instance:e.metric.instance,job:e.metric.job}}),t}catch(e){return console.error("[PrometheusService] Health check error:",e),{}}},async getHttpMetrics(){try{var e;return(null===(e=(await this.queryInstant("rate(http_server_requests_seconds_count[1m])")).data)||void 0===e?void 0:e.result)||[]}catch(t){return console.error("[PrometheusService] HTTP metrics error:",t),[]}},async getJvmMemory(){try{var e;return(null===(e=(await this.queryInstant('jvm_memory_used_bytes{area="heap"} / 1024 / 1024')).data)||void 0===e?void 0:e.result)||[]}catch(t){return console.error("[PrometheusService] JVM memory error:",t),[]}},async getErrorRate(){try{var e;return(null===(e=(await this.queryInstant('(sum(rate(http_server_requests_seconds_count{status=~"5.."}[5m])) by (application)) / (sum(rate(http_server_requests_seconds_count[5m])) by (application)) * 100')).data)||void 0===e?void 0:e.result)||[]}catch(t){return console.error("[PrometheusService] Error rate error:",t),[]}},async getLatencyP95(){try{var e;return(null===(e=(await this.queryInstant("histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m])) * 1000")).data)||void 0===e?void 0:e.result)||[]}catch(t){return console.error("[PrometheusService] Latency error:",t),[]}},async getServices(){try{const e=await this.queryInstant("count(up) by (application)"),t=[];return e.data&&e.data.result&&e.data.result.forEach(e=>{t.push(e.metric.application)}),t}catch(e){return console.error("[PrometheusService] Services list error:",e),[]}}},Pr=()=>{const[e,t]=(0,r.useState)({}),[n,s]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[h,g]=(0,r.useState)("");(0,r.useEffect)(()=>{p();const e=setInterval(p,15e3);return()=>clearInterval(e)},[]);const p=async()=>{try{m(!0),g("");const[e,n,a,r,o]=await Promise.all([Ir.getServiceHealth(),Ir.getHttpMetrics(),Ir.getJvmMemory(),Ir.getErrorRate(),Ir.getLatencyP95()]);t(e),s(n),l(a),i(r),d(o)}catch(e){console.error("[ServerMonitoring] Fetch error:",e),g("Kh\xf4ng th\u1ec3 t\u1ea3i d\u1eef li\u1ec7u t\u1eeb Prometheus")}finally{m(!1)}},x=Object.values(e).filter(e=>"UP"===e.status).length,f=Object.values(e).filter(e=>"DOWN"===e.status).length,b=e=>{const t=parseFloat(e);return isNaN(t)?"0":t>100?t.toFixed(0):t.toFixed(2)};return(0,tt.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,tt.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,tt.jsxs)("div",{className:"mb-8",children:[(0,tt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Monitoring H\u1ec7 Th\u1ed1ng"}),(0,tt.jsx)("p",{className:"text-gray-600",children:"Gi\xe1m s\xe1t th\u1eddi gian th\u1ef1c t\u1eeb Prometheus & Grafana"})]}),h&&(0,tt.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,tt.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Services UP"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:x})]}),(0,tt.jsx)(Sa,{className:"w-12 h-12 text-green-500"})]})}),(0,tt.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Services DOWN"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-red-600",children:f})]}),(0,tt.jsx)(Na,{className:"w-12 h-12 text-red-500"})]})}),(0,tt.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Request Rate"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:n.length})]}),(0,tt.jsx)(Ys,{className:"w-12 h-12 text-blue-500"})]})}),(0,tt.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Uptime"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:"99.9%"})]}),(0,tt.jsx)(Cr,{className:"w-12 h-12 text-purple-500"})]})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,tt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,tt.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Tr\u1ea1ng Th\xe1i D\u1ecbch V\u1ee5"})}),(0,tt.jsx)("div",{className:"px-6 py-4",children:u?(0,tt.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i..."}):0===Object.keys(e).length?(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u t\u1eeb Prometheus"}):(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(e).map(e=>{let[t,n]=e;return(0,tt.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-medium text-gray-900",children:t}),(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:n.instance})]}),"UP"===n.status?(0,tt.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"\u2713 UP"}):(0,tt.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:"\u2717 DOWN"})]})},t)})})})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,tt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,tt.jsx)("h3",{className:"font-bold text-gray-900",children:"JVM Heap Memory"})}),(0,tt.jsx)("div",{className:"px-6 py-4",children:0===a.length?(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"}):(0,tt.jsx)("div",{className:"space-y-3",children:a.slice(0,5).map((e,t)=>(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:e.metric.application||e.metric.instance}),(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,tt.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:Math.min(parseFloat(e.value[1])/512*100,100)+"%"}})}),(0,tt.jsxs)("span",{className:"text-sm font-medium",children:[b(e.value[1])," MB"]})]})]},t))})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,tt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,tt.jsx)("h3",{className:"font-bold text-gray-900",children:"Error Rate (5xx)"})}),(0,tt.jsx)("div",{className:"px-6 py-4",children:0===o.length?(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 l\u1ed7i"}):(0,tt.jsx)("div",{className:"space-y-3",children:o.slice(0,5).map((e,t)=>(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:e.metric.application||"Unknown"}),(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,tt.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:Math.min(parseFloat(e.value[1]),100)+"%"}})}),(0,tt.jsxs)("span",{className:"text-sm font-medium text-red-600",children:[b(e.value[1]),"%"]})]})]},t))})})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow lg:col-span-2",children:[(0,tt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,tt.jsx)("h3",{className:"font-bold text-gray-900",children:"Response Time - P95 Latency"})}),(0,tt.jsx)("div",{className:"px-6 py-4",children:0===c.length?(0,tt.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"}):(0,tt.jsx)("div",{className:"space-y-3",children:c.slice(0,8).map((e,t)=>(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("p",{className:"text-sm text-gray-600",children:e.metric.application||e.metric.instance}),(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,tt.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:Math.min(parseFloat(e.value[1])/500*100,100)+"%"}})}),(0,tt.jsxs)("span",{className:"text-sm font-medium",children:[b(e.value[1])," ms"]})]})]},t))})})]})]}),(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow mt-8",children:[(0,tt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,tt.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"\ud83d\udcca Grafana Dashboard"})}),(0,tt.jsx)("div",{className:"px-6 py-4",children:(0,tt.jsx)("iframe",{src:"/grafana/d/smd-microservices/smd-microservices?orgId=1&kiosk=tv",width:"100%",height:"600",frameBorder:"0",title:"Grafana Dashboard",className:"rounded-lg border border-gray-200"})})]})]})})};function Lr(){const{section:e}=oe(),t=le(),[n,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("token"),n=localStorage.getItem("user");if(!e||!n)return console.log("[AdminPortalLayout] No token/user, redirecting to login"),void t("/login");(e=>{e&&(document.cookie="access_token=".concat(e,"; path=/; SameSite=Lax"))})(e);try{"ROLE_ADMIN"!==JSON.parse(n).role&&(console.log("[AdminPortalLayout] User not admin, redirecting"),t("/login"))}catch(Fr){console.error("[AdminPortalLayout] Invalid user data:",Fr),t("/login")}},[t]);const o=async()=>{try{await Bs.logout()}catch(Fr){console.error("[AdminPortalLayout] Logout error:",Fr)}finally{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),document.cookie="access_token=; Max-Age=0; path=/; SameSite=Lax",t("/login")}},i=[{id:"home",label:"Trang ch\u1ee7",icon:Ge,onClick:()=>t("/admin/portal")},{id:"users",label:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",icon:lt,onClick:()=>t("/admin/portal/users")},{id:"system",label:"C\u1ea5u h\xecnh h\u1ec7 th\u1ed1ng",icon:wa,onClick:()=>t("/admin/portal/system")},{id:"publishing",label:"Qu\u1ea3n l\xfd c\xf4ng b\u1ed1",icon:rt,onClick:()=>t("/admin/portal/publishing")},{id:"monitoring",label:"Gi\xe1m s\xe1t h\u1ec7 th\u1ed1ng",icon:ka,onClick:()=>t("/admin/portal/monitoring")}],c=e?{users:{title:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",component:(0,tt.jsx)(jr,{})},system:{title:"C\u1ea5u h\xecnh h\u1ec7 th\u1ed1ng",component:(0,tt.jsx)(Nr,{})},publishing:{title:"Qu\u1ea3n l\xfd c\xf4ng b\u1ed1",component:(0,tt.jsx)(kr,{})},monitoring:{title:"Gi\xe1m s\xe1t h\u1ec7 th\u1ed1ng",component:(0,tt.jsx)(Pr,{})}}[e]:null;return(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,tt.jsxs)("aside",{className:"bg-gradient-to-b from-blue-900 to-indigo-900 text-white transition-all duration-300 ".concat(n?"w-64":"w-20"," flex flex-col border-r border-blue-800"),children:[(0,tt.jsx)("div",{className:"p-4 border-b border-blue-800",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 ".concat(!n&&"justify-center w-full"),children:[(0,tt.jsx)("div",{className:"bg-blue-400 p-2 rounded-lg",children:(0,tt.jsx)(wa,{size:24})}),n&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"font-bold text-sm",children:"Admin"}),(0,tt.jsx)("p",{className:"text-xs text-blue-200",children:"Qu\u1ea3n tr\u1ecb vi\xean"})]})]}),n&&(0,tt.jsx)("button",{onClick:()=>s(!1),className:"hover:bg-blue-800 p-1 rounded",children:(0,tt.jsx)(Xa,{size:18})})]})}),!n&&(0,tt.jsx)("button",{onClick:()=>s(!0),className:"p-3 hover:bg-blue-800 m-2 rounded-lg",children:(0,tt.jsx)(et,{size:20})}),(0,tt.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:i.map(t=>{const s=t.icon,a=t.id===e||"home"===t.id&&!e;return(0,tt.jsxs)("button",{onClick:t.onClick,className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all ".concat(a?"bg-blue-400 text-white shadow-lg":"text-blue-100 hover:bg-blue-800"),title:t.label,children:[(0,tt.jsx)(s,{size:20}),n&&(0,tt.jsx)("span",{className:"text-sm font-medium",children:t.label})]},t.id)})}),(0,tt.jsxs)("div",{className:"border-t border-blue-800 p-4 space-y-2",children:[(0,tt.jsxs)("div",{className:"relative",children:[(0,tt.jsxs)("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-blue-800 transition-all",children:[(0,tt.jsx)("div",{className:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-sm font-bold",children:"A"}),n&&(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{className:"text-left flex-1",children:[(0,tt.jsx)("p",{className:"text-sm font-medium",children:"Admin User"}),(0,tt.jsx)("p",{className:"text-xs text-blue-200",children:"admin@smd.edu.vn"})]}),(0,tt.jsx)(Xa,{size:16})]})]}),a&&n&&(0,tt.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg text-gray-900 py-2 z-50",children:(0,tt.jsxs)("button",{onClick:o,className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[(0,tt.jsx)(Qe,{size:16}),"\u0110\u0103ng xu\u1ea5t"]})})]}),n&&(0,tt.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors text-sm font-medium",children:[(0,tt.jsx)(Qe,{size:16}),"\u0110\u0103ng xu\u1ea5t"]})]})]}),(0,tt.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,tt.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:(0,tt.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsx)("button",{onClick:()=>s(!n),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:n?(0,tt.jsx)(Ze,{size:20}):(0,tt.jsx)(et,{size:20})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:c?c.title:"C\u1ed5ng qu\u1ea3n tr\u1ecb"}),(0,tt.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Qu\u1ea3n l\xfd h\u1ec7 th\u1ed1ng SMD Microservices"})]})]}),(0,tt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tt.jsxs)("div",{className:"text-right hidden md:block",children:[(0,tt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Admin User"}),(0,tt.jsx)("p",{className:"text-xs text-gray-500",children:"admin@smd.edu.vn"})]}),(0,tt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold cursor-pointer hover:shadow-lg transition-shadow",children:"A"})]})]})}),(0,tt.jsx)("main",{className:"flex-1 overflow-auto",children:(0,tt.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:c?c.component:null})})]})]})}const Or=Je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Tr=Je("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);function Dr(){const e=le(),[t]=Me(),[n,s]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(t.get("keyword")||""),[u,m]=(0,r.useState)("latest"),[h,g]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),[f,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)({}),[k,C]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=localStorage.getItem("user");if(e)try{var t;const n=JSON.parse(e);s(n);const a=(null===(t=n.roles)||void 0===t?void 0:t.some(e=>"STUDENT"===e||"ROLE_STUDENT"===e))||"STUDENT"===n.role||"ROLE_STUDENT"===n.role;N(a),console.log("\ud83d\udc64 User loaded from localStorage:",n),console.log("\ud83c\udf93 Is student:",a)}catch(Fr){console.error("Error parsing user data:",Fr)}else E()},[]);const E=(0,r.useCallback)(async()=>{try{console.log("\ud83d\udcda Fetching all programs for guest filter");const e=await fetch("/api/public/programs");if(e.ok){const t=await e.json(),n=Array.isArray(t)?t:t.data||[];b(n),console.log("\u2705 Programs loaded:",n)}}catch(e){console.error("\u274c Error fetching programs:",e)}},[]),I=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(!0),x(null);try{var n;const s=localStorage.getItem("token"),a=s?{Authorization:"Bearer ".concat(s)}:{};if(e&&((null===(n=e.roles)||void 0===n?void 0:n.some(e=>"STUDENT"===e||"ROLE_STUDENT"===e))||"STUDENT"===e.role||"ROLE_STUDENT"===e.role)){console.log("\ud83c\udf93 Student user - fetching APPROVED + PUBLIC syllabuses");const t=null===e||void 0===e?void 0:e.major;if(console.log("\ud83c\udf93 User program name:",t),!t)return console.warn("\u26a0\ufe0f Student has no program name"),l([]),void x("Kh\xf4ng th\u1ec3 x\xe1c \u0111\u1ecbnh ng\xe0nh h\u1ecdc c\u1ee7a b\u1ea1n. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");console.log("\ud83d\udcda Fetching subjects for program:",t);const n="/api/v1/subject/program/search?name=".concat(encodeURIComponent(t)),s=await fetch(n,{headers:a});if(!s.ok)return console.warn("\u26a0\ufe0f Failed to fetch subjects for program: ".concat(s.status)),void l([]);const r=await s.json();console.log("\u2705 Subjects loaded:",r);const o=r.data||r,i=Array.isArray(o)?o.map(e=>e.subjectCode||e.code).filter(Boolean):[];if(console.log("\ud83d\udccb Subject codes:",i),0===i.length)return console.warn("No subjects found for program"),void l([]);console.log("\ud83d\udd0d Fetching APPROVED + PUBLISHED syllabuses for subjects:",i);const c=await fetch("/api/syllabuses/student-syllabuses?".concat(i.map(e=>"subjectCodes=".concat(encodeURIComponent(e))).join("&")),{headers:a});if(!c.ok)throw new Error("Failed to fetch syllabuses: ".concat(c.status));const d=await c.json();console.log("\u2705 APPROVED + PUBLISHED syllabuses loaded:",d);const u=Array.isArray(d)?d:d.data||[];l(u),console.log("\ud83d\udcca Total syllabuses:",u.length)}else{console.log("\ud83d\udc64 Guest/non-student user - fetching PUBLIC syllabuses");let e="/api/public/syllabuses";if(t){console.log("\ud83d\udcda Fetching subjects for selected program:",t);const n="/api/public/subjects/by-program?programName=".concat(encodeURIComponent(t)),s=await fetch(n);if(s.ok){const t=await s.json(),n=t.data||t,a=Array.isArray(n)?n.map(e=>e.subjectCode||e.code).filter(Boolean):[];a.length>0&&(e+="?".concat(a.map(e=>"subjectCodes=".concat(encodeURIComponent(e))).join("&")))}}console.log("\ud83d\udd0d Fetching from:",e);const n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch syllabuses: ".concat(n.status));const s=await n.json();console.log("\u2705 PUBLIC syllabuses loaded:",s);const a=Array.isArray(s)?s:s.data||[];l(a),console.log("\ud83d\udcca Total syllabuses:",a.length)}}catch(o){var s,a,r;console.error("\u274c Error fetching syllabuses:",{message:o.message,status:null===(s=o.response)||void 0===s?void 0:s.status,data:null===(a=o.response)||void 0===a?void 0:a.data,url:null===(r=o.config)||void 0===r?void 0:r.url}),x("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch gi\xe1o tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{i(!1)}},[]);(0,r.useEffect)(()=>{I(n,y)},[n,y,I]),(0,r.useEffect)(()=>{(async()=>{if(!j||0===a.length)return;console.log("\ud83d\udd0d Checking follow status for",a.length,"syllabuses");const e={};for(const n of a){const s=n.rootId||n.id;try{const t=await ra(s);e[s]=t}catch(t){console.warn("Could not check follow status for",s),e[s]=!1}}S(e),console.log("\u2705 Follow status loaded:",e)})()},[a,j]);const P=(0,r.useMemo)(()=>{let e=a.filter(e=>{var t,n;return!c||(null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))});return"latest"===u?e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)):"oldest"===u?e.sort((e,t)=>new Date(e.createdAt)-new Date(t.createdAt)):"alphabetical"===u&&e.sort((e,t)=>(e.subjectName||"").localeCompare(t.subjectName||"")),e},[a,c,u]),L=()=>(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsx)("div",{className:"flex items-center justify-between",children:(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)(Or,{className:"text-blue-600",size:20}),(0,tt.jsx)("h3",{className:"font-semibold text-gray-900",children:n?"S\u1eafp x\u1ebfp":"B\u1ed9 l\u1ecdc & S\u1eafp x\u1ebfp"})]})}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1eafp x\u1ebfp theo"}),(0,tt.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,tt.jsx)("option",{value:"latest",children:"C\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t"}),(0,tt.jsx)("option",{value:"oldest",children:"C\u1eadp nh\u1eadt c\u0169 nh\u1ea5t"}),(0,tt.jsx)("option",{value:"alphabetical",children:"Th\u1ee9 t\u1ef1 A-Z"})]})]})]});return(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 text-white py-12",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,tt.jsx)(at,{size:32}),(0,tt.jsx)("h1",{className:"text-4xl font-bold",children:"T\xecm Ki\u1ebfm Gi\xe1o Tr\xecnh"})]}),(0,tt.jsx)("p",{className:"text-blue-100",children:"T\xecm ki\u1ebfm v\xe0 kh\xe1m ph\xe1 c\xe1c gi\xe1o tr\xecnh m\xf4n h\u1ecdc \u0111\xe3 xu\u1ea5t b\u1ea3n"})]})}),h&&(0,tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 lg:hidden",children:(0,tt.jsxs)("div",{className:"absolute right-0 top-0 h-full w-80 bg-white shadow-xl p-6 overflow-y-auto",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold",children:"B\u1ed9 l\u1ecdc"}),(0,tt.jsx)("button",{onClick:()=>g(!1),children:(0,tt.jsx)(Ze,{size:24})})]}),(0,tt.jsx)(L,{})]})}),(0,tt.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,tt.jsxs)("div",{className:"flex gap-8",children:[(0,tt.jsx)("div",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,tt.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:(0,tt.jsx)(L,{})})}),(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,tt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tt.jsx)(Tr,{className:"text-gray-600",size:20}),(0,tt.jsxs)("p",{className:"text-gray-700",children:["T\xecm th\u1ea5y ",(0,tt.jsx)("span",{className:"font-semibold text-blue-600",children:P.length})," gi\xe1o tr\xecnh"]})]})}),p&&(0,tt.jsx)("div",{className:"mb-6 p-4 bg-red-100 border-2 border-red-400 text-red-800 rounded-lg",children:p}),o?(0,tt.jsxs)("div",{className:"text-center py-12",children:[(0,tt.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"}),(0,tt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u0110ang t\u1ea3i gi\xe1o tr\xecnh..."})]}):0===P.length?(0,tt.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl shadow-md p-8",children:[(0,tt.jsx)(at,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,tt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh"}),(0,tt.jsx)("p",{className:"text-gray-600 mb-4",children:"Kh\xf4ng c\xf3 gi\xe1o tr\xecnh n\xe0o ph\xf9 h\u1ee3p v\u1edbi b\u1ed9 l\u1ecdc c\u1ee7a b\u1ea1n"}),(0,tt.jsx)("button",{onClick:()=>{d(""),n||v("")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"X\xf3a b\u1ed9 l\u1ecdc"})]}):(0,tt.jsx)("div",{className:"space-y-4",children:P.map(t=>(0,tt.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200 hover:border-blue-300",children:(0,tt.jsxs)("div",{className:"p-6",children:[(0,tt.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,tt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:t.code||t.subjectCode||"N/A"}),(0,tt.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"\u2713 \u0110\xe3 ph\xea duy\u1ec7t"})]}),(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title||t.subjectName||"T\xean m\xf4n h\u1ecdc"})]})}),(0,tt.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-2",children:t.snippet||t.summary||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"}),(0,tt.jsxs)("div",{className:"flex gap-3",children:[(0,tt.jsxs)("button",{onClick:()=>e("/public/syllabus/".concat(t.id)),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-medium group",children:["Xem Chi Ti\u1ebft",(0,tt.jsx)(ct,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),j&&(0,tt.jsxs)("button",{onClick:e=>(async(e,t)=>{t.stopPropagation();const n=e.rootId||e.id,s=w[n];C(e=>He(He({},e),{},{[n]:!0}));try{s?(await aa(n),console.log("\u2705 Unfollowed syllabus:",n)):(await sa(n),console.log("\u2705 Followed syllabus:",n)),S(e=>He(He({},e),{},{[n]:!s}))}catch(a){console.error("\u274c Error toggling follow:",a),alert("Kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao t\xe1c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{C(e=>He(He({},e),{},{[n]:!1}))}})(t,e),disabled:k[t.rootId||t.id],className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-300 ".concat(w[t.rootId||t.id]?"bg-pink-100 text-pink-600 hover:bg-pink-200 border border-pink-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-300"," ").concat(k[t.rootId||t.id]?"opacity-50 cursor-not-allowed":""),title:w[t.rootId||t.id]?"B\u1ecf theo d\xf5i":"Theo d\xf5i",children:[k[t.rootId||t.id]?(0,tt.jsx)("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,tt.jsx)(Zs,{size:20,fill:w[t.rootId||t.id]?"currentColor":"none"}),(0,tt.jsx)("span",{className:"hidden sm:inline",children:w[t.rootId||t.id]?"\u0110\xe3 theo d\xf5i":"Theo d\xf5i"})]})]})]})},t.id))})]})]})})]})}const Ar=e=>{let{cloIds:t}=e;const[n,s]=(0,r.useState)({}),[a,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if((t?t.sort().join(","):"")===o.sort().join(",")&&Object.keys(n).length>0)return void l(!1);t&&t.length>0?(async()=>{l(!0);const e={};for(const s of t||[])try{var n;const t=await Js.getCLOById(s),l=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data||t;let o=[];try{var a;const e=((null===(a=(await Rs.get("/api/v1/mapping/clo/".concat(s))).data)||void 0===a?void 0:a.data)||[]).map(e=>e.ploId||e.plo_id).filter(Boolean);o=await Promise.all(e.map(e=>Rs.get("/api/v1/plo/".concat(e)).then(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)||e.data}).catch(()=>null))),o=o.filter(Boolean)}catch(r){console.warn("Failed to fetch PLO mappings for CLO ".concat(s,":"),r)}e[s]=He(He({},l),{},{mappedPlos:o})}catch(o){console.error("Failed to fetch CLO ".concat(s,":"),o),e[s]={id:s,cloCode:"CLO-".concat(s),description:"Kh\xf4ng th\u1ec3 t\u1ea3i",mappedPlos:[]}}s(e),i(t||[]),l(!1)})():l(!1)},[t,o,n]),(0,tt.jsxs)("div",{children:[(0,tt.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["CLO li\xean k\u1ebft (",(null===t||void 0===t?void 0:t.length)||0,")"]}),a?(0,tt.jsxs)("div",{className:"text-gray-600 text-sm py-2",children:[(0,tt.jsx)(Aa,{className:"inline animate-spin mr-2",size:16}),"\u0110ang t\u1ea3i th\xf4ng tin CLO..."]}):(0,tt.jsx)("div",{className:"space-y-3",children:(t||[]).map(e=>{const t=n[e],s=(null===t||void 0===t?void 0:t.cloCode)||(null===t||void 0===t?void 0:t.name)||"CLO-".concat(e),a=(null===t||void 0===t?void 0:t.description)||"",r=(null===t||void 0===t?void 0:t.mappedPlos)||[];return(0,tt.jsxs)("div",{className:"bg-white border border-indigo-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,tt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tt.jsx)("div",{className:"font-semibold text-indigo-900",children:s}),a&&(0,tt.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:a}),(null===t||void 0===t?void 0:t.level)&&(0,tt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Level: ",t.level]})]}),(0,tt.jsxs)("span",{className:"ml-2 bg-indigo-100 text-indigo-800 px-3 py-1 rounded text-xs font-medium whitespace-nowrap flex-shrink-0",children:["#",e]})]}),r&&r.length>0&&(0,tt.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-100",children:[(0,tt.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"PLO li\xean k\u1ebft:"}),(0,tt.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,tt.jsxs)("div",{className:"text-xs bg-purple-50 border border-purple-200 rounded p-2",children:[(0,tt.jsx)("p",{className:"font-medium text-purple-700",children:e.ploCode||e.code||"PLO"}),(0,tt.jsx)("p",{className:"text-purple-600 mt-0.5",children:e.description||e.ploName||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"})]},t))})]})]},e)})})]})};function Rr(){const{id:e}=oe(),t=le(),[n,s]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)({}),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("user");if(e)try{var t;const n=JSON.parse(e),s=(null===(t=n.roles)||void 0===t?void 0:t.some(e=>"STUDENT"===e||"ROLE_STUDENT"===e))||"STUDENT"===n.role||"ROLE_STUDENT"===n.role;v(s)}catch(Fr){console.error("Error parsing user data:",Fr)}},[]),(0,r.useEffect)(()=>{(async()=>{if(y&&n)try{const t=n.rootId||e,s=await ra(t);x(s)}catch(t){console.warn("Could not check follow status:",t)}})()},[n,y,e]);(0,r.useEffect)(()=>{e&&(async()=>{m(!0),g(null);try{var t;const c=localStorage.getItem("user"),d=!c;console.log("\ud83d\udc64 User authentication status - isGuest:",d,"user:",c?"exists":"null");const u=d?"/api/public/syllabuses/".concat(e):"/api/syllabuses/".concat(e);console.log("\ud83d\udcda Fetching syllabus from: ".concat(u));const h=await Rs.get(u),p=(null===(t=h.data)||void 0===t?void 0:t.data)||h.data;if(!p||0===Object.keys(p).length)return g("Gi\xe1o tr\xecnh kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c ch\u01b0a \u0111\u01b0\u1ee3c c\xf4ng b\u1ed1."),void m(!1);s(p),console.log("\u2705 Syllabus loaded:",p);try{var n;const t=d?"/api/public/syllabuses/".concat(e,"/documents"):"/api/syllabus/documents/syllabus/".concat(e);console.log("\ud83d\udcc4 Fetching documents from: ".concat(t," (isGuest=").concat(d,")"));const s=await Rs.get(t),o=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,c=o.documents||o||[];if(l(c),console.log("\u2705 Documents loaded:",o),!d){const e={};for(const t of c){const n=t.id||t.documentId,s=t.aiIngestionJobId;if(s)try{console.log("\ud83d\udd04 Loading cached summary for document ".concat(n,", jobId: ").concat(s));const t=(await Rs.get("/api/ai/jobs/".concat(s))).data;if(console.log("\ud83d\udcca Job status for doc ".concat(n,":"),t),"succeeded"===t.status&&t.result){let s=t.result;if("string"===typeof s)try{s=JSON.parse(s)}catch(a){}e[n]=s,console.log("\u2705 Cached summary loaded for document ".concat(n,":"),s)}else console.log("\u26a0\ufe0f Job not succeeded for doc ".concat(n,", status: ").concat(t.status))}catch(r){console.warn("\u26a0\ufe0f Failed to load cached summary for document ".concat(n,":"),r)}}console.log("\ud83d\udce6 All loaded summaries:",e),Object.keys(e).length>0&&i(e)}}catch(o){console.warn("\u26a0\ufe0f Failed to load documents:",o),l([])}}catch(r){console.error("\u274c Error fetching syllabus:",r),g("Kh\xf4ng th\u1ec3 t\u1ea3i chi ti\u1ebft gi\xe1o tr\xecnh. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{m(!1)}})()},[e]);if(u)return(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)(Aa,{className:"inline animate-spin text-blue-600 mb-4",size:48}),(0,tt.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i gi\xe1o tr\xecnh..."})]})});if(h||!n)return(0,tt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,tt.jsx)(rt,{size:64,className:"mx-auto mb-2"}),(0,tt.jsx)("p",{className:"text-xl font-semibold",children:h||"Kh\xf4ng t\xecm th\u1ea5y gi\xe1o tr\xecnh"})]}),(0,tt.jsxs)("button",{onClick:()=>t("/public/search"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,tt.jsx)(_s,{className:"inline mr-2",size:16}),"Quay l\u1ea1i t\xecm ki\u1ebfm"]})]})});const j=(()=>{try{const e=n.content;return"string"===typeof e?JSON.parse(e):e||{}}catch(e){return{}}})(),N=!localStorage.getItem("user");return(0,tt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 text-white py-12",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6",children:[(0,tt.jsxs)("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-blue-100 hover:text-white mb-4 transition",children:[(0,tt.jsx)(_s,{size:20}),"Quay l\u1ea1i"]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tt.jsx)(at,{size:32}),(0,tt.jsx)("h1",{className:"text-4xl font-bold",children:n.subjectCode||"N/A"})]}),y&&(0,tt.jsxs)("button",{onClick:async()=>{if(!n)return;const t=n.rootId||e;b(!0);try{p?(await aa(t),x(!1)):(await sa(t),x(!0))}catch(s){console.error("Error toggling follow:",s),alert("Kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao t\xe1c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{b(!1)}},disabled:f,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-lg ".concat(p?"bg-pink-500 text-white hover:bg-pink-600":"bg-white text-blue-700 hover:bg-blue-50"," ").concat(f?"opacity-50 cursor-not-allowed":""),children:[f?(0,tt.jsx)("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,tt.jsx)(Zs,{size:20,fill:p?"currentColor":"none"}),(0,tt.jsx)("span",{children:p?"\u0110ang theo d\xf5i":"Theo d\xf5i"})]})]}),(0,tt.jsx)("h2",{className:"text-2xl text-blue-100 mb-4",children:n.subjectName||"T\xean m\xf4n h\u1ecdc"}),(0,tt.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-blue-100",children:[(0,tt.jsxs)("span",{className:"flex items-center gap-2",children:[(0,tt.jsx)(Ms,{size:16}),"Phi\xean b\u1ea3n: ",n.versionNo||1]}),(0,tt.jsxs)("span",{className:"flex items-center gap-2",children:[(0,tt.jsx)($e,{size:16}),"T\u1ea1o b\u1edfi: ",n.createdBy||"N/A"]}),(0,tt.jsx)("span",{className:"px-3 py-1 bg-green-500 text-white rounded-full text-xs font-medium",children:"\u2713 \u0110\xe3 ph\xea duy\u1ec7t"})]})]})}),(0,tt.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,tt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,tt.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[n.summary&&(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"\ud83d\udcdd T\xf3m t\u1eaft"}),(0,tt.jsx)("p",{className:"text-gray-700 leading-relaxed",children:n.summary})]}),j.learningOutcomes&&(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"\ud83c\udfaf Learning Outcomes"}),(0,tt.jsx)("div",{className:"prose max-w-none text-gray-700",children:(0,tt.jsx)("p",{children:j.learningOutcomes})})]}),j.courseContent&&(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"\ud83d\udcda N\u1ed9i dung m\xf4n h\u1ecdc"}),(0,tt.jsx)("div",{className:"prose max-w-none text-gray-700",children:(0,tt.jsx)("p",{children:j.courseContent})})]}),a&&a.length>0&&(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,tt.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["\ud83d\udcce B\xe0i gi\u1ea3ng (",a.length,")"]}),(0,tt.jsx)("div",{className:"space-y-4",children:a.map(n=>{const s=n.id||n.documentId,a=o[s],r=c===s;return(0,tt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3",children:[(0,tt.jsxs)("div",{className:"flex-1",children:[(0,tt.jsx)("h4",{className:"font-semibold text-gray-900",children:n.originalName||n.fileName||n.title||"T\xe0i li\u1ec7u"}),n.description&&(0,tt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n.description})]}),(0,tt.jsxs)("div",{className:"flex gap-2",children:[(0,tt.jsx)("button",{onClick:()=>(async(e,t)=>{if(e||t)try{const n=!localStorage.getItem("user"),s=n?"/api/public/documents/".concat(t,"/download"):e;console.log("\ud83d\udce5 Downloading document from: ".concat(s," (isGuest=").concat(n,")"));const a=await Rs.get(s,{responseType:"blob"}),r=a.data,l=a.headers["content-disposition"];let o="document.pdf";if(l){const e=l.match(/filename[^;=\n]*=(?:(['"]).*?\1|[^;\n]*)/);e&&e[1]&&(o=e[1].replace(/['"]/g,""))}console.log("\ud83d\udcbe Received file: ".concat(o," (").concat(r.size," bytes, ").concat(r.type,")"));const i=URL.createObjectURL(r);window.open(i,"_blank"),setTimeout(()=>URL.revokeObjectURL(i),6e4)}catch(a){var n,s;console.error("Error viewing document:",a);const e=(null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error)||a.message||"Kh\xf4ng th\u1ec3 m\u1edf t\xe0i li\u1ec7u";alert("".concat(e,". Vui l\xf2ng th\u1eed l\u1ea1i."))}})(n.downloadUrl,n.id||n.documentId),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",title:"Xem t\xe0i li\u1ec7u",children:(0,tt.jsx)($s,{size:18})}),!N&&(0,tt.jsx)("button",{onClick:()=>(async t=>{if(t){d(t);try{var n;const a=null===(n=(await Rs.post("/api/ai/summary",{syllabusId:e,documentId:t,length:"MEDIUM"})).data)||void 0===n?void 0:n.jobId;if(!a)throw new Error("No jobId returned");console.log("[Summary] Job created: ".concat(a," for document ").concat(t));try{console.log("[Summary] Saving jobId to database..."),await Rs.put("/api/syllabus/documents/".concat(t,"/update-job-id"),{jobId:a}),console.log("[Summary] \u2705 jobId saved to database successfully")}catch(s){console.warn("[Summary] \u26a0\ufe0f Failed to save jobId:",s)}let r=0;const o=60,c=2e3,u=async()=>{if(r>=o)throw new Error("Timeout waiting for summary");r++;const n=(await Rs.get("/api/ai/jobs/".concat(a))).data;if("succeeded"===n.status&&n.result){let a=n.result;if("string"===typeof a)try{a=JSON.parse(a)}catch(m){}i(e=>He(He({},e),{},{[t]:a})),d(null);try{if(localStorage.getItem("user")){var s;const t=await Rs.get("/api/syllabus/documents/syllabus/".concat(e)),n=(null===(s=t.data)||void 0===s?void 0:s.data)||t.data,a=n.documents||n||[];l(a),console.log("[Summary] \u2705 Documents reloaded with updated jobId")}}catch(h){console.warn("[Summary] Could not reload documents:",h)}return a}if("FAILED"===n.status)throw new Error(n.error||"Summary generation failed");return await new Promise(e=>setTimeout(e,c)),u()};await u()}catch(a){console.error("Error generating summary:",a),alert("Kh\xf4ng th\u1ec3 t\u1ea1o t\xf3m t\u1eaft: "+a.message),d(null)}}})(s,n.originalName||n.fileName),disabled:r,className:"p-2 text-purple-600 hover:bg-purple-50 rounded transition disabled:opacity-50",title:"T\u1ea1o t\xf3m t\u1eaft",children:r?(0,tt.jsx)(Aa,{className:"animate-spin",size:18}):(0,tt.jsx)(za,{size:18})}),N&&(0,tt.jsx)("button",{onClick:()=>t("/login"),className:"p-2 text-gray-400 hover:bg-gray-100 rounded transition cursor-not-allowed",title:"\u0110\u0103ng nh\u1eadp \u0111\u1ec3 d\xf9ng ch\u1ee9c n\u0103ng t\xf3m t\u1eaft AI",children:(0,tt.jsx)(za,{size:18})})]})]}),a&&(0,tt.jsxs)("div",{className:"mt-3 p-4 bg-gradient-to-br from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:[(0,tt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,tt.jsx)(za,{className:"text-purple-600",size:18}),(0,tt.jsx)("p",{className:"font-semibold text-purple-900",children:"T\xf3m t\u1eaft AI"})]}),a.summary&&(0,tt.jsx)("div",{className:"mb-4",children:(0,tt.jsx)("p",{className:"text-sm text-gray-800 leading-relaxed",children:a.summary})}),a.bullets&&Array.isArray(a.bullets)&&a.bullets.length>0&&(0,tt.jsxs)("div",{className:"mb-3",children:[(0,tt.jsx)("p",{className:"text-xs font-semibold text-purple-900 mb-2",children:"\u0110i\u1ec3m ch\xednh:"}),(0,tt.jsx)("ul",{className:"text-xs text-gray-700 space-y-1",children:a.bullets.map((e,t)=>(0,tt.jsxs)("li",{className:"flex items-start gap-2",children:[(0,tt.jsx)("span",{className:"text-purple-600 mt-0.5",children:"\u2022"}),(0,tt.jsx)("span",{children:e})]},t))})]}),a.keywords&&Array.isArray(a.keywords)&&a.keywords.length>0&&(0,tt.jsxs)("div",{className:"mb-3",children:[(0,tt.jsx)("p",{className:"text-xs font-semibold text-purple-900 mb-2",children:"T\u1eeb kh\xf3a:"}),(0,tt.jsx)("div",{className:"flex flex-wrap gap-2",children:a.keywords.map((e,t)=>(0,tt.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:e},t))})]}),(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t border-purple-200",children:[a.targetAudience&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs font-semibold text-purple-900 mb-1",children:"\u0110\u1ed1i t\u01b0\u1ee3ng:"}),(0,tt.jsx)("p",{className:"text-xs text-gray-700",children:a.targetAudience})]}),a.prerequisites&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-xs font-semibold text-purple-900 mb-1",children:"Y\xeau c\u1ea7u:"}),(0,tt.jsx)("p",{className:"text-xs text-gray-700",children:a.prerequisites})]})]}),a.ragUsed&&(0,tt.jsx)("div",{className:"mt-3 pt-3 border-t border-purple-200",children:(0,tt.jsx)("p",{className:"text-xs text-gray-500 italic",children:"T\xf3m t\u1eaft \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi AI t\u1eeb n\u1ed9i dung t\xe0i li\u1ec7u"})})]}),n.cloIds&&n.cloIds.length>0&&(0,tt.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,tt.jsx)(Ar,{cloIds:n.cloIds})})]},s)})})]})]}),(0,tt.jsxs)("div",{className:"space-y-6",children:[(0,tt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Th\xf4ng tin"}),(0,tt.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"M\xe3 m\xf4n:"}),(0,tt.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:n.subjectCode||"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Tr\u1ea1ng th\xe1i:"}),(0,tt.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium",children:n.status||"APPROVED"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Phi\xean b\u1ea3n:"}),(0,tt.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:n.versionNo||1})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Ng\xe0y t\u1ea1o:"}),(0,tt.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:n.createdAt?new Date(n.createdAt).toLocaleDateString("vi-VN"):"N/A"})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt:"}),(0,tt.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:n.updatedAt?new Date(n.updatedAt).toLocaleDateString("vi-VN"):"N/A"})]})]})]}),(0,tt.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl shadow-md p-6",children:[(0,tt.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Th\u1ed1ng k\xea"}),(0,tt.jsxs)("div",{className:"space-y-3",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("span",{className:"text-blue-100",children:"T\xe0i li\u1ec7u"}),(0,tt.jsx)("span",{className:"text-2xl font-bold",children:a.length})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsx)("span",{className:"text-blue-100",children:"Phi\xean b\u1ea3n"}),(0,tt.jsx)("span",{className:"text-2xl font-bold",children:n.versionNo||1})]})]})]})]})]})})]})}function zr(e){let{user:t}=e;const n=le(),[s,a]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{d(),null!==t&&void 0!==t&&t.major&&c(t.major)},[null===t||void 0===t?void 0:t.major]);const d=async()=>{o(!0);try{const e=await la();console.log("[FollowedSyllabuses] Loaded from API:",e),a(e)}catch(e){console.error("Error loading followed syllabi:",e),a([])}finally{o(!1)}};return l?(0,tt.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center",children:(0,tt.jsxs)("div",{className:"text-center",children:[(0,tt.jsx)(at,{className:"w-16 h-16 text-blue-500 mx-auto mb-4 animate-bounce"}),(0,tt.jsx)("p",{className:"text-gray-600 text-lg",children:"\u0110ang t\u1ea3i danh s\xe1ch theo d\xf5i..."})]})}):(0,tt.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white pb-12",children:[(0,tt.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white shadow-lg",children:(0,tt.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,tt.jsxs)("button",{onClick:()=>n("/student"),className:"flex items-center gap-2 mb-6 text-blue-100 hover:text-white transition",children:[(0,tt.jsx)(_s,{size:20}),"Quay l\u1ea1i"]}),(0,tt.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\ud83d\udcda Gi\xe1o Tr\xecnh Theo D\xf5i"}),(0,tt.jsx)("p",{className:"text-blue-100",children:"Danh s\xe1ch t\u1ea5t c\u1ea3 gi\xe1o tr\xecnh b\u1ea1n \u0111ang theo d\xf5i"})]})}),(0,tt.jsx)("div",{className:"container mx-auto px-6 py-12",children:0===s.length?(0,tt.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[(0,tt.jsx)(Zs,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,tt.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Ch\u01b0a c\xf3 gi\xe1o tr\xecnh theo d\xf5i"}),(0,tt.jsx)("p",{className:"text-gray-500 mb-6",children:"H\xe3y kh\xe1m ph\xe1 v\xe0 theo d\xf5i nh\u1eefng gi\xe1o tr\xecnh m\xe0 b\u1ea1n quan t\xe2m"}),(0,tt.jsx)("button",{onClick:()=>n("/public/search"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-medium",children:"T\xecm Gi\xe1o Tr\xecnh"})]}):(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm",children:"\u0110ang theo d\xf5i"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:s.length})]}),(0,tt.jsx)(at,{className:"w-12 h-12 text-blue-200"})]})}),(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm",children:"\u0110\xe3 ho\xe0n th\xe0nh"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:"0"})]}),(0,tt.jsx)(ca,{className:"w-12 h-12 text-purple-200"})]})}),(0,tt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500",children:(0,tt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tt.jsxs)("div",{children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm",children:"G\u1ea7n \u0111\xe2y xem"}),(0,tt.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:JSON.parse(localStorage.getItem("recentlySyllabuses")||"[]").length})]}),(0,tt.jsx)(ot,{className:"w-12 h-12 text-orange-200"})]})})]}),(0,tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>e?i&&e.programName&&e.programName!==i?null:(0,tt.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition overflow-hidden border-l-4 border-blue-500 group",children:[(0,tt.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4",children:[(0,tt.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,tt.jsx)("span",{className:"inline-block bg-blue-700 text-white px-3 py-1 rounded-full text-xs font-semibold",children:e.subjectCode}),(0,tt.jsx)("button",{onClick:()=>(async e=>{try{await aa(e);const t=s.filter(t=>t.rootId!==e);a(t)}catch(t){console.error("Error unfollowing syllabus:",t)}})(e.rootId),className:"text-blue-100 hover:text-white transition p-1",title:"H\u1ee7y theo d\xf5i",children:(0,tt.jsx)(Za,{size:18})})]}),(0,tt.jsx)("h3",{className:"text-lg font-bold text-white group-hover:text-blue-100 transition",children:e.subjectName})]}),(0,tt.jsxs)("div",{className:"p-4",children:[(0,tt.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.summary||e.content||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"}),(0,tt.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,tt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Tr\u1ea1ng th\xe1i:"}),(0,tt.jsx)("span",{className:"font-semibold text-gray-900",children:e.status||"N/A"})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Phi\xean b\u1ea3n:"}),(0,tt.jsx)("span",{className:"font-semibold text-gray-900",children:e.versionNo||"1"})]}),(0,tt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"T\xe1c gi\u1ea3:"}),(0,tt.jsx)("span",{className:"font-semibold text-gray-900",children:e.createdBy||"N/A"})]}),e.followedAt&&(0,tt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,tt.jsx)("span",{className:"text-gray-600",children:"Theo d\xf5i t\u1eeb:"}),(0,tt.jsx)("span",{className:"font-semibold text-gray-900 text-right",children:new Date(e.followedAt).toLocaleDateString("vi-VN")})]})]}),(0,tt.jsxs)("button",{onClick:()=>{return t=e.rootId,void n("/public/syllabus/".concat(t));var t},className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition font-medium flex items-center justify-center gap-2",children:[(0,tt.jsx)(ea,{size:16}),"Xem Chi Ti\u1ebft"]})]})]},e.rootId):null)})]})})]})}const _r=e=>{let{allowedRoles:t,children:n}=e;const s=(()=>{try{return JSON.parse(localStorage.getItem("user"))}catch(Fr){return null}})(),a=(null===s||void 0===s?void 0:s.role)||localStorage.getItem("role");return a?t.includes(a)?n:(0,tt.jsx)(Ne,{to:"/",replace:!0}):(0,tt.jsx)(Ne,{to:"/login",replace:!0})};const Mr=function(){const e=ae(),t="/login"===e.pathname,n=e.pathname.startsWith("/student"),s="/lecturer/dashboard"===e.pathname,a=e.pathname.startsWith("/lecturer/portal"),r=e.pathname.startsWith("/admin/portal"),l=e.pathname.startsWith("/academic"),o=e.pathname.startsWith("/rector");return(0,tt.jsxs)("div",{className:"flex flex-col min-h-screen",children:[!t&&!n&&!s&&!a&&!r&&!l&&!o&&(0,tt.jsx)(nt,{}),(0,tt.jsx)("main",{className:"flex-1",children:(0,tt.jsxs)(ke,{children:[(0,tt.jsx)(we,{path:"/",element:(0,tt.jsx)(zs,{})}),(0,tt.jsx)(we,{path:"/home",element:(0,tt.jsx)(zs,{})}),(0,tt.jsx)(we,{path:"/search",element:(0,tt.jsx)(Ne,{to:"/public/search",replace:!0})}),(0,tt.jsx)(we,{path:"/syllabus/:id",element:(0,tt.jsx)(Ws,{})}),(0,tt.jsx)(we,{path:"/login",element:(0,tt.jsx)(Qs,{})}),(0,tt.jsx)(we,{path:"/student",element:(0,tt.jsx)(oa,{})}),(0,tt.jsx)(we,{path:"/student/profile",element:(0,tt.jsx)(va,{})}),(0,tt.jsx)(we,{path:"/student/followed",element:(0,tt.jsx)(zr,{})}),(0,tt.jsx)(we,{path:"/student/syllabus/:id",element:(0,tt.jsx)(ga,{})}),(0,tt.jsx)(we,{path:"/lecturer/dashboard",element:(0,tt.jsx)(fr,{})}),(0,tt.jsx)(we,{path:"/admin/dashboard",element:(0,tt.jsx)(ja,{})}),(0,tt.jsx)(we,{path:"/hod/dashboard",element:(0,tt.jsx)(_r,{allowedRoles:["ROLE_HOD","ROLE_ADMIN","ROLE_RECTOR"],children:(0,tt.jsx)(Ba,{})})}),(0,tt.jsx)(we,{path:"/academic/dashboard",element:(0,tt.jsx)(_r,{allowedRoles:["ROLE_ACADEMIC_AFFAIRS","ROLE_RECTOR"],children:(0,tt.jsx)(Ua,{})})}),(0,tt.jsx)(we,{path:"/rector/dashboard",element:(0,tt.jsx)(_r,{allowedRoles:["ROLE_RECTOR","ROLE_ADMIN"],children:(0,tt.jsx)(Ha,{})})}),(0,tt.jsx)(we,{path:"/academic/programs",element:(0,tt.jsx)(_r,{allowedRoles:["ROLE_ACADEMIC_AFFAIRS","ROLE_ADMIN"],children:(0,tt.jsx)(qa,{})})}),(0,tt.jsx)(we,{path:"/public/search",element:(0,tt.jsx)(Dr,{})}),(0,tt.jsx)(we,{path:"/public/syllabus/:id",element:(0,tt.jsx)(Rr,{})}),(0,tt.jsx)(we,{path:"/lecturer/portal",element:(0,tt.jsx)(mr,{})}),(0,tt.jsx)(we,{path:"/lecturer/portal/syllabi",element:(0,tt.jsx)(cr,{})}),(0,tt.jsx)(we,{path:"/lecturer/portal/syllabi/new",element:(0,tt.jsx)(ar,{})}),(0,tt.jsx)(we,{path:"/lecturer/portal/syllabi/:id",element:(0,tt.jsx)(ar,{})}),(0,tt.jsx)(we,{path:"/lecturer/portal/syllabi/:rootId/compare",element:(0,tt.jsx)(ur,{})}),(0,tt.jsx)(we,{path:"/admin/portal",element:(0,tt.jsx)(br,{})}),(0,tt.jsx)(we,{path:"/admin/portal/:section",element:(0,tt.jsx)(Lr,{})}),(0,tt.jsx)(we,{path:"*",element:(0,tt.jsx)(Ne,{to:"/",replace:!0})})]})}),!t&&!n&&!s&&!a&&!r&&!l&&!o&&(0,tt.jsx)(st,{})]})},Ur=console.error;console.error=function(){for(var e,t,n,s,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];null!==(e=r[0])&&void 0!==e&&null!==(t=e.includes)&&void 0!==t&&t.call(e,"WebSocket")||null!==(n=r[0])&&void 0!==n&&null!==(s=n.includes)&&void 0!==s&&s.call(n,"ws://")||Ur.apply(console,r)},o.createRoot(document.getElementById("root")).render((0,tt.jsx)(r.StrictMode,{children:(0,tt.jsx)(Te,{children:(0,tt.jsx)(Mr,{})})}))})();
//# sourceMappingURL=main.198db946.js.map